2026-01-30T16:32:48.864+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 7
2026-01-30T16:32:48.910+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 218
2026-01-30T16:32:48.923+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=181 ms | success=false
2026-01-30T16:32:48.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:48.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:48.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:49.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 219
2026-01-30T16:32:49.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 219
2026-01-30T16:32:49.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:49.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 8
2026-01-30T16:32:49.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 8 and transaction ID: TXN-d82dcac4-a6d3-41ab-89a5-2df0a8b8c537
2026-01-30T16:32:49.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:49.046+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.063+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.078+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 8
2026-01-30T16:32:49.104+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 219
2026-01-30T16:32:49.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=189 ms | success=false
2026-01-30T16:32:49.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:49.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:49.139+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:49.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 220
2026-01-30T16:32:49.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 220
2026-01-30T16:32:49.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:49.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 9
2026-01-30T16:32:49.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 9 and transaction ID: TXN-364447db-b2d9-4ba1-ac4d-7fe888ab27a0
2026-01-30T16:32:49.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:49.268+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.268+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.268+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 9
2026-01-30T16:32:49.300+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 220
2026-01-30T16:32:49.362+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=234 ms | success=false
2026-01-30T16:32:49.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:49.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:49.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:49.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 221
2026-01-30T16:32:49.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 221
2026-01-30T16:32:49.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:49.488+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 10
2026-01-30T16:32:49.488+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 10 and transaction ID: TXN-48bdcf83-0ae2-4df1-b8ab-ccebdaa45fd2
2026-01-30T16:32:49.488+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:49.488+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.488+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.488+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 10
2026-01-30T16:32:49.504+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 221
2026-01-30T16:32:49.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=146 ms | success=false
2026-01-30T16:32:49.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:49.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:49.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:49.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 222
2026-01-30T16:32:49.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 222
2026-01-30T16:32:49.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:49.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 11
2026-01-30T16:32:49.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 11 and transaction ID: TXN-9ef2cb15-b130-4462-b51f-4244d14c581d
2026-01-30T16:32:49.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:49.656+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.656+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.656+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 11
2026-01-30T16:32:49.681+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 222
2026-01-30T16:32:49.706+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=176 ms | success=false
2026-01-30T16:32:49.722+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:49.722+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:49.722+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:49.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 223
2026-01-30T16:32:49.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 223
2026-01-30T16:32:49.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:49.835+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 12
2026-01-30T16:32:49.836+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 12 and transaction ID: TXN-62840f27-4acd-4178-8f0a-d4c551496e78
2026-01-30T16:32:49.836+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:49.837+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.842+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:49.845+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 12
2026-01-30T16:32:49.854+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 223
2026-01-30T16:32:49.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=159 ms | success=false
2026-01-30T16:32:49.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:49.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:49.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:49.971+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 224
2026-01-30T16:32:49.971+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 224
2026-01-30T16:32:49.971+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:49.997+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 13
2026-01-30T16:32:49.997+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 13 and transaction ID: TXN-738a9897-5740-441e-98eb-7fbc15d1bff7
2026-01-30T16:32:49.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:49.999+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.002+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.005+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 13
2026-01-30T16:32:50.019+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 224
2026-01-30T16:32:50.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=144 ms | success=false
2026-01-30T16:32:50.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:50.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:50.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:50.144+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 225
2026-01-30T16:32:50.144+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 225
2026-01-30T16:32:50.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:50.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 14
2026-01-30T16:32:50.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 14 and transaction ID: TXN-9370c1bb-9482-4e00-a7e5-4839ee58ae0a
2026-01-30T16:32:50.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:50.172+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.173+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.173+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 14
2026-01-30T16:32:50.188+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 225
2026-01-30T16:32:50.220+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=175 ms | success=false
2026-01-30T16:32:50.234+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:50.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:50.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:50.450+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 226
2026-01-30T16:32:50.450+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 226
2026-01-30T16:32:50.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:50.487+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 15
2026-01-30T16:32:50.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 15 and transaction ID: TXN-c64bee50-33ad-4b75-a973-4f7459861ea2
2026-01-30T16:32:50.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:50.499+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.507+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.516+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 15
2026-01-30T16:32:50.540+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 226
2026-01-30T16:32:50.561+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=326 ms | success=false
2026-01-30T16:32:50.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:50.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:50.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:50.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 227
2026-01-30T16:32:50.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 227
2026-01-30T16:32:50.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:50.680+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 16
2026-01-30T16:32:50.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 16 and transaction ID: TXN-7dae5710-b8c4-4ac7-9f87-16fb71f6f5fc
2026-01-30T16:32:50.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:50.684+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.687+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.691+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 16
2026-01-30T16:32:50.704+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 227
2026-01-30T16:32:50.722+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=147 ms | success=false
2026-01-30T16:32:50.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:50.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:50.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:50.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 228
2026-01-30T16:32:50.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 228
2026-01-30T16:32:50.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:50.841+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 17
2026-01-30T16:32:50.842+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 17 and transaction ID: TXN-375e5988-75e0-4111-a290-f8e30c37a526
2026-01-30T16:32:50.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:50.844+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.846+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:50.848+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 17
2026-01-30T16:32:50.863+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 228
2026-01-30T16:32:50.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=154 ms | success=false
2026-01-30T16:32:50.895+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:50.895+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:50.895+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:50.993+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 229
2026-01-30T16:32:50.993+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 229
2026-01-30T16:32:50.993+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:51.025+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 18
2026-01-30T16:32:51.025+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 18 and transaction ID: TXN-5c10703d-c28b-457e-b381-35302a422a2d
2026-01-30T16:32:51.025+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:51.025+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.025+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.025+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 18
2026-01-30T16:32:51.040+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 229
2026-01-30T16:32:51.056+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=165 ms | success=false
2026-01-30T16:32:51.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:51.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:51.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:51.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 230
2026-01-30T16:32:51.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 230
2026-01-30T16:32:51.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:51.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 19
2026-01-30T16:32:51.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 19 and transaction ID: TXN-94f4d145-34b6-41b4-aca8-2c5c63d2fefa
2026-01-30T16:32:51.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:51.200+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.200+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.200+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 19
2026-01-30T16:32:51.215+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 230
2026-01-30T16:32:51.231+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=167 ms | success=false
2026-01-30T16:32:51.246+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:51.246+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:51.246+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:51.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 231
2026-01-30T16:32:51.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 231
2026-01-30T16:32:51.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:51.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 20
2026-01-30T16:32:51.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 20 and transaction ID: TXN-1c065757-3210-4d0c-86b2-5e0a722f51f1
2026-01-30T16:32:51.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:51.368+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.368+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.368+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 20
2026-01-30T16:32:51.383+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 231
2026-01-30T16:32:51.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=152 ms | success=false
2026-01-30T16:32:51.469+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:51.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:51.484+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:51.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 232
2026-01-30T16:32:51.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 232
2026-01-30T16:32:51.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:51.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 21
2026-01-30T16:32:51.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 21 and transaction ID: TXN-2ad9b7cf-faa0-441a-9c4c-f502a276f393
2026-01-30T16:32:51.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:51.669+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.669+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.669+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 21
2026-01-30T16:32:51.685+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 232
2026-01-30T16:32:51.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=262 ms | success=false
2026-01-30T16:32:51.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:51.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:51.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:51.859+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 233
2026-01-30T16:32:51.859+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 233
2026-01-30T16:32:51.859+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:51.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 22
2026-01-30T16:32:51.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 22 and transaction ID: TXN-27730e21-d9ca-4e1f-9bb7-5eb2f7c99dbf
2026-01-30T16:32:51.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:51.891+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.891+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:51.891+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 22
2026-01-30T16:32:51.906+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 233
2026-01-30T16:32:51.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=181 ms | success=false
2026-01-30T16:32:51.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:51.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:51.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:52.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 234
2026-01-30T16:32:52.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 234
2026-01-30T16:32:52.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:52.082+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 23
2026-01-30T16:32:52.082+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 23 and transaction ID: TXN-25038b36-66be-4860-9a3b-73ef1eaa86a1
2026-01-30T16:32:52.082+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:52.082+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.082+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.082+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 23
2026-01-30T16:32:52.097+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 234
2026-01-30T16:32:52.113+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=183 ms | success=false
2026-01-30T16:32:52.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:52.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:52.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:52.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 235
2026-01-30T16:32:52.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 235
2026-01-30T16:32:52.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:52.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 24
2026-01-30T16:32:52.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 24 and transaction ID: TXN-ff32d448-d03e-4105-9204-eaa31be41a60
2026-01-30T16:32:52.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:52.259+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.259+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.259+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 24
2026-01-30T16:32:52.274+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 235
2026-01-30T16:32:52.290+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=163 ms | success=false
2026-01-30T16:32:52.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:52.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:52.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:52.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 236
2026-01-30T16:32:52.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 236
2026-01-30T16:32:52.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:52.436+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 25
2026-01-30T16:32:52.436+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 25 and transaction ID: TXN-5c140fb6-4bdd-42c6-8dde-fff0aff445fa
2026-01-30T16:32:52.436+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:52.436+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.436+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect

java.lang.RuntimeException: Failed to create shipment: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.452+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 25
2026-01-30T16:32:52.467+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 236
2026-01-30T16:32:52.483+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=181 ms | success=false
2026-01-30T16:32:52.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:52.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:52.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:52.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:52.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 237
2026-01-30T16:32:52.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=237, status=PREPARED, latency=112ms
2026-01-30T16:32:52.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:52.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:52.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 26
2026-01-30T16:32:52.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=26, status=PRE_AUTHORIZED, latency=93ms
2026-01-30T16:32:52.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:52.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:52.719+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: I/O error on POST request for "http://localhost:8083/api/shipments/prepare": Connection refused: connect

org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8083/api/shipments/prepare": Connection refused: connect
	at org.springframework.web.client.RestTemplate.createResourceAccessException(RestTemplate.java:926) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:906) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:589) ~[na:na]
	at java.base/sun.nio.ch.Net.connect(Net.java:578) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:751) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:686) ~[na:na]
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:636) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:282) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:386) ~[na:na]
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:408) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1320) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1253) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1139) ~[na:na]
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1068) ~[na:na]
	at org.springframework.http.client.SimpleClientHttpRequest.executeInternal(SimpleClientHttpRequest.java:79) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractStreamingClientHttpRequest.executeInternal(AbstractStreamingClientHttpRequest.java:71) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:81) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:900) ~[spring-web-6.2.12.jar:6.2.12]
	... 67 common frames omitted

2026-01-30T16:32:52.719+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: I/O error on POST request for "http://localhost:8083/api/shipments/prepare": Connection refused: connect
2026-01-30T16:32:52.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/26/abort
2026-01-30T16:32:52.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 26
2026-01-30T16:32:52.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/237/abort
2026-01-30T16:32:52.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 237
2026-01-30T16:32:52.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 125 ms with 2 compensations
2026-01-30T16:32:52.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=351 ms | success=false
2026-01-30T16:32:52.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:52.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:52.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:52.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:52.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 238
2026-01-30T16:32:52.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=238, status=PREPARED, latency=132ms
2026-01-30T16:32:52.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:52.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:53.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 27
2026-01-30T16:32:53.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=27, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:32:53.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:53.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:53.252+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 6
2026-01-30T16:32:53.252+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=6, status=RESERVED, latency=245ms
2026-01-30T16:32:53.252+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:53.252+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:53.252+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/238/commit
2026-01-30T16:32:53.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 238
2026-01-30T16:32:53.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=238, latency=16ms
2026-01-30T16:32:53.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:53.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/27/commit
2026-01-30T16:32:53.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 27
2026-01-30T16:32:53.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=27, latency=15ms
2026-01-30T16:32:53.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:53.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/6/commit
2026-01-30T16:32:53.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 6
2026-01-30T16:32:53.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=6, latency=47ms
2026-01-30T16:32:53.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:53.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=475 ms | success=true
2026-01-30T16:32:53.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:53.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:53.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:53.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:53.462+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 239
2026-01-30T16:32:53.462+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=239, status=PREPARED, latency=116ms
2026-01-30T16:32:53.462+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:53.462+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:53.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 28
2026-01-30T16:32:53.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=28, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T16:32:53.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:53.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:53.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 7
2026-01-30T16:32:53.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=7, status=RESERVED, latency=31ms
2026-01-30T16:32:53.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:53.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:53.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/239/commit
2026-01-30T16:32:53.540+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 239
2026-01-30T16:32:53.540+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=239, latency=15ms
2026-01-30T16:32:53.540+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:53.540+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/28/commit
2026-01-30T16:32:53.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 28
2026-01-30T16:32:53.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=28, latency=16ms
2026-01-30T16:32:53.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:53.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/7/commit
2026-01-30T16:32:53.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 7
2026-01-30T16:32:53.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=7, latency=16ms
2026-01-30T16:32:53.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:53.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=237 ms | success=true
2026-01-30T16:32:53.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:53.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:53.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:53.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:53.696+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 240
2026-01-30T16:32:53.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=240, status=PREPARED, latency=110ms
2026-01-30T16:32:53.698+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:53.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:53.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 29
2026-01-30T16:32:53.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=29, status=PRE_AUTHORIZED, latency=27ms
2026-01-30T16:32:53.726+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:53.726+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:53.761+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 8
2026-01-30T16:32:53.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=8, status=RESERVED, latency=41ms
2026-01-30T16:32:53.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:53.770+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:53.770+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/240/commit
2026-01-30T16:32:53.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 240
2026-01-30T16:32:53.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=240, latency=40ms
2026-01-30T16:32:53.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:53.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/29/commit
2026-01-30T16:32:53.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 29
2026-01-30T16:32:53.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=29, latency=16ms
2026-01-30T16:32:53.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:53.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/8/commit
2026-01-30T16:32:53.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 8
2026-01-30T16:32:53.866+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=8, latency=38ms
2026-01-30T16:32:53.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:53.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=280 ms | success=true
2026-01-30T16:32:53.901+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:53.901+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:53.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:53.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:54.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 241
2026-01-30T16:32:54.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=241, status=PREPARED, latency=131ms
2026-01-30T16:32:54.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:54.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:54.101+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 30
2026-01-30T16:32:54.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=30, status=PRE_AUTHORIZED, latency=54ms
2026-01-30T16:32:54.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:54.106+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:54.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 9
2026-01-30T16:32:54.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=9, status=RESERVED, latency=28ms
2026-01-30T16:32:54.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:54.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:54.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/241/commit
2026-01-30T16:32:54.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 241
2026-01-30T16:32:54.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=241, latency=16ms
2026-01-30T16:32:54.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:54.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/30/commit
2026-01-30T16:32:54.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 30
2026-01-30T16:32:54.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=30, latency=15ms
2026-01-30T16:32:54.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:54.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/9/commit
2026-01-30T16:32:54.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 9
2026-01-30T16:32:54.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=9, latency=16ms
2026-01-30T16:32:54.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:54.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=274 ms | success=true
2026-01-30T16:32:54.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:54.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:54.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:54.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:54.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 242
2026-01-30T16:32:54.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=242, status=PREPARED, latency=96ms
2026-01-30T16:32:54.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:54.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:54.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 31
2026-01-30T16:32:54.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=31, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:32:54.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:54.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:54.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 10
2026-01-30T16:32:54.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=10, status=RESERVED, latency=18ms
2026-01-30T16:32:54.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:54.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:54.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/242/commit
2026-01-30T16:32:54.359+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 242
2026-01-30T16:32:54.359+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=242, latency=21ms
2026-01-30T16:32:54.359+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:54.359+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/31/commit
2026-01-30T16:32:54.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 31
2026-01-30T16:32:54.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=31, latency=14ms
2026-01-30T16:32:54.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:54.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/10/commit
2026-01-30T16:32:54.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 10
2026-01-30T16:32:54.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=10, latency=11ms
2026-01-30T16:32:54.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:54.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=190 ms | success=true
2026-01-30T16:32:54.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:54.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:54.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:54.392+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:54.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 243
2026-01-30T16:32:54.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=243, status=PREPARED, latency=99ms
2026-01-30T16:32:54.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:54.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:54.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 32
2026-01-30T16:32:54.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=32, status=PRE_AUTHORIZED, latency=20ms
2026-01-30T16:32:54.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:54.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:54.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 11
2026-01-30T16:32:54.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=11, status=RESERVED, latency=23ms
2026-01-30T16:32:54.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:54.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:54.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/243/commit
2026-01-30T16:32:54.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 243
2026-01-30T16:32:54.543+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=243, latency=8ms
2026-01-30T16:32:54.543+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:54.543+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/32/commit
2026-01-30T16:32:54.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 32
2026-01-30T16:32:54.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=32, latency=13ms
2026-01-30T16:32:54.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:54.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/11/commit
2026-01-30T16:32:54.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 11
2026-01-30T16:32:54.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=11, latency=35ms
2026-01-30T16:32:54.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:54.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=201 ms | success=true
2026-01-30T16:32:54.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:54.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:54.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:54.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:54.738+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 244
2026-01-30T16:32:54.738+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=244, status=PREPARED, latency=130ms
2026-01-30T16:32:54.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:54.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:54.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 33
2026-01-30T16:32:54.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=33, status=PRE_AUTHORIZED, latency=7ms
2026-01-30T16:32:54.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:54.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:54.801+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 12
2026-01-30T16:32:54.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=12, status=RESERVED, latency=61ms
2026-01-30T16:32:54.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:54.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:54.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/244/commit
2026-01-30T16:32:54.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 244
2026-01-30T16:32:54.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=244, latency=8ms
2026-01-30T16:32:54.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:54.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/33/commit
2026-01-30T16:32:54.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 33
2026-01-30T16:32:54.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=33, latency=42ms
2026-01-30T16:32:54.858+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:54.858+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/12/commit
2026-01-30T16:32:54.910+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 12
2026-01-30T16:32:54.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=12, latency=54ms
2026-01-30T16:32:54.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:54.913+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=301 ms | success=true
2026-01-30T16:32:54.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:54.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:54.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:54.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:55.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 245
2026-01-30T16:32:55.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=245, status=PREPARED, latency=190ms
2026-01-30T16:32:55.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:55.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:55.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 34
2026-01-30T16:32:55.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=34, status=PRE_AUTHORIZED, latency=44ms
2026-01-30T16:32:55.165+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:55.165+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:55.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 13
2026-01-30T16:32:55.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=13, status=RESERVED, latency=73ms
2026-01-30T16:32:55.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:55.242+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:55.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/245/commit
2026-01-30T16:32:55.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 245
2026-01-30T16:32:55.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=245, latency=27ms
2026-01-30T16:32:55.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:55.273+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/34/commit
2026-01-30T16:32:55.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 34
2026-01-30T16:32:55.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=34, latency=38ms
2026-01-30T16:32:55.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:55.312+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/13/commit
2026-01-30T16:32:55.370+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 13
2026-01-30T16:32:55.371+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=13, latency=60ms
2026-01-30T16:32:55.377+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:55.377+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=449 ms | success=true
2026-01-30T16:32:55.395+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:55.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:55.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:55.399+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:55.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 246
2026-01-30T16:32:55.649+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=246, status=PREPARED, latency=251ms
2026-01-30T16:32:55.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:55.651+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:55.700+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 35
2026-01-30T16:32:55.700+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=35, status=PRE_AUTHORIZED, latency=50ms
2026-01-30T16:32:55.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:55.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:55.752+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 14
2026-01-30T16:32:55.752+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=14, status=RESERVED, latency=49ms
2026-01-30T16:32:55.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:55.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:55.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/246/commit
2026-01-30T16:32:55.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 246
2026-01-30T16:32:55.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=246, latency=23ms
2026-01-30T16:32:55.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:55.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/35/commit
2026-01-30T16:32:55.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 35
2026-01-30T16:32:55.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=35, latency=26ms
2026-01-30T16:32:55.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:55.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/14/commit
2026-01-30T16:32:55.830+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 14
2026-01-30T16:32:55.830+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=14, latency=26ms
2026-01-30T16:32:55.833+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:55.833+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=435 ms | success=true
2026-01-30T16:32:55.848+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:55.849+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:55.849+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:55.849+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:55.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 247
2026-01-30T16:32:55.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=247, status=PREPARED, latency=115ms
2026-01-30T16:32:55.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:55.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:55.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 36
2026-01-30T16:32:55.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=36, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:32:55.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:55.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:56.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 15
2026-01-30T16:32:56.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=15, status=RESERVED, latency=59ms
2026-01-30T16:32:56.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:56.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:56.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/247/commit
2026-01-30T16:32:56.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 247
2026-01-30T16:32:56.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=247, latency=35ms
2026-01-30T16:32:56.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:56.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/36/commit
2026-01-30T16:32:56.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 36
2026-01-30T16:32:56.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=36, latency=58ms
2026-01-30T16:32:56.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:56.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/15/commit
2026-01-30T16:32:56.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 15
2026-01-30T16:32:56.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=15, latency=33ms
2026-01-30T16:32:56.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:56.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=340 ms | success=true
2026-01-30T16:32:56.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:32:56.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:32:56.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:32:56.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:32:56.429+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 248
2026-01-30T16:32:56.429+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=248, status=PREPARED, latency=216ms
2026-01-30T16:32:56.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:32:56.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:32:56.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 37
2026-01-30T16:32:56.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=37, status=PRE_AUTHORIZED, latency=42ms
2026-01-30T16:32:56.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:32:56.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:32:56.550+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 16
2026-01-30T16:32:56.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=16, status=RESERVED, latency=77ms
2026-01-30T16:32:56.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:32:56.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:32:56.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/248/commit
2026-01-30T16:32:56.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 248
2026-01-30T16:32:56.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=248, latency=22ms
2026-01-30T16:32:56.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:32:56.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/37/commit
2026-01-30T16:32:56.595+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 37
2026-01-30T16:32:56.602+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=37, latency=28ms
2026-01-30T16:32:56.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:32:56.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/16/commit
2026-01-30T16:32:56.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 16
2026-01-30T16:32:56.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=16, latency=40ms
2026-01-30T16:32:56.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:32:56.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=429 ms | success=true
2026-01-30T16:32:58.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:58.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:58.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:58.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 249
2026-01-30T16:32:58.173+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 249
2026-01-30T16:32:58.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:58.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 38
2026-01-30T16:32:58.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 38 and transaction ID: TXN-00f6bb9d-04f7-49e5-93d6-6696b941a700
2026-01-30T16:32:58.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:58.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 17
2026-01-30T16:32:58.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 17
2026-01-30T16:32:58.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 249
2026-01-30T16:32:58.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=257 ms | success=true
2026-01-30T16:32:58.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:58.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:58.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:58.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 250
2026-01-30T16:32:58.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 250
2026-01-30T16:32:58.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:58.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 39
2026-01-30T16:32:58.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 39 and transaction ID: TXN-82e43a9c-c644-4273-940d-a3fd478dcefa
2026-01-30T16:32:58.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:58.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 18
2026-01-30T16:32:58.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 18
2026-01-30T16:32:58.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 250
2026-01-30T16:32:58.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=128 ms | success=true
2026-01-30T16:32:58.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:58.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:58.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:58.640+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 251
2026-01-30T16:32:58.640+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 251
2026-01-30T16:32:58.640+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:58.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 40
2026-01-30T16:32:58.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 40 and transaction ID: TXN-69a6d3b1-0f20-47cc-8d4f-e160989e4931
2026-01-30T16:32:58.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 19
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 19
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 251
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=273 ms | success=true
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:58.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 252
2026-01-30T16:32:58.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 252
2026-01-30T16:32:58.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:58.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 41
2026-01-30T16:32:58.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 41 and transaction ID: TXN-ec88e249-b481-4465-880e-3d6ff151d976
2026-01-30T16:32:58.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:58.883+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 20
2026-01-30T16:32:58.883+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 20
2026-01-30T16:32:58.883+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 252
2026-01-30T16:32:58.883+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=126 ms | success=true
2026-01-30T16:32:58.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:58.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:58.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:58.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 253
2026-01-30T16:32:58.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 253
2026-01-30T16:32:58.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:59.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 42
2026-01-30T16:32:59.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 42 and transaction ID: TXN-f7e45255-0cbf-4a8b-8444-80aa761d2e1a
2026-01-30T16:32:59.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:59.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 21
2026-01-30T16:32:59.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 21
2026-01-30T16:32:59.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 253
2026-01-30T16:32:59.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=132 ms | success=true
2026-01-30T16:32:59.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:59.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:59.055+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:59.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 254
2026-01-30T16:32:59.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 254
2026-01-30T16:32:59.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:59.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 43
2026-01-30T16:32:59.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 43 and transaction ID: TXN-4dc33315-9215-4dd4-a8fc-b386edbb14f9
2026-01-30T16:32:59.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:59.186+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 22
2026-01-30T16:32:59.186+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 22
2026-01-30T16:32:59.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 254
2026-01-30T16:32:59.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=133 ms | success=true
2026-01-30T16:32:59.194+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:59.194+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:59.194+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:59.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 255
2026-01-30T16:32:59.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 255
2026-01-30T16:32:59.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:59.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 44
2026-01-30T16:32:59.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 44 and transaction ID: TXN-2a022598-1a26-4c3c-8ccd-cdd0e7fb4301
2026-01-30T16:32:59.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:59.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 23
2026-01-30T16:32:59.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 23
2026-01-30T16:32:59.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 255
2026-01-30T16:32:59.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=168 ms | success=true
2026-01-30T16:32:59.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:59.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:59.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:59.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 256
2026-01-30T16:32:59.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 256
2026-01-30T16:32:59.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:59.497+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 45
2026-01-30T16:32:59.497+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 45 and transaction ID: TXN-47d3a5ff-41f8-478e-984e-df461f40d5c2
2026-01-30T16:32:59.497+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:59.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 24
2026-01-30T16:32:59.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 24
2026-01-30T16:32:59.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 256
2026-01-30T16:32:59.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=149 ms | success=true
2026-01-30T16:32:59.528+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:59.528+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:59.528+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:59.635+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 257
2026-01-30T16:32:59.635+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 257
2026-01-30T16:32:59.635+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:59.665+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 46
2026-01-30T16:32:59.665+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 46 and transaction ID: TXN-1781f060-3ca7-47ae-91cf-6c5ed676b86e
2026-01-30T16:32:59.665+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:59.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 25
2026-01-30T16:32:59.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 25
2026-01-30T16:32:59.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 257
2026-01-30T16:32:59.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=151 ms | success=true
2026-01-30T16:32:59.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:59.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:59.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:32:59.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 258
2026-01-30T16:32:59.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 258
2026-01-30T16:32:59.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:32:59.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 47
2026-01-30T16:32:59.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 47 and transaction ID: TXN-8c79dfc0-cf1e-45f7-b82b-b21bd43a181e
2026-01-30T16:32:59.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:32:59.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 26
2026-01-30T16:32:59.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 26
2026-01-30T16:32:59.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 258
2026-01-30T16:32:59.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=257 ms | success=true
2026-01-30T16:32:59.953+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:32:59.953+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:32:59.953+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:00.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 259
2026-01-30T16:33:00.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 259
2026-01-30T16:33:00.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:00.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 48
2026-01-30T16:33:00.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 48 and transaction ID: TXN-92bcd809-40e9-456f-92a9-78b1c0eed906
2026-01-30T16:33:00.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:00.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 27
2026-01-30T16:33:00.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 27
2026-01-30T16:33:00.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 259
2026-01-30T16:33:00.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=120 ms | success=true
2026-01-30T16:33:00.084+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:00.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:00.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:00.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 260
2026-01-30T16:33:00.165+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 260
2026-01-30T16:33:00.165+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:00.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 49
2026-01-30T16:33:00.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 49 and transaction ID: TXN-7df30595-2e58-4a3d-934c-0e55f48ecafc
2026-01-30T16:33:00.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:00.204+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 28
2026-01-30T16:33:00.204+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 28
2026-01-30T16:33:00.204+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 260
2026-01-30T16:33:00.204+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=118 ms | success=true
2026-01-30T16:33:00.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:00.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:00.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:00.312+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 261
2026-01-30T16:33:00.312+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 261
2026-01-30T16:33:00.313+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:00.333+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 50
2026-01-30T16:33:00.333+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 50 and transaction ID: TXN-d8927579-2584-4578-ba85-0c759c96ea01
2026-01-30T16:33:00.333+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:00.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 29
2026-01-30T16:33:00.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 29
2026-01-30T16:33:00.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 261
2026-01-30T16:33:00.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=139 ms | success=true
2026-01-30T16:33:00.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:00.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:00.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:00.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 262
2026-01-30T16:33:00.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 262
2026-01-30T16:33:00.476+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:00.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 51
2026-01-30T16:33:00.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 51 and transaction ID: TXN-b6cc0290-e1de-4031-96db-80316d728694
2026-01-30T16:33:00.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:00.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 30
2026-01-30T16:33:00.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 30
2026-01-30T16:33:00.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 262
2026-01-30T16:33:00.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=197 ms | success=true
2026-01-30T16:33:00.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:00.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:00.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:00.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 263
2026-01-30T16:33:00.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 263
2026-01-30T16:33:00.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:00.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 52
2026-01-30T16:33:00.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 52 and transaction ID: TXN-87ee5ac6-9653-4acd-99f1-495a61388615
2026-01-30T16:33:00.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:00.708+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:00.708647","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:00.708647","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:33:00.708+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:00.708647","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:00.708647","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:00.708647","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:33:00.724+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 52
2026-01-30T16:33:00.740+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 263
2026-01-30T16:33:00.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=198 ms | success=false
2026-01-30T16:33:00.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:00.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:00.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:00.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 264
2026-01-30T16:33:00.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 264
2026-01-30T16:33:00.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:00.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 53
2026-01-30T16:33:00.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 53 and transaction ID: TXN-9f1f0d98-3506-4bb8-94ab-29d1ce26c13a
2026-01-30T16:33:00.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:00.954+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 31
2026-01-30T16:33:00.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 31
2026-01-30T16:33:00.959+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 264
2026-01-30T16:33:00.959+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=185 ms | success=true
2026-01-30T16:33:00.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:00.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:00.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:01.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 265
2026-01-30T16:33:01.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 265
2026-01-30T16:33:01.104+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:01.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 54
2026-01-30T16:33:01.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 54 and transaction ID: TXN-fc269423-ffc7-4207-b948-fec93128c510
2026-01-30T16:33:01.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:01.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 32
2026-01-30T16:33:01.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 32
2026-01-30T16:33:01.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 265
2026-01-30T16:33:01.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=180 ms | success=true
2026-01-30T16:33:01.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:01.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:01.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:01.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 266
2026-01-30T16:33:01.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 266
2026-01-30T16:33:01.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:01.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 55
2026-01-30T16:33:01.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 55 and transaction ID: TXN-e85f926a-28a6-4750-a0a5-0d4aa0229487
2026-01-30T16:33:01.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:01.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 33
2026-01-30T16:33:01.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 33
2026-01-30T16:33:01.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 266
2026-01-30T16:33:01.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=132 ms | success=true
2026-01-30T16:33:01.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:01.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:01.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:01.392+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 267
2026-01-30T16:33:01.392+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 267
2026-01-30T16:33:01.392+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:01.408+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 56
2026-01-30T16:33:01.423+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 56 and transaction ID: TXN-19486ac8-8bde-4622-b1ba-3f4b2db520ba
2026-01-30T16:33:01.426+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:01.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 34
2026-01-30T16:33:01.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 34
2026-01-30T16:33:01.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 267
2026-01-30T16:33:01.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=146 ms | success=true
2026-01-30T16:33:01.447+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:33:01.448+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:33:01.448+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:33:01.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 268
2026-01-30T16:33:01.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 268
2026-01-30T16:33:01.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:33:01.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 57
2026-01-30T16:33:01.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 57 and transaction ID: TXN-34d5f1bc-c39d-4f30-bcd8-a372dd692704
2026-01-30T16:33:01.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:33:01.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 35
2026-01-30T16:33:01.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 35
2026-01-30T16:33:01.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 268
2026-01-30T16:33:01.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=228 ms | success=true
2026-01-30T16:33:01.680+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:01.680+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:01.680+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:01.680+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:01.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 269
2026-01-30T16:33:01.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=269, status=PREPARED, latency=104ms
2026-01-30T16:33:01.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:01.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:01.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 58
2026-01-30T16:33:01.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=58, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:33:01.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:01.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:01.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 36
2026-01-30T16:33:01.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=36, status=RESERVED, latency=31ms
2026-01-30T16:33:01.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:01.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:01.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/269/commit
2026-01-30T16:33:01.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 269
2026-01-30T16:33:01.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=269, latency=16ms
2026-01-30T16:33:01.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:01.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/58/commit
2026-01-30T16:33:01.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 58
2026-01-30T16:33:01.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=58, latency=16ms
2026-01-30T16:33:01.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:01.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/36/commit
2026-01-30T16:33:01.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 36
2026-01-30T16:33:01.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=36, latency=15ms
2026-01-30T16:33:01.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:01.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=221 ms | success=true
2026-01-30T16:33:01.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:01.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:01.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:01.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:02.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 270
2026-01-30T16:33:02.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=270, status=PREPARED, latency=103ms
2026-01-30T16:33:02.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:02.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:02.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 59
2026-01-30T16:33:02.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=59, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:33:02.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:02.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:02.106+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 37
2026-01-30T16:33:02.106+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=37, status=RESERVED, latency=63ms
2026-01-30T16:33:02.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:02.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:02.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/270/commit
2026-01-30T16:33:02.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 270
2026-01-30T16:33:02.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=270, latency=16ms
2026-01-30T16:33:02.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:02.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/59/commit
2026-01-30T16:33:02.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 59
2026-01-30T16:33:02.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=59, latency=62ms
2026-01-30T16:33:02.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:02.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/37/commit
2026-01-30T16:33:02.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 37
2026-01-30T16:33:02.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=37, latency=60ms
2026-01-30T16:33:02.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:02.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=363 ms | success=true
2026-01-30T16:33:02.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:02.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:02.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:02.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:02.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 271
2026-01-30T16:33:02.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=271, status=PREPARED, latency=132ms
2026-01-30T16:33:02.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:02.456+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:02.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 60
2026-01-30T16:33:02.497+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=60, status=PRE_AUTHORIZED, latency=42ms
2026-01-30T16:33:02.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:02.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:02.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 38
2026-01-30T16:33:02.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=38, status=RESERVED, latency=40ms
2026-01-30T16:33:02.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:02.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:02.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/271/commit
2026-01-30T16:33:02.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 271
2026-01-30T16:33:02.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=271, latency=22ms
2026-01-30T16:33:02.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:02.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/60/commit
2026-01-30T16:33:02.592+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 60
2026-01-30T16:33:02.592+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=60, latency=29ms
2026-01-30T16:33:02.592+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:02.592+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/38/commit
2026-01-30T16:33:02.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 38
2026-01-30T16:33:02.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=38, latency=20ms
2026-01-30T16:33:02.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:02.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=294 ms | success=true
2026-01-30T16:33:02.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:02.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:02.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:02.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:02.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 272
2026-01-30T16:33:02.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=272, status=PREPARED, latency=92ms
2026-01-30T16:33:02.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:02.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:02.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 61
2026-01-30T16:33:02.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=61, status=PRE_AUTHORIZED, latency=19ms
2026-01-30T16:33:02.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:02.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:02.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 39
2026-01-30T16:33:02.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=39, status=RESERVED, latency=31ms
2026-01-30T16:33:02.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:02.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:02.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/272/commit
2026-01-30T16:33:02.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 272
2026-01-30T16:33:02.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=272, latency=16ms
2026-01-30T16:33:02.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:02.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/61/commit
2026-01-30T16:33:02.799+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 61
2026-01-30T16:33:02.799+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=61, latency=23ms
2026-01-30T16:33:02.800+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:02.800+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/39/commit
2026-01-30T16:33:02.811+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 39
2026-01-30T16:33:02.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=39, latency=12ms
2026-01-30T16:33:02.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:02.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=194 ms | success=true
2026-01-30T16:33:02.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:02.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:02.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:02.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:02.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 273
2026-01-30T16:33:02.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=273, status=PREPARED, latency=91ms
2026-01-30T16:33:02.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:02.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:02.923+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 62
2026-01-30T16:33:02.923+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=62, status=PRE_AUTHORIZED, latency=18ms
2026-01-30T16:33:02.923+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:02.923+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:02.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 40
2026-01-30T16:33:02.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=40, status=RESERVED, latency=21ms
2026-01-30T16:33:02.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:02.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:02.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/273/commit
2026-01-30T16:33:02.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 273
2026-01-30T16:33:02.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=273, latency=2ms
2026-01-30T16:33:02.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:02.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/62/commit
2026-01-30T16:33:02.970+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 62
2026-01-30T16:33:02.970+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=62, latency=24ms
2026-01-30T16:33:02.970+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:02.971+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/40/commit
2026-01-30T16:33:02.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 40
2026-01-30T16:33:02.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=40, latency=17ms
2026-01-30T16:33:02.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:02.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=179 ms | success=true
2026-01-30T16:33:03.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:03.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:03.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:03.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:03.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 274
2026-01-30T16:33:03.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=274, status=PREPARED, latency=90ms
2026-01-30T16:33:03.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:03.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:03.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 63
2026-01-30T16:33:03.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=63, status=PRE_AUTHORIZED, latency=26ms
2026-01-30T16:33:03.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:03.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:03.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 41
2026-01-30T16:33:03.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=41, status=RESERVED, latency=20ms
2026-01-30T16:33:03.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:03.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:03.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/274/commit
2026-01-30T16:33:03.155+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 274
2026-01-30T16:33:03.155+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=274, latency=15ms
2026-01-30T16:33:03.155+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:03.155+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/63/commit
2026-01-30T16:33:03.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 63
2026-01-30T16:33:03.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=63, latency=16ms
2026-01-30T16:33:03.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:03.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/41/commit
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 41
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=41, latency=16ms
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=191 ms | success=true
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:03.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:03.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 275
2026-01-30T16:33:03.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=275, status=PREPARED, latency=106ms
2026-01-30T16:33:03.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:03.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:03.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 64
2026-01-30T16:33:03.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=64, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:33:03.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:03.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:03.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 42
2026-01-30T16:33:03.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=42, status=RESERVED, latency=94ms
2026-01-30T16:33:03.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:03.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:03.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/275/commit
2026-01-30T16:33:03.449+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 275
2026-01-30T16:33:03.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=275, latency=52ms
2026-01-30T16:33:03.456+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:03.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/64/commit
2026-01-30T16:33:03.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 64
2026-01-30T16:33:03.492+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=64, latency=36ms
2026-01-30T16:33:03.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:03.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/42/commit
2026-01-30T16:33:03.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 42
2026-01-30T16:33:03.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=42, latency=81ms
2026-01-30T16:33:03.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:03.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=377 ms | success=true
2026-01-30T16:33:03.613+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:03.621+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:03.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:03.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:03.743+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 276
2026-01-30T16:33:03.743+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=276, status=PREPARED, latency=120ms
2026-01-30T16:33:03.743+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:03.743+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:03.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 65
2026-01-30T16:33:03.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=65, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:33:03.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:03.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:03.790+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 43
2026-01-30T16:33:03.790+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=43, status=RESERVED, latency=16ms
2026-01-30T16:33:03.790+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:03.790+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:03.790+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/276/commit
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 276
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=276, latency=16ms
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/65/commit
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 65
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=65, latency=0ms
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:03.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/43/commit
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 43
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=43, latency=31ms
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=223 ms | success=true
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:03.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:03.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 277
2026-01-30T16:33:03.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=277, status=PREPARED, latency=98ms
2026-01-30T16:33:03.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:03.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:03.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 66
2026-01-30T16:33:03.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=66, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:33:03.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:03.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:03.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 44
2026-01-30T16:33:03.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=44, status=RESERVED, latency=15ms
2026-01-30T16:33:03.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:03.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:03.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/277/commit
2026-01-30T16:33:03.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 277
2026-01-30T16:33:03.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=277, latency=32ms
2026-01-30T16:33:03.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:03.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/66/commit
2026-01-30T16:33:04.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 66
2026-01-30T16:33:04.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=66, latency=16ms
2026-01-30T16:33:04.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:04.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/44/commit
2026-01-30T16:33:04.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 44
2026-01-30T16:33:04.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=44, latency=15ms
2026-01-30T16:33:04.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:04.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=187 ms | success=true
2026-01-30T16:33:04.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:04.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:04.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:04.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:04.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 278
2026-01-30T16:33:04.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=278, status=PREPARED, latency=75ms
2026-01-30T16:33:04.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:04.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:04.150+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 67
2026-01-30T16:33:04.150+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=67, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:33:04.150+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:04.150+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 45
2026-01-30T16:33:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=45, status=RESERVED, latency=16ms
2026-01-30T16:33:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/278/commit
2026-01-30T16:33:04.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 278
2026-01-30T16:33:04.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=278, latency=31ms
2026-01-30T16:33:04.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:04.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/67/commit
2026-01-30T16:33:04.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 67
2026-01-30T16:33:04.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=67, latency=16ms
2026-01-30T16:33:04.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:04.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/45/commit
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 45
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=45, latency=16ms
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=192 ms | success=true
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:04.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:04.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 279
2026-01-30T16:33:04.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=279, status=PREPARED, latency=114ms
2026-01-30T16:33:04.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:04.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:04.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 68
2026-01-30T16:33:04.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=68, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:33:04.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:04.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:04.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 46
2026-01-30T16:33:04.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=46, status=RESERVED, latency=31ms
2026-01-30T16:33:04.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:04.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:04.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/279/commit
2026-01-30T16:33:04.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 279
2026-01-30T16:33:04.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=279, latency=16ms
2026-01-30T16:33:04.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:04.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/68/commit
2026-01-30T16:33:04.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 68
2026-01-30T16:33:04.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=68, latency=16ms
2026-01-30T16:33:04.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:04.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/46/commit
2026-01-30T16:33:04.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 46
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=46, latency=26ms
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=220 ms | success=true
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:04.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:04.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 280
2026-01-30T16:33:04.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=280, status=PREPARED, latency=147ms
2026-01-30T16:33:04.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:04.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:04.656+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:33:04.6569199","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:33:04.6569199","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:33:04.672+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:33:04.6569199","path":"/api/payments/prepare"}"
2026-01-30T16:33:04.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/280/abort
2026-01-30T16:33:04.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 280
2026-01-30T16:33:04.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 1 compensations
2026-01-30T16:33:04.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=259 ms | success=false
2026-01-30T16:33:04.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:04.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:04.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:04.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:04.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 281
2026-01-30T16:33:04.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=281, status=PREPARED, latency=172ms
2026-01-30T16:33:04.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:04.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:04.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 69
2026-01-30T16:33:04.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=69, status=PRE_AUTHORIZED, latency=30ms
2026-01-30T16:33:04.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:04.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:04.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 47
2026-01-30T16:33:04.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=47, status=RESERVED, latency=50ms
2026-01-30T16:33:04.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:04.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:04.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/281/commit
2026-01-30T16:33:05.016+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 281
2026-01-30T16:33:05.016+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=281, latency=26ms
2026-01-30T16:33:05.016+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:05.016+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/69/commit
2026-01-30T16:33:05.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 69
2026-01-30T16:33:05.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=69, latency=22ms
2026-01-30T16:33:05.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:05.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/47/commit
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 47
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=47, latency=24ms
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=320 ms | success=true
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:05.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:05.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 282
2026-01-30T16:33:05.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=282, status=PREPARED, latency=100ms
2026-01-30T16:33:05.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:05.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:05.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 70
2026-01-30T16:33:05.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=70, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:33:05.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:05.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:05.193+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:05.1932786","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:05.1932786","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:33:05.193+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:33:05.1932786","path":"/api/shipments/prepare"}"
2026-01-30T16:33:05.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/70/abort
2026-01-30T16:33:05.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 70
2026-01-30T16:33:05.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/282/abort
2026-01-30T16:33:05.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 282
2026-01-30T16:33:05.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 2 compensations
2026-01-30T16:33:05.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=174 ms | success=false
2026-01-30T16:33:05.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:05.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:05.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:05.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:05.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 283
2026-01-30T16:33:05.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=283, status=PREPARED, latency=98ms
2026-01-30T16:33:05.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:05.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:05.371+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 71
2026-01-30T16:33:05.371+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=71, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:33:05.371+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:05.386+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 48
2026-01-30T16:33:05.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=48, status=RESERVED, latency=16ms
2026-01-30T16:33:05.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:05.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:05.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/283/commit
2026-01-30T16:33:05.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 283
2026-01-30T16:33:05.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=283, latency=16ms
2026-01-30T16:33:05.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:05.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/71/commit
2026-01-30T16:33:05.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 71
2026-01-30T16:33:05.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=71, latency=15ms
2026-01-30T16:33:05.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:05.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/48/commit
2026-01-30T16:33:05.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 48
2026-01-30T16:33:05.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=48, latency=16ms
2026-01-30T16:33:05.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:05.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=187 ms | success=true
2026-01-30T16:33:05.449+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:05.449+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:05.449+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:05.449+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:05.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 284
2026-01-30T16:33:05.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=284, status=PREPARED, latency=109ms
2026-01-30T16:33:05.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:05.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:05.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 72
2026-01-30T16:33:05.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=72, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:33:05.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:05.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:05.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 49
2026-01-30T16:33:05.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=49, status=RESERVED, latency=16ms
2026-01-30T16:33:05.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:05.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:05.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/284/commit
2026-01-30T16:33:05.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 284
2026-01-30T16:33:05.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=284, latency=31ms
2026-01-30T16:33:05.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:05.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/72/commit
2026-01-30T16:33:05.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 72
2026-01-30T16:33:05.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=72, latency=16ms
2026-01-30T16:33:05.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:05.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/49/commit
2026-01-30T16:33:05.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 49
2026-01-30T16:33:05.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=49, latency=15ms
2026-01-30T16:33:05.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:05.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=226 ms | success=true
2026-01-30T16:33:05.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:05.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:05.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:05.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:05.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 285
2026-01-30T16:33:05.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=285, status=PREPARED, latency=177ms
2026-01-30T16:33:05.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:05.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:05.919+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 73
2026-01-30T16:33:05.919+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=73, status=PRE_AUTHORIZED, latency=59ms
2026-01-30T16:33:05.919+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:05.919+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:05.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 50
2026-01-30T16:33:05.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=50, status=RESERVED, latency=16ms
2026-01-30T16:33:05.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:05.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:05.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/285/commit
2026-01-30T16:33:05.950+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 285
2026-01-30T16:33:05.950+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=285, latency=15ms
2026-01-30T16:33:05.950+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:05.950+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/73/commit
2026-01-30T16:33:05.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 73
2026-01-30T16:33:05.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=73, latency=46ms
2026-01-30T16:33:05.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:05.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/50/commit
2026-01-30T16:33:06.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 50
2026-01-30T16:33:06.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=50, latency=31ms
2026-01-30T16:33:06.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:06.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=335 ms | success=true
2026-01-30T16:33:06.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:06.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:06.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:06.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:06.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 286
2026-01-30T16:33:06.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=286, status=PREPARED, latency=94ms
2026-01-30T16:33:06.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:06.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:06.169+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 74
2026-01-30T16:33:06.169+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=74, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T16:33:06.169+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:06.169+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:06.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 51
2026-01-30T16:33:06.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=51, status=RESERVED, latency=15ms
2026-01-30T16:33:06.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:06.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:06.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/286/commit
2026-01-30T16:33:06.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 286
2026-01-30T16:33:06.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=286, latency=32ms
2026-01-30T16:33:06.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:06.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/74/commit
2026-01-30T16:33:06.231+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 74
2026-01-30T16:33:06.231+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=74, latency=15ms
2026-01-30T16:33:06.231+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:06.231+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/51/commit
2026-01-30T16:33:06.256+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 51
2026-01-30T16:33:06.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=51, latency=26ms
2026-01-30T16:33:06.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:06.258+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=207 ms | success=true
2026-01-30T16:33:06.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:06.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:06.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:06.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:06.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 287
2026-01-30T16:33:06.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=287, status=PREPARED, latency=124ms
2026-01-30T16:33:06.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:06.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:06.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 75
2026-01-30T16:33:06.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=75, status=PRE_AUTHORIZED, latency=41ms
2026-01-30T16:33:06.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:33:06.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:33:06.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 52
2026-01-30T16:33:06.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=52, status=RESERVED, latency=23ms
2026-01-30T16:33:06.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:33:06.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:33:06.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/287/commit
2026-01-30T16:33:06.479+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 287
2026-01-30T16:33:06.479+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=287, latency=16ms
2026-01-30T16:33:06.479+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:33:06.479+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/75/commit
2026-01-30T16:33:06.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 75
2026-01-30T16:33:06.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=75, latency=16ms
2026-01-30T16:33:06.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:33:06.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/52/commit
2026-01-30T16:33:06.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 52
2026-01-30T16:33:06.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=52, latency=16ms
2026-01-30T16:33:06.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:33:06.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=244 ms | success=true
2026-01-30T16:33:06.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:33:06.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:33:06.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:33:06.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:33:06.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 288
2026-01-30T16:33:06.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=288, status=PREPARED, latency=100ms
2026-01-30T16:33:06.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:33:06.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:33:06.641+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:33:06.6419367","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:33:06.6419367","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:33:06.641+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:33:06.6419367","path":"/api/payments/prepare"}"
2026-01-30T16:33:06.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/288/abort
2026-01-30T16:33:06.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 288
2026-01-30T16:33:06.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 32 ms with 1 compensations
2026-01-30T16:33:06.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=158 ms | success=false
2026-01-30T16:34:48.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:48.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:48.105+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:48.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 289
2026-01-30T16:34:48.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 289
2026-01-30T16:34:48.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:48.635+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 76
2026-01-30T16:34:48.635+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 76 and transaction ID: TXN-1b9524af-3f82-460d-8d7c-b72382c4b9e4
2026-01-30T16:34:48.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:49.024+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 53
2026-01-30T16:34:49.024+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 53
2026-01-30T16:34:49.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 289
2026-01-30T16:34:49.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=923 ms | success=true
2026-01-30T16:34:49.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:49.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:49.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:49.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 290
2026-01-30T16:34:49.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 290
2026-01-30T16:34:49.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:49.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 77
2026-01-30T16:34:49.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 77 and transaction ID: TXN-fb91738c-4040-4f92-9ec0-3cb13b0fff17
2026-01-30T16:34:49.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:49.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 54
2026-01-30T16:34:49.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 54
2026-01-30T16:34:49.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 290
2026-01-30T16:34:49.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=193 ms | success=true
2026-01-30T16:34:49.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:49.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:49.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:49.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 291
2026-01-30T16:34:49.824+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 291
2026-01-30T16:34:49.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:49.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 78
2026-01-30T16:34:49.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 78 and transaction ID: TXN-72315308-2794-4ad4-9cca-0767fc03a94a
2026-01-30T16:34:49.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:49.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 55
2026-01-30T16:34:49.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 55
2026-01-30T16:34:49.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 291
2026-01-30T16:34:49.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=692 ms | success=true
2026-01-30T16:34:49.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:49.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:49.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:50.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 292
2026-01-30T16:34:50.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 292
2026-01-30T16:34:50.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:50.138+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:50.1232838","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:50.1232838","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:34:50.138+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:50.1232838","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:50.1232838","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:50.1232838","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:34:50.138+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 292
2026-01-30T16:34:50.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=224 ms | success=false
2026-01-30T16:34:50.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:50.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:50.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:50.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 293
2026-01-30T16:34:50.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 293
2026-01-30T16:34:50.286+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:50.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 79
2026-01-30T16:34:50.333+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 79 and transaction ID: TXN-731683de-f27f-4bc7-b313-56601eaf6831
2026-01-30T16:34:50.335+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:50.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 56
2026-01-30T16:34:50.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 56
2026-01-30T16:34:50.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 293
2026-01-30T16:34:50.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=170 ms | success=true
2026-01-30T16:34:50.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:50.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:50.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:50.452+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 294
2026-01-30T16:34:50.452+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 294
2026-01-30T16:34:50.452+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:50.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 80
2026-01-30T16:34:50.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 80 and transaction ID: TXN-5707bf9c-4301-4418-b4e8-9475a094dce3
2026-01-30T16:34:50.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:50.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 57
2026-01-30T16:34:50.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 57
2026-01-30T16:34:50.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 294
2026-01-30T16:34:50.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=139 ms | success=true
2026-01-30T16:34:50.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:50.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:50.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:50.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 295
2026-01-30T16:34:50.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 295
2026-01-30T16:34:50.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:50.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 81
2026-01-30T16:34:50.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 81 and transaction ID: TXN-1b30e23c-f169-40ae-b33b-c3e6510b08ee
2026-01-30T16:34:50.658+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:50.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 58
2026-01-30T16:34:50.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 58
2026-01-30T16:34:50.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 295
2026-01-30T16:34:50.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=380 ms | success=true
2026-01-30T16:34:50.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:50.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:50.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:51.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 296
2026-01-30T16:34:51.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 296
2026-01-30T16:34:51.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:51.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 82
2026-01-30T16:34:51.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 82 and transaction ID: TXN-6e6ff180-afea-4478-808c-428cfc0d6119
2026-01-30T16:34:51.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:51.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 59
2026-01-30T16:34:51.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 59
2026-01-30T16:34:51.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 296
2026-01-30T16:34:51.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=153 ms | success=true
2026-01-30T16:34:51.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:51.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:51.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:51.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 297
2026-01-30T16:34:51.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 297
2026-01-30T16:34:51.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:51.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 83
2026-01-30T16:34:51.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 83 and transaction ID: TXN-f14b85fa-c2e3-489e-aaa7-0174ff69f8e7
2026-01-30T16:34:51.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:51.221+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 60
2026-01-30T16:34:51.221+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 60
2026-01-30T16:34:51.221+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 297
2026-01-30T16:34:51.221+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=162 ms | success=true
2026-01-30T16:34:51.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:51.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:51.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:51.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 298
2026-01-30T16:34:51.407+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 298
2026-01-30T16:34:51.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:51.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 84
2026-01-30T16:34:51.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 84 and transaction ID: TXN-0c826481-d23a-4982-bae9-71c461740548
2026-01-30T16:34:51.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 61
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 61
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 298
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=263 ms | success=true
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:51.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:51.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 299
2026-01-30T16:34:51.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 299
2026-01-30T16:34:51.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:51.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 85
2026-01-30T16:34:51.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 85 and transaction ID: TXN-9b22079c-fbbd-427f-a211-d1ed17f2b02e
2026-01-30T16:34:51.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:51.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 62
2026-01-30T16:34:51.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 62
2026-01-30T16:34:51.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 299
2026-01-30T16:34:51.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=176 ms | success=true
2026-01-30T16:34:51.688+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:51.696+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:51.696+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:51.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 300
2026-01-30T16:34:51.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 300
2026-01-30T16:34:51.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:51.811+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 86
2026-01-30T16:34:51.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 86 and transaction ID: TXN-90a6aa5d-d52c-4392-8b92-c3c99ef4abb6
2026-01-30T16:34:51.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:51.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 63
2026-01-30T16:34:51.845+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 63
2026-01-30T16:34:51.845+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 300
2026-01-30T16:34:51.845+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=149 ms | success=true
2026-01-30T16:34:51.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:51.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:51.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:52.018+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 301
2026-01-30T16:34:52.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 301
2026-01-30T16:34:52.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:52.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 87
2026-01-30T16:34:52.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 87 and transaction ID: TXN-5cd8f9dc-c8ca-4894-9e29-d4840d45c19c
2026-01-30T16:34:52.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:52.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 64
2026-01-30T16:34:52.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 64
2026-01-30T16:34:52.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 301
2026-01-30T16:34:52.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=193 ms | success=true
2026-01-30T16:34:52.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:52.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:52.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:52.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 302
2026-01-30T16:34:52.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 302
2026-01-30T16:34:52.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:52.264+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 88
2026-01-30T16:34:52.264+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 88 and transaction ID: TXN-8ca361c5-4cac-4579-a907-515d867a5dbc
2026-01-30T16:34:52.264+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:52.313+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 65
2026-01-30T16:34:52.313+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 65
2026-01-30T16:34:52.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 302
2026-01-30T16:34:52.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=220 ms | success=true
2026-01-30T16:34:52.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:52.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:52.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:52.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 303
2026-01-30T16:34:52.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 303
2026-01-30T16:34:52.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:52.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 89
2026-01-30T16:34:52.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 89 and transaction ID: TXN-f1ecf0a5-3292-41ef-9741-a876a1e64682
2026-01-30T16:34:52.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:52.475+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:34:52.4757747","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:34:52.4757747","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:34:52.475+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:34:52.4757747","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:34:52.4757747","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:34:52.4757747","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:34:52.475+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 89
2026-01-30T16:34:52.491+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 303
2026-01-30T16:34:52.507+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=183 ms | success=false
2026-01-30T16:34:52.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:52.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:52.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:52.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 304
2026-01-30T16:34:52.642+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 304
2026-01-30T16:34:52.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:52.682+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 90
2026-01-30T16:34:52.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 90 and transaction ID: TXN-7c8903c9-bde7-45dd-ac7e-4aebb865dfbd
2026-01-30T16:34:52.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:52.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 66
2026-01-30T16:34:52.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 66
2026-01-30T16:34:52.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 304
2026-01-30T16:34:52.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=194 ms | success=true
2026-01-30T16:34:52.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:52.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:52.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:52.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 305
2026-01-30T16:34:52.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 305
2026-01-30T16:34:52.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:52.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 91
2026-01-30T16:34:52.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 91 and transaction ID: TXN-81bd47e1-d949-4d70-8093-dc875b0b91c8
2026-01-30T16:34:52.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:52.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 67
2026-01-30T16:34:52.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 67
2026-01-30T16:34:52.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 305
2026-01-30T16:34:52.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=177 ms | success=true
2026-01-30T16:34:52.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:52.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:52.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:53.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 306
2026-01-30T16:34:53.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 306
2026-01-30T16:34:53.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:53.099+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 92
2026-01-30T16:34:53.099+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 92 and transaction ID: TXN-19343b86-bd83-42bc-ac35-e6353bdd2c47
2026-01-30T16:34:53.099+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:53.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 68
2026-01-30T16:34:53.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 68
2026-01-30T16:34:53.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 306
2026-01-30T16:34:53.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=240 ms | success=true
2026-01-30T16:34:53.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:53.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:53.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:53.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 307
2026-01-30T16:34:53.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 307
2026-01-30T16:34:53.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:53.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 93
2026-01-30T16:34:53.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 93 and transaction ID: TXN-c0b2ac63-6e54-4cdc-8fe9-efa164f009f4
2026-01-30T16:34:53.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:53.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 69
2026-01-30T16:34:53.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 69
2026-01-30T16:34:53.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 307
2026-01-30T16:34:53.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=156 ms | success=true
2026-01-30T16:34:53.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:34:53.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:34:53.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:34:53.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 308
2026-01-30T16:34:53.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 308
2026-01-30T16:34:53.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:34:53.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 94
2026-01-30T16:34:53.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 94 and transaction ID: TXN-695969fd-debd-41af-8b76-de2305a15a05
2026-01-30T16:34:53.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:34:53.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 70
2026-01-30T16:34:53.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 70
2026-01-30T16:34:53.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 308
2026-01-30T16:34:53.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=271 ms | success=true
2026-01-30T16:34:53.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:53.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:53.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:53.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:53.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 309
2026-01-30T16:34:53.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=309, status=PREPARED, latency=92ms
2026-01-30T16:34:53.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:53.698+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:53.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 95
2026-01-30T16:34:53.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=95, status=PRE_AUTHORIZED, latency=12ms
2026-01-30T16:34:53.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:53.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:53.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 71
2026-01-30T16:34:53.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=71, status=RESERVED, latency=47ms
2026-01-30T16:34:53.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:53.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:53.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/309/commit
2026-01-30T16:34:53.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 309
2026-01-30T16:34:53.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=309, latency=16ms
2026-01-30T16:34:53.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:53.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/95/commit
2026-01-30T16:34:53.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 95
2026-01-30T16:34:53.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=95, latency=15ms
2026-01-30T16:34:53.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:53.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/71/commit
2026-01-30T16:34:53.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 71
2026-01-30T16:34:53.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=71, latency=16ms
2026-01-30T16:34:53.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:53.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=213 ms | success=true
2026-01-30T16:34:53.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:53.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:53.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:53.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:53.918+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 310
2026-01-30T16:34:53.918+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=310, status=PREPARED, latency=99ms
2026-01-30T16:34:53.918+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:53.918+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:53.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 96
2026-01-30T16:34:53.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=96, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:34:53.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:53.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:53.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 72
2026-01-30T16:34:53.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=72, status=RESERVED, latency=48ms
2026-01-30T16:34:53.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:53.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:53.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/310/commit
2026-01-30T16:34:53.997+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 310
2026-01-30T16:34:53.997+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=310, latency=15ms
2026-01-30T16:34:53.997+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:53.997+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/96/commit
2026-01-30T16:34:54.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 96
2026-01-30T16:34:54.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=96, latency=25ms
2026-01-30T16:34:54.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:54.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/72/commit
2026-01-30T16:34:54.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 72
2026-01-30T16:34:54.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=72, latency=15ms
2026-01-30T16:34:54.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:54.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=214 ms | success=true
2026-01-30T16:34:54.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:54.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:54.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:54.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:54.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 311
2026-01-30T16:34:54.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=311, status=PREPARED, latency=121ms
2026-01-30T16:34:54.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:54.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:54.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 97
2026-01-30T16:34:54.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=97, status=PRE_AUTHORIZED, latency=39ms
2026-01-30T16:34:54.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:54.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:54.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 73
2026-01-30T16:34:54.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=73, status=RESERVED, latency=91ms
2026-01-30T16:34:54.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:54.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:54.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/311/commit
2026-01-30T16:34:54.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 311
2026-01-30T16:34:54.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=311, latency=16ms
2026-01-30T16:34:54.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:54.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/97/commit
2026-01-30T16:34:54.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 97
2026-01-30T16:34:54.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=97, latency=15ms
2026-01-30T16:34:54.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:54.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/73/commit
2026-01-30T16:34:54.393+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 73
2026-01-30T16:34:54.393+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=73, latency=63ms
2026-01-30T16:34:54.393+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:54.393+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=351 ms | success=true
2026-01-30T16:34:54.393+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:54.393+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:54.408+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:54.408+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:54.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 312
2026-01-30T16:34:54.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=312, status=PREPARED, latency=144ms
2026-01-30T16:34:54.553+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:54.553+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:54.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 98
2026-01-30T16:34:54.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=98, status=PRE_AUTHORIZED, latency=40ms
2026-01-30T16:34:54.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:54.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:54.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 74
2026-01-30T16:34:54.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=74, status=RESERVED, latency=85ms
2026-01-30T16:34:54.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:54.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:54.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/312/commit
2026-01-30T16:34:54.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 312
2026-01-30T16:34:54.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=312, latency=56ms
2026-01-30T16:34:54.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:54.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/98/commit
2026-01-30T16:34:54.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 98
2026-01-30T16:34:54.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=98, latency=32ms
2026-01-30T16:34:54.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:54.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/74/commit
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 74
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=74, latency=15ms
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=379 ms | success=true
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:54.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:54.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 313
2026-01-30T16:34:54.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=313, status=PREPARED, latency=103ms
2026-01-30T16:34:54.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:54.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:54.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 99
2026-01-30T16:34:54.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=99, status=PRE_AUTHORIZED, latency=49ms
2026-01-30T16:34:54.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:54.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:54.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 75
2026-01-30T16:34:54.983+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=75, status=RESERVED, latency=50ms
2026-01-30T16:34:54.983+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:54.983+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:54.983+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/313/commit
2026-01-30T16:34:55.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 313
2026-01-30T16:34:55.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=313, latency=22ms
2026-01-30T16:34:55.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:55.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/99/commit
2026-01-30T16:34:55.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 99
2026-01-30T16:34:55.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=99, latency=10ms
2026-01-30T16:34:55.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:55.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/75/commit
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 75
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=75, latency=5ms
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=233 ms | success=true
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:55.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:55.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 314
2026-01-30T16:34:55.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=314, status=PREPARED, latency=118ms
2026-01-30T16:34:55.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:55.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:55.175+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 100
2026-01-30T16:34:55.175+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=100, status=PRE_AUTHORIZED, latency=37ms
2026-01-30T16:34:55.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:55.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:55.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 76
2026-01-30T16:34:55.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=76, status=RESERVED, latency=37ms
2026-01-30T16:34:55.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:55.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:55.216+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/314/commit
2026-01-30T16:34:55.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 314
2026-01-30T16:34:55.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=314, latency=25ms
2026-01-30T16:34:55.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:55.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/100/commit
2026-01-30T16:34:55.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 100
2026-01-30T16:34:55.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=100, latency=30ms
2026-01-30T16:34:55.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:55.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/76/commit
2026-01-30T16:34:55.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 76
2026-01-30T16:34:55.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=76, latency=20ms
2026-01-30T16:34:55.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:55.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=259 ms | success=true
2026-01-30T16:34:55.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:55.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:55.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:55.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:55.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 315
2026-01-30T16:34:55.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=315, status=PREPARED, latency=102ms
2026-01-30T16:34:55.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:55.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:55.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 101
2026-01-30T16:34:55.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=101, status=PRE_AUTHORIZED, latency=94ms
2026-01-30T16:34:55.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:55.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:55.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 77
2026-01-30T16:34:55.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=77, status=RESERVED, latency=62ms
2026-01-30T16:34:55.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:55.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:55.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/315/commit
2026-01-30T16:34:55.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 315
2026-01-30T16:34:55.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=315, latency=16ms
2026-01-30T16:34:55.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:55.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/101/commit
2026-01-30T16:34:55.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 101
2026-01-30T16:34:55.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=101, latency=16ms
2026-01-30T16:34:55.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:55.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/77/commit
2026-01-30T16:34:55.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 77
2026-01-30T16:34:55.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=77, latency=15ms
2026-01-30T16:34:55.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:55.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=312 ms | success=true
2026-01-30T16:34:55.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:55.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:55.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:55.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:55.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 316
2026-01-30T16:34:55.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=316, status=PREPARED, latency=89ms
2026-01-30T16:34:55.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:55.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:55.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 102
2026-01-30T16:34:55.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=102, status=PRE_AUTHORIZED, latency=93ms
2026-01-30T16:34:55.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:55.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:55.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 78
2026-01-30T16:34:55.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=78, status=RESERVED, latency=47ms
2026-01-30T16:34:55.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:55.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:55.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/316/commit
2026-01-30T16:34:55.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 316
2026-01-30T16:34:55.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=316, latency=52ms
2026-01-30T16:34:55.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:55.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/102/commit
2026-01-30T16:34:55.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 102
2026-01-30T16:34:55.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=102, latency=20ms
2026-01-30T16:34:55.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:55.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/78/commit
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 78
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=78, latency=15ms
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=323 ms | success=true
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:55.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:56.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 317
2026-01-30T16:34:56.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=317, status=PREPARED, latency=118ms
2026-01-30T16:34:56.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:56.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:56.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 103
2026-01-30T16:34:56.171+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=103, status=PRE_AUTHORIZED, latency=81ms
2026-01-30T16:34:56.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:56.173+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:56.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 79
2026-01-30T16:34:56.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=79, status=RESERVED, latency=35ms
2026-01-30T16:34:56.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:56.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:56.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/317/commit
2026-01-30T16:34:56.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 317
2026-01-30T16:34:56.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=317, latency=16ms
2026-01-30T16:34:56.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:56.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/103/commit
2026-01-30T16:34:56.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 103
2026-01-30T16:34:56.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=103, latency=10ms
2026-01-30T16:34:56.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:56.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/79/commit
2026-01-30T16:34:56.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 79
2026-01-30T16:34:56.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=79, latency=20ms
2026-01-30T16:34:56.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:56.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=276 ms | success=true
2026-01-30T16:34:56.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:56.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:56.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:56.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:56.368+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 318
2026-01-30T16:34:56.368+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=318, status=PREPARED, latency=100ms
2026-01-30T16:34:56.368+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:56.368+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:56.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 104
2026-01-30T16:34:56.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=104, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T16:34:56.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:56.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:56.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 80
2026-01-30T16:34:56.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=80, status=RESERVED, latency=15ms
2026-01-30T16:34:56.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:56.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:56.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/318/commit
2026-01-30T16:34:56.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 318
2026-01-30T16:34:56.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=318, latency=16ms
2026-01-30T16:34:56.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:56.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/104/commit
2026-01-30T16:34:56.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 104
2026-01-30T16:34:56.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=104, latency=47ms
2026-01-30T16:34:56.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:56.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/80/commit
2026-01-30T16:34:56.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 80
2026-01-30T16:34:56.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=80, latency=16ms
2026-01-30T16:34:56.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:56.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=234 ms | success=true
2026-01-30T16:34:56.509+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:56.509+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:56.509+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:56.509+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:56.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 319
2026-01-30T16:34:56.620+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=319, status=PREPARED, latency=111ms
2026-01-30T16:34:56.630+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:56.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 105
2026-01-30T16:34:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=105, status=PRE_AUTHORIZED, latency=54ms
2026-01-30T16:34:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:56.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:56.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 81
2026-01-30T16:34:56.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=81, status=RESERVED, latency=67ms
2026-01-30T16:34:56.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:56.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:56.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/319/commit
2026-01-30T16:34:56.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 319
2026-01-30T16:34:56.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=319, latency=16ms
2026-01-30T16:34:56.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:56.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/105/commit
2026-01-30T16:34:56.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 105
2026-01-30T16:34:56.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=105, latency=16ms
2026-01-30T16:34:56.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:56.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/81/commit
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 81
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=81, latency=15ms
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=294 ms | success=true
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:56.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:56.901+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 320
2026-01-30T16:34:56.901+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=320, status=PREPARED, latency=103ms
2026-01-30T16:34:56.901+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:56.901+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:56.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 106
2026-01-30T16:34:56.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=106, status=PRE_AUTHORIZED, latency=85ms
2026-01-30T16:34:56.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:56.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:57.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 82
2026-01-30T16:34:57.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=82, status=RESERVED, latency=33ms
2026-01-30T16:34:57.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:57.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:57.019+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/320/commit
2026-01-30T16:34:57.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 320
2026-01-30T16:34:57.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=320, latency=31ms
2026-01-30T16:34:57.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:57.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/106/commit
2026-01-30T16:34:57.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 106
2026-01-30T16:34:57.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=106, latency=16ms
2026-01-30T16:34:57.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:57.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/82/commit
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 82
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=82, latency=15ms
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=276 ms | success=true
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:57.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:57.204+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 321
2026-01-30T16:34:57.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=321, status=PREPARED, latency=124ms
2026-01-30T16:34:57.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:57.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:57.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 107
2026-01-30T16:34:57.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=107, status=PRE_AUTHORIZED, latency=34ms
2026-01-30T16:34:57.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:57.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:57.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 83
2026-01-30T16:34:57.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=83, status=RESERVED, latency=42ms
2026-01-30T16:34:57.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:57.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:57.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/321/commit
2026-01-30T16:34:57.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 321
2026-01-30T16:34:57.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=321, latency=20ms
2026-01-30T16:34:57.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:57.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/107/commit
2026-01-30T16:34:57.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 107
2026-01-30T16:34:57.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=107, latency=27ms
2026-01-30T16:34:57.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:57.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/83/commit
2026-01-30T16:34:57.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 83
2026-01-30T16:34:57.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=83, latency=18ms
2026-01-30T16:34:57.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:57.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=256 ms | success=true
2026-01-30T16:34:57.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:57.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:57.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:57.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:57.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 322
2026-01-30T16:34:57.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=322, status=PREPARED, latency=90ms
2026-01-30T16:34:57.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:57.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:57.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 108
2026-01-30T16:34:57.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=108, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:34:57.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:57.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:57.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 84
2026-01-30T16:34:57.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=84, status=RESERVED, latency=31ms
2026-01-30T16:34:57.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:57.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:57.513+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/322/commit
2026-01-30T16:34:57.529+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 322
2026-01-30T16:34:57.529+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=322, latency=16ms
2026-01-30T16:34:57.529+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:57.529+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/108/commit
2026-01-30T16:34:57.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 108
2026-01-30T16:34:57.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=108, latency=16ms
2026-01-30T16:34:57.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:57.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/84/commit
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 84
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=84, latency=46ms
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=232 ms | success=true
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:57.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:57.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 323
2026-01-30T16:34:57.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=323, status=PREPARED, latency=112ms
2026-01-30T16:34:57.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:57.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:57.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 109
2026-01-30T16:34:57.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=109, status=PRE_AUTHORIZED, latency=21ms
2026-01-30T16:34:57.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:57.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:57.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 85
2026-01-30T16:34:57.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=85, status=RESERVED, latency=31ms
2026-01-30T16:34:57.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:57.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:57.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/323/commit
2026-01-30T16:34:57.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 323
2026-01-30T16:34:57.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=323, latency=47ms
2026-01-30T16:34:57.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:57.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/109/commit
2026-01-30T16:34:57.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 109
2026-01-30T16:34:57.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=109, latency=94ms
2026-01-30T16:34:57.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:57.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/85/commit
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 85
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=85, latency=16ms
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=332 ms | success=true
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:57.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:58.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 324
2026-01-30T16:34:58.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=324, status=PREPARED, latency=109ms
2026-01-30T16:34:58.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:58.036+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:58.052+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 110
2026-01-30T16:34:58.052+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=110, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:34:58.052+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:58.052+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:58.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 86
2026-01-30T16:34:58.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=86, status=RESERVED, latency=46ms
2026-01-30T16:34:58.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:58.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:58.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/324/commit
2026-01-30T16:34:58.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 324
2026-01-30T16:34:58.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=324, latency=16ms
2026-01-30T16:34:58.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:58.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/110/commit
2026-01-30T16:34:58.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 110
2026-01-30T16:34:58.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=110, latency=16ms
2026-01-30T16:34:58.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:58.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/86/commit
2026-01-30T16:34:58.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 86
2026-01-30T16:34:58.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=86, latency=34ms
2026-01-30T16:34:58.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:58.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=229 ms | success=true
2026-01-30T16:34:58.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:58.184+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:58.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:58.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:58.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 325
2026-01-30T16:34:58.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=325, status=PREPARED, latency=188ms
2026-01-30T16:34:58.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:58.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:58.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 111
2026-01-30T16:34:58.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=111, status=PRE_AUTHORIZED, latency=42ms
2026-01-30T16:34:58.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:58.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:58.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 87
2026-01-30T16:34:58.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=87, status=RESERVED, latency=41ms
2026-01-30T16:34:58.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:58.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:58.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/325/commit
2026-01-30T16:34:58.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 325
2026-01-30T16:34:58.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=325, latency=8ms
2026-01-30T16:34:58.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:58.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/111/commit
2026-01-30T16:34:58.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 111
2026-01-30T16:34:58.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=111, latency=59ms
2026-01-30T16:34:58.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:58.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/87/commit
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 87
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=87, latency=15ms
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=362 ms | success=true
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:58.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:58.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 326
2026-01-30T16:34:58.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=326, status=PREPARED, latency=102ms
2026-01-30T16:34:58.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:58.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:58.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 112
2026-01-30T16:34:58.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=112, status=PRE_AUTHORIZED, latency=65ms
2026-01-30T16:34:58.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:58.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:58.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 88
2026-01-30T16:34:58.761+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=88, status=RESERVED, latency=53ms
2026-01-30T16:34:58.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:58.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:58.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/326/commit
2026-01-30T16:34:58.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 326
2026-01-30T16:34:58.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=326, latency=9ms
2026-01-30T16:34:58.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:58.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/112/commit
2026-01-30T16:34:58.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 112
2026-01-30T16:34:58.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=112, latency=21ms
2026-01-30T16:34:58.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:58.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/88/commit
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 88
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=88, latency=16ms
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=265 ms | success=true
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:58.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:58.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 327
2026-01-30T16:34:58.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=327, status=PREPARED, latency=131ms
2026-01-30T16:34:58.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:58.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:59.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 113
2026-01-30T16:34:59.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=113, status=PRE_AUTHORIZED, latency=66ms
2026-01-30T16:34:59.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:34:59.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:34:59.084+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 89
2026-01-30T16:34:59.084+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=89, status=RESERVED, latency=78ms
2026-01-30T16:34:59.100+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:34:59.100+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:34:59.100+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/327/commit
2026-01-30T16:34:59.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 327
2026-01-30T16:34:59.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=327, latency=16ms
2026-01-30T16:34:59.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:34:59.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/113/commit
2026-01-30T16:34:59.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 113
2026-01-30T16:34:59.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=113, latency=15ms
2026-01-30T16:34:59.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:34:59.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/89/commit
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 89
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=89, latency=16ms
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=329 ms | success=true
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:34:59.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:34:59.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 328
2026-01-30T16:34:59.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=328, status=PREPARED, latency=96ms
2026-01-30T16:34:59.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:34:59.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:34:59.259+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:59.2593805","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:59.2593805","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:34:59.259+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:34:59.2593805","path":"/api/payments/prepare"}"
2026-01-30T16:34:59.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/328/abort
2026-01-30T16:34:59.290+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 328
2026-01-30T16:34:59.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 1 compensations
2026-01-30T16:34:59.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=152 ms | success=false
2026-01-30T16:35:56.443+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:35:56.443+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:35:56.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:35:56.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 329
2026-01-30T16:35:56.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 329
2026-01-30T16:35:56.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:35:56.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 114
2026-01-30T16:35:56.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 114 and transaction ID: TXN-01e7a8fa-1fba-46f8-95cd-486190340a4c
2026-01-30T16:35:56.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:35:56.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 90
2026-01-30T16:35:56.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 90
2026-01-30T16:35:56.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 329
2026-01-30T16:35:56.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=133 ms | success=true
2026-01-30T16:35:56.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:35:56.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:35:56.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:35:56.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:35:56.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 330
2026-01-30T16:35:56.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=330, status=PREPARED, latency=84ms
2026-01-30T16:35:56.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:35:56.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:35:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 115
2026-01-30T16:35:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=115, status=PRE_AUTHORIZED, latency=17ms
2026-01-30T16:35:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:35:56.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:35:56.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 91
2026-01-30T16:35:56.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=91, status=RESERVED, latency=32ms
2026-01-30T16:35:56.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:35:56.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:35:56.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/330/commit
2026-01-30T16:35:56.726+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 330
2026-01-30T16:35:56.726+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=330, latency=10ms
2026-01-30T16:35:56.726+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:35:56.726+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/115/commit
2026-01-30T16:35:56.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 115
2026-01-30T16:35:56.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=115, latency=7ms
2026-01-30T16:35:56.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:35:56.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/91/commit
2026-01-30T16:35:56.742+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 91
2026-01-30T16:35:56.742+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=91, latency=9ms
2026-01-30T16:35:56.742+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:35:56.742+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=163 ms | success=true
2026-01-30T16:36:02.059+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:02.059+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:02.059+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:02.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 331
2026-01-30T16:36:02.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 331
2026-01-30T16:36:02.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:02.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 116
2026-01-30T16:36:02.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 116 and transaction ID: TXN-8f0193cd-f9ba-4a73-a5e6-3ee5cb57dce4
2026-01-30T16:36:02.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:02.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 92
2026-01-30T16:36:02.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 92
2026-01-30T16:36:02.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 331
2026-01-30T16:36:02.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=239 ms | success=true
2026-01-30T16:36:02.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:02.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:02.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:02.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 332
2026-01-30T16:36:02.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 332
2026-01-30T16:36:02.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:02.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 117
2026-01-30T16:36:02.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 117 and transaction ID: TXN-e6768857-b4cd-48fd-a347-6182c49ae884
2026-01-30T16:36:02.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:02.428+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:02.4266949","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:02.4266949","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:36:02.431+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:02.4266949","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:02.4266949","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:02.4266949","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:36:02.433+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 117
2026-01-30T16:36:02.447+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 332
2026-01-30T16:36:02.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=149 ms | success=false
2026-01-30T16:36:02.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:02.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:02.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:02.564+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 333
2026-01-30T16:36:02.564+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 333
2026-01-30T16:36:02.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:02.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 118
2026-01-30T16:36:02.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 118 and transaction ID: TXN-68e2b29e-014d-467e-9b5f-b7faceb507cb
2026-01-30T16:36:02.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:02.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 93
2026-01-30T16:36:02.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 93
2026-01-30T16:36:02.598+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 333
2026-01-30T16:36:02.598+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=124 ms | success=true
2026-01-30T16:36:02.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:02.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:02.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:02.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 334
2026-01-30T16:36:02.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 334
2026-01-30T16:36:02.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:02.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 119
2026-01-30T16:36:02.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 119 and transaction ID: TXN-a51ab18a-d403-403c-a046-9011c6935295
2026-01-30T16:36:02.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:02.718+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 94
2026-01-30T16:36:02.718+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 94
2026-01-30T16:36:02.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 334
2026-01-30T16:36:02.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=113 ms | success=true
2026-01-30T16:36:02.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:02.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:02.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:02.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 335
2026-01-30T16:36:02.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 335
2026-01-30T16:36:02.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:02.852+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 120
2026-01-30T16:36:02.852+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 120 and transaction ID: TXN-71985221-2e7a-44b5-ad4b-a63553ffda95
2026-01-30T16:36:02.852+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:02.883+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 95
2026-01-30T16:36:02.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 95
2026-01-30T16:36:02.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 335
2026-01-30T16:36:02.884+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=156 ms | success=true
2026-01-30T16:36:02.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:02.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:02.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:02.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 336
2026-01-30T16:36:02.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 336
2026-01-30T16:36:02.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:03.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 121
2026-01-30T16:36:03.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 121 and transaction ID: TXN-542d39c4-75b7-47ed-830f-ef1b42253814
2026-01-30T16:36:03.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:03.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 96
2026-01-30T16:36:03.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 96
2026-01-30T16:36:03.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 336
2026-01-30T16:36:03.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=141 ms | success=true
2026-01-30T16:36:03.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:03.041+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:03.041+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:03.117+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 337
2026-01-30T16:36:03.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 337
2026-01-30T16:36:03.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:03.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 122
2026-01-30T16:36:03.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 122 and transaction ID: TXN-55fde198-197f-468f-8c6f-f2db64f490b9
2026-01-30T16:36:03.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:03.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 97
2026-01-30T16:36:03.257+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 97
2026-01-30T16:36:03.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 337
2026-01-30T16:36:03.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=241 ms | success=true
2026-01-30T16:36:03.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:03.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:03.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:03.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 338
2026-01-30T16:36:03.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 338
2026-01-30T16:36:03.469+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:03.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 123
2026-01-30T16:36:03.546+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 123 and transaction ID: TXN-fce7b208-c6b4-45a5-b346-53e5bb1b37c7
2026-01-30T16:36:03.548+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:03.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 98
2026-01-30T16:36:03.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 98
2026-01-30T16:36:03.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 338
2026-01-30T16:36:03.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=273 ms | success=true
2026-01-30T16:36:03.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:03.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:03.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:03.670+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 339
2026-01-30T16:36:03.670+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 339
2026-01-30T16:36:03.670+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:03.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 124
2026-01-30T16:36:03.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 124 and transaction ID: TXN-04a13794-2596-4db6-955a-47a66934c7b3
2026-01-30T16:36:03.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:03.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 99
2026-01-30T16:36:03.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 99
2026-01-30T16:36:03.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 339
2026-01-30T16:36:03.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=133 ms | success=true
2026-01-30T16:36:03.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:03.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:03.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:03.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 340
2026-01-30T16:36:03.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 340
2026-01-30T16:36:03.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:03.803+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:36:03.8019794","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:36:03.8019794","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:36:03.804+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:36:03.8019794","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:36:03.8019794","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:36:03.8019794","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:36:03.808+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 340
2026-01-30T16:36:03.827+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=111 ms | success=false
2026-01-30T16:36:03.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:03.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:03.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:03.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 341
2026-01-30T16:36:03.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 341
2026-01-30T16:36:03.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:03.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 125
2026-01-30T16:36:03.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 125 and transaction ID: TXN-e6679753-8890-4e7e-87f0-30cbef535bb4
2026-01-30T16:36:03.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 100
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 100
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 341
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=158 ms | success=true
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:03.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:04.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 342
2026-01-30T16:36:04.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 342
2026-01-30T16:36:04.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:04.134+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 126
2026-01-30T16:36:04.134+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 126 and transaction ID: TXN-7ff16fe0-1980-4690-ae22-7c639009fe3b
2026-01-30T16:36:04.134+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 101
2026-01-30T16:36:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 101
2026-01-30T16:36:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 342
2026-01-30T16:36:04.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=163 ms | success=true
2026-01-30T16:36:04.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:04.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:04.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:04.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 343
2026-01-30T16:36:04.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 343
2026-01-30T16:36:04.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:04.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 127
2026-01-30T16:36:04.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 127 and transaction ID: TXN-68bb382a-714a-4c85-96e2-a18c231cbbf0
2026-01-30T16:36:04.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:04.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 102
2026-01-30T16:36:04.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 102
2026-01-30T16:36:04.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 343
2026-01-30T16:36:04.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=223 ms | success=true
2026-01-30T16:36:04.441+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:04.441+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:04.441+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:04.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 344
2026-01-30T16:36:04.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 344
2026-01-30T16:36:04.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:04.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 128
2026-01-30T16:36:04.662+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 128 and transaction ID: TXN-fd9868e5-7e68-4e92-8c91-4bf30511b551
2026-01-30T16:36:04.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:04.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 103
2026-01-30T16:36:04.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 103
2026-01-30T16:36:04.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 344
2026-01-30T16:36:04.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=345 ms | success=true
2026-01-30T16:36:04.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:04.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:04.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:04.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 345
2026-01-30T16:36:04.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 345
2026-01-30T16:36:04.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:04.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 129
2026-01-30T16:36:04.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 129 and transaction ID: TXN-313ad156-0fd3-49df-a9ea-4225fa887146
2026-01-30T16:36:04.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:04.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 104
2026-01-30T16:36:04.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 104
2026-01-30T16:36:04.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 345
2026-01-30T16:36:04.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=157 ms | success=true
2026-01-30T16:36:04.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:04.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:04.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:05.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 346
2026-01-30T16:36:05.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 346
2026-01-30T16:36:05.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:05.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 130
2026-01-30T16:36:05.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 130 and transaction ID: TXN-7df44358-7759-4ebe-9cd8-833e9170ef67
2026-01-30T16:36:05.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:05.117+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 105
2026-01-30T16:36:05.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 105
2026-01-30T16:36:05.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 346
2026-01-30T16:36:05.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=146 ms | success=true
2026-01-30T16:36:05.122+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:05.122+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:05.122+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:05.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 347
2026-01-30T16:36:05.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 347
2026-01-30T16:36:05.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:05.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 131
2026-01-30T16:36:05.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 131 and transaction ID: TXN-629502eb-3382-4b89-a2c1-08c439e0fe0f
2026-01-30T16:36:05.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:05.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 106
2026-01-30T16:36:05.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 106
2026-01-30T16:36:05.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 347
2026-01-30T16:36:05.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=153 ms | success=true
2026-01-30T16:36:05.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:05.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:05.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:05.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 348
2026-01-30T16:36:05.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 348
2026-01-30T16:36:05.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:05.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 132
2026-01-30T16:36:05.452+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 132 and transaction ID: TXN-9c4c29a5-4bd1-40cf-9767-1eef06cdda2e
2026-01-30T16:36:05.452+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:05.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 107
2026-01-30T16:36:05.528+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 107
2026-01-30T16:36:05.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 348
2026-01-30T16:36:05.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=248 ms | success=true
2026-01-30T16:36:05.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:05.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:05.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:05.669+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 349
2026-01-30T16:36:05.669+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 349
2026-01-30T16:36:05.669+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:05.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 133
2026-01-30T16:36:05.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 133 and transaction ID: TXN-dca32ec3-c664-4408-9ec5-40f8837d34d3
2026-01-30T16:36:05.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:05.716+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:05.7167287","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:05.7167287","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:36:05.716+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:05.7167287","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:05.7167287","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:05.7167287","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:36:05.716+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 133
2026-01-30T16:36:05.732+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 349
2026-01-30T16:36:05.747+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=174 ms | success=false
2026-01-30T16:36:05.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:36:05.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:36:05.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:36:05.886+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 350
2026-01-30T16:36:05.886+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 350
2026-01-30T16:36:05.890+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:36:05.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 134
2026-01-30T16:36:05.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 134 and transaction ID: TXN-d7086206-f881-4081-b8da-58ec00f49cad
2026-01-30T16:36:05.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:36:05.936+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 108
2026-01-30T16:36:05.936+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 108
2026-01-30T16:36:05.936+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 350
2026-01-30T16:36:05.936+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=172 ms | success=true
2026-01-30T16:36:05.936+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:05.952+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:05.952+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:05.952+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:06.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 351
2026-01-30T16:36:06.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=351, status=PREPARED, latency=99ms
2026-01-30T16:36:06.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:06.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:06.067+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 135
2026-01-30T16:36:06.067+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=135, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:06.067+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:06.067+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:06.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 109
2026-01-30T16:36:06.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=109, status=RESERVED, latency=31ms
2026-01-30T16:36:06.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:06.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:06.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/351/commit
2026-01-30T16:36:06.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 351
2026-01-30T16:36:06.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=351, latency=16ms
2026-01-30T16:36:06.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:06.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/135/commit
2026-01-30T16:36:06.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 135
2026-01-30T16:36:06.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=135, latency=15ms
2026-01-30T16:36:06.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:06.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/109/commit
2026-01-30T16:36:06.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 109
2026-01-30T16:36:06.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=109, latency=16ms
2026-01-30T16:36:06.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:06.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=203 ms | success=true
2026-01-30T16:36:06.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:06.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:06.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:06.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:06.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 352
2026-01-30T16:36:06.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=352, status=PREPARED, latency=99ms
2026-01-30T16:36:06.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:06.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:06.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 136
2026-01-30T16:36:06.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=136, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:36:06.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:06.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:06.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 110
2026-01-30T16:36:06.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=110, status=RESERVED, latency=32ms
2026-01-30T16:36:06.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:06.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:06.307+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/352/commit
2026-01-30T16:36:06.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 352
2026-01-30T16:36:06.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=352, latency=15ms
2026-01-30T16:36:06.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:06.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/136/commit
2026-01-30T16:36:06.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 136
2026-01-30T16:36:06.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=136, latency=16ms
2026-01-30T16:36:06.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:06.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/110/commit
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 110
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=110, latency=15ms
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=197 ms | success=true
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:06.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:06.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 353
2026-01-30T16:36:06.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=353, status=PREPARED, latency=124ms
2026-01-30T16:36:06.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:06.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:06.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 137
2026-01-30T16:36:06.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=137, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:06.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:06.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:06.524+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:06.5246094","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:06.5246094","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:36:06.524+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:06.5246094","path":"/api/shipments/prepare"}"
2026-01-30T16:36:06.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/137/abort
2026-01-30T16:36:06.540+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 137
2026-01-30T16:36:06.540+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/353/abort
2026-01-30T16:36:06.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 353
2026-01-30T16:36:06.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 61 ms with 2 compensations
2026-01-30T16:36:06.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=224 ms | success=false
2026-01-30T16:36:06.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:06.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:06.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:06.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:06.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 354
2026-01-30T16:36:06.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=354, status=PREPARED, latency=109ms
2026-01-30T16:36:06.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:06.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:06.757+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 138
2026-01-30T16:36:06.757+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=138, status=PRE_AUTHORIZED, latency=47ms
2026-01-30T16:36:06.757+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:06.757+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:06.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 111
2026-01-30T16:36:06.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=111, status=RESERVED, latency=15ms
2026-01-30T16:36:06.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:06.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:06.772+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/354/commit
2026-01-30T16:36:06.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 354
2026-01-30T16:36:06.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=354, latency=47ms
2026-01-30T16:36:06.835+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:06.835+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/138/commit
2026-01-30T16:36:06.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 138
2026-01-30T16:36:06.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=138, latency=16ms
2026-01-30T16:36:06.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:06.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/111/commit
2026-01-30T16:36:06.866+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 111
2026-01-30T16:36:06.866+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=111, latency=15ms
2026-01-30T16:36:06.866+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:06.866+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=269 ms | success=true
2026-01-30T16:36:06.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:06.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:06.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:06.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:06.985+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 355
2026-01-30T16:36:06.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=355, status=PREPARED, latency=106ms
2026-01-30T16:36:06.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:06.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:07.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 139
2026-01-30T16:36:07.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=139, status=PRE_AUTHORIZED, latency=47ms
2026-01-30T16:36:07.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:07.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:07.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 112
2026-01-30T16:36:07.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=112, status=RESERVED, latency=16ms
2026-01-30T16:36:07.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:07.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:07.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/355/commit
2026-01-30T16:36:07.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 355
2026-01-30T16:36:07.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=355, latency=37ms
2026-01-30T16:36:07.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:07.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/139/commit
2026-01-30T16:36:07.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 139
2026-01-30T16:36:07.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=139, latency=35ms
2026-01-30T16:36:07.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:07.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/112/commit
2026-01-30T16:36:07.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 112
2026-01-30T16:36:07.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=112, latency=15ms
2026-01-30T16:36:07.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:07.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=258 ms | success=true
2026-01-30T16:36:07.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:07.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:07.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:07.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:07.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 356
2026-01-30T16:36:07.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=356, status=PREPARED, latency=121ms
2026-01-30T16:36:07.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:07.275+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:07.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 140
2026-01-30T16:36:07.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=140, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:07.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:07.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:07.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 113
2026-01-30T16:36:07.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=113, status=RESERVED, latency=15ms
2026-01-30T16:36:07.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:07.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:07.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/356/commit
2026-01-30T16:36:07.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 356
2026-01-30T16:36:07.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=356, latency=16ms
2026-01-30T16:36:07.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:07.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/140/commit
2026-01-30T16:36:07.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 140
2026-01-30T16:36:07.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=140, latency=15ms
2026-01-30T16:36:07.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:07.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/113/commit
2026-01-30T16:36:07.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 113
2026-01-30T16:36:07.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=113, latency=16ms
2026-01-30T16:36:07.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:07.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=206 ms | success=true
2026-01-30T16:36:07.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:07.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:07.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:07.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:07.453+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 357
2026-01-30T16:36:07.453+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=357, status=PREPARED, latency=84ms
2026-01-30T16:36:07.453+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:07.453+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:07.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 141
2026-01-30T16:36:07.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=141, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:36:07.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:07.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:07.484+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 114
2026-01-30T16:36:07.484+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=114, status=RESERVED, latency=16ms
2026-01-30T16:36:07.484+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:07.484+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:07.484+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/357/commit
2026-01-30T16:36:07.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 357
2026-01-30T16:36:07.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=357, latency=32ms
2026-01-30T16:36:07.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:07.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/141/commit
2026-01-30T16:36:07.531+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 141
2026-01-30T16:36:07.531+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=141, latency=15ms
2026-01-30T16:36:07.531+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:07.531+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/114/commit
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 114
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=114, latency=16ms
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=183 ms | success=true
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:07.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:07.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 358
2026-01-30T16:36:07.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=358, status=PREPARED, latency=105ms
2026-01-30T16:36:07.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:07.652+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:07.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 142
2026-01-30T16:36:07.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=142, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:36:07.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:07.683+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:07.708+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:07.7088001","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:07.7088001","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:36:07.708+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:07.7088001","path":"/api/shipments/prepare"}"
2026-01-30T16:36:07.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/142/abort
2026-01-30T16:36:07.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 142
2026-01-30T16:36:07.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/358/abort
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 358
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 2 compensations
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=201 ms | success=false
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:07.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:07.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 359
2026-01-30T16:36:07.876+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=359, status=PREPARED, latency=121ms
2026-01-30T16:36:07.876+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:07.876+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:07.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 143
2026-01-30T16:36:07.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=143, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:07.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:07.892+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:07.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 115
2026-01-30T16:36:07.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=115, status=RESERVED, latency=15ms
2026-01-30T16:36:07.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:07.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:07.907+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/359/commit
2026-01-30T16:36:07.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 359
2026-01-30T16:36:07.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=359, latency=65ms
2026-01-30T16:36:07.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:07.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/143/commit
2026-01-30T16:36:08.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 143
2026-01-30T16:36:08.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=143, latency=55ms
2026-01-30T16:36:08.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:08.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/115/commit
2026-01-30T16:36:08.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 115
2026-01-30T16:36:08.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=115, latency=60ms
2026-01-30T16:36:08.091+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:08.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=323 ms | success=true
2026-01-30T16:36:08.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:08.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:08.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:08.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:08.246+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 360
2026-01-30T16:36:08.249+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=360, status=PREPARED, latency=140ms
2026-01-30T16:36:08.249+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:08.249+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:08.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 144
2026-01-30T16:36:08.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=144, status=PRE_AUTHORIZED, latency=47ms
2026-01-30T16:36:08.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:08.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:08.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 116
2026-01-30T16:36:08.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=116, status=RESERVED, latency=15ms
2026-01-30T16:36:08.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:08.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:08.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/360/commit
2026-01-30T16:36:08.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 360
2026-01-30T16:36:08.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=360, latency=16ms
2026-01-30T16:36:08.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:08.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/144/commit
2026-01-30T16:36:08.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 144
2026-01-30T16:36:08.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=144, latency=15ms
2026-01-30T16:36:08.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:08.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/116/commit
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 116
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=116, latency=16ms
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=252 ms | success=true
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:08.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:08.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 361
2026-01-30T16:36:08.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=361, status=PREPARED, latency=97ms
2026-01-30T16:36:08.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:08.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:08.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 145
2026-01-30T16:36:08.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=145, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:36:08.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:08.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:08.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 117
2026-01-30T16:36:08.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=117, status=RESERVED, latency=16ms
2026-01-30T16:36:08.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:08.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:08.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/361/commit
2026-01-30T16:36:08.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 361
2026-01-30T16:36:08.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=361, latency=15ms
2026-01-30T16:36:08.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:08.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/145/commit
2026-01-30T16:36:08.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 145
2026-01-30T16:36:08.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=145, latency=16ms
2026-01-30T16:36:08.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:08.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/117/commit
2026-01-30T16:36:08.549+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 117
2026-01-30T16:36:08.549+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=117, latency=16ms
2026-01-30T16:36:08.549+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:08.549+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=185 ms | success=true
2026-01-30T16:36:08.561+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:08.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:08.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:08.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:08.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 362
2026-01-30T16:36:08.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=362, status=PREPARED, latency=91ms
2026-01-30T16:36:08.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:08.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:08.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 146
2026-01-30T16:36:08.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=146, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:36:08.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:08.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:08.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 118
2026-01-30T16:36:08.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=118, status=RESERVED, latency=15ms
2026-01-30T16:36:08.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:08.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:08.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/362/commit
2026-01-30T16:36:08.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 362
2026-01-30T16:36:08.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=362, latency=32ms
2026-01-30T16:36:08.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:08.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/146/commit
2026-01-30T16:36:08.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 146
2026-01-30T16:36:08.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=146, latency=15ms
2026-01-30T16:36:08.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:08.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/118/commit
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 118
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=118, latency=16ms
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=208 ms | success=true
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:08.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:08.868+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 363
2026-01-30T16:36:08.868+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=363, status=PREPARED, latency=106ms
2026-01-30T16:36:08.868+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:08.868+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:08.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 147
2026-01-30T16:36:08.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=147, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:36:08.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:08.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:08.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 119
2026-01-30T16:36:08.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=119, status=RESERVED, latency=17ms
2026-01-30T16:36:08.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:08.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:08.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/363/commit
2026-01-30T16:36:08.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 363
2026-01-30T16:36:08.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=363, latency=16ms
2026-01-30T16:36:08.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:08.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/147/commit
2026-01-30T16:36:08.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 147
2026-01-30T16:36:08.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=147, latency=15ms
2026-01-30T16:36:08.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:08.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/119/commit
2026-01-30T16:36:08.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 119
2026-01-30T16:36:08.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=119, latency=16ms
2026-01-30T16:36:08.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:08.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=193 ms | success=true
2026-01-30T16:36:08.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:08.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:08.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:08.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:09.068+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 364
2026-01-30T16:36:09.068+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=364, status=PREPARED, latency=96ms
2026-01-30T16:36:09.068+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:09.068+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:09.158+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 148
2026-01-30T16:36:09.158+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=148, status=PRE_AUTHORIZED, latency=90ms
2026-01-30T16:36:09.158+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:09.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:09.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 120
2026-01-30T16:36:09.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=120, status=RESERVED, latency=47ms
2026-01-30T16:36:09.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:09.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:09.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/364/commit
2026-01-30T16:36:09.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 364
2026-01-30T16:36:09.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=364, latency=20ms
2026-01-30T16:36:09.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:09.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/148/commit
2026-01-30T16:36:09.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 148
2026-01-30T16:36:09.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=148, latency=82ms
2026-01-30T16:36:09.319+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:09.319+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/120/commit
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 120
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=120, latency=30ms
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=382 ms | success=true
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:09.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:09.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 365
2026-01-30T16:36:09.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=365, status=PREPARED, latency=137ms
2026-01-30T16:36:09.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:09.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:09.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 149
2026-01-30T16:36:09.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=149, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:36:09.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:09.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:09.517+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:09.5174695","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:09.5174695","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:36:09.517+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:36:09.5174695","path":"/api/shipments/prepare"}"
2026-01-30T16:36:09.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/149/abort
2026-01-30T16:36:09.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 149
2026-01-30T16:36:09.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/365/abort
2026-01-30T16:36:09.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 365
2026-01-30T16:36:09.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 48 ms with 2 compensations
2026-01-30T16:36:09.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=209 ms | success=false
2026-01-30T16:36:09.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:09.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:09.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:09.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:09.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 366
2026-01-30T16:36:09.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=366, status=PREPARED, latency=120ms
2026-01-30T16:36:09.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:09.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:09.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 150
2026-01-30T16:36:09.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=150, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T16:36:09.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:09.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:09.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 121
2026-01-30T16:36:09.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=121, status=RESERVED, latency=15ms
2026-01-30T16:36:09.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:09.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:09.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/366/commit
2026-01-30T16:36:09.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 366
2026-01-30T16:36:09.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=366, latency=18ms
2026-01-30T16:36:09.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:09.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/150/commit
2026-01-30T16:36:09.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 150
2026-01-30T16:36:09.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=150, latency=16ms
2026-01-30T16:36:09.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:09.766+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/121/commit
2026-01-30T16:36:09.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 121
2026-01-30T16:36:09.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=121, latency=16ms
2026-01-30T16:36:09.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:09.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=210 ms | success=true
2026-01-30T16:36:09.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:09.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:09.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:09.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:09.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 367
2026-01-30T16:36:09.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=367, status=PREPARED, latency=79ms
2026-01-30T16:36:09.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:09.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:09.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 151
2026-01-30T16:36:09.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=151, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:09.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:09.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:09.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 122
2026-01-30T16:36:09.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=122, status=RESERVED, latency=47ms
2026-01-30T16:36:09.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:09.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:09.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/367/commit
2026-01-30T16:36:09.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 367
2026-01-30T16:36:09.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=367, latency=15ms
2026-01-30T16:36:09.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:09.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/151/commit
2026-01-30T16:36:09.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 151
2026-01-30T16:36:09.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=151, latency=25ms
2026-01-30T16:36:09.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:09.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/122/commit
2026-01-30T16:36:09.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 122
2026-01-30T16:36:09.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=122, latency=19ms
2026-01-30T16:36:09.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:09.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=211 ms | success=true
2026-01-30T16:36:10.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:10.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:10.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:10.015+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:10.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 368
2026-01-30T16:36:10.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=368, status=PREPARED, latency=95ms
2026-01-30T16:36:10.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:10.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:10.126+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 152
2026-01-30T16:36:10.126+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=152, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:10.126+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:10.126+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:10.142+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 123
2026-01-30T16:36:10.142+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=123, status=RESERVED, latency=16ms
2026-01-30T16:36:10.142+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:10.142+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:10.142+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/368/commit
2026-01-30T16:36:10.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 368
2026-01-30T16:36:10.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=368, latency=15ms
2026-01-30T16:36:10.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:10.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/152/commit
2026-01-30T16:36:10.173+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 152
2026-01-30T16:36:10.173+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=152, latency=16ms
2026-01-30T16:36:10.173+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:10.173+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/123/commit
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 123
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=123, latency=16ms
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=176 ms | success=true
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:10.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:10.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 369
2026-01-30T16:36:10.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=369, status=PREPARED, latency=98ms
2026-01-30T16:36:10.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:10.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:10.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 153
2026-01-30T16:36:10.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=153, status=PRE_AUTHORIZED, latency=17ms
2026-01-30T16:36:10.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:10.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:10.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 124
2026-01-30T16:36:10.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=124, status=RESERVED, latency=16ms
2026-01-30T16:36:10.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:10.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:10.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/369/commit
2026-01-30T16:36:10.382+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 369
2026-01-30T16:36:10.382+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=369, latency=62ms
2026-01-30T16:36:10.382+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:10.382+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/153/commit
2026-01-30T16:36:10.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 153
2026-01-30T16:36:10.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=153, latency=16ms
2026-01-30T16:36:10.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:10.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/124/commit
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 124
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=124, latency=15ms
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=222 ms | success=true
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:36:10.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:36:10.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 370
2026-01-30T16:36:10.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=370, status=PREPARED, latency=170ms
2026-01-30T16:36:10.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:36:10.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:36:10.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 154
2026-01-30T16:36:10.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=154, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:36:10.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:36:10.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:36:10.630+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 125
2026-01-30T16:36:10.630+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=125, status=RESERVED, latency=31ms
2026-01-30T16:36:10.630+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:36:10.630+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:36:10.630+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/370/commit
2026-01-30T16:36:10.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 370
2026-01-30T16:36:10.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=370, latency=9ms
2026-01-30T16:36:10.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:36:10.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/154/commit
2026-01-30T16:36:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 154
2026-01-30T16:36:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=154, latency=16ms
2026-01-30T16:36:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:36:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/125/commit
2026-01-30T16:36:10.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 125
2026-01-30T16:36:10.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=125, latency=24ms
2026-01-30T16:36:10.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:36:10.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=251 ms | success=true
2026-01-30T16:39:25.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:25.099+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:25.101+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:25.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 371
2026-01-30T16:39:25.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 371
2026-01-30T16:39:25.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:25.369+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:25.3634185","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:25.3634185","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:39:25.377+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:25.3634185","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:25.3634185","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:25.3634185","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:39:25.380+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 371
2026-01-30T16:39:25.425+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=325 ms | success=false
2026-01-30T16:39:25.433+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:25.433+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:25.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:25.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 372
2026-01-30T16:39:25.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 372
2026-01-30T16:39:25.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:25.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 155
2026-01-30T16:39:25.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 155 and transaction ID: TXN-4d1913ea-bef1-4e23-bfb4-775a0d9a677d
2026-01-30T16:39:25.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:25.670+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:25.6608043","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:25.6608043","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:39:25.672+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:25.6608043","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:25.6608043","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:25.6608043","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:39:25.676+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 155
2026-01-30T16:39:25.690+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 372
2026-01-30T16:39:25.703+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=268 ms | success=false
2026-01-30T16:39:25.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:25.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:25.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:25.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 373
2026-01-30T16:39:25.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 373
2026-01-30T16:39:25.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:25.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 156
2026-01-30T16:39:25.830+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 156 and transaction ID: TXN-2c7353dc-b699-4385-b2c1-19563cc9f964
2026-01-30T16:39:25.830+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:25.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 126
2026-01-30T16:39:25.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 126
2026-01-30T16:39:25.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 373
2026-01-30T16:39:25.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=183 ms | success=true
2026-01-30T16:39:25.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:25.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:25.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 374
2026-01-30T16:39:26.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 374
2026-01-30T16:39:26.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 157
2026-01-30T16:39:26.023+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 157 and transaction ID: TXN-316475f5-9118-4df0-9378-97009f2da392
2026-01-30T16:39:26.023+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 127
2026-01-30T16:39:26.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 127
2026-01-30T16:39:26.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 374
2026-01-30T16:39:26.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=137 ms | success=true
2026-01-30T16:39:26.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 375
2026-01-30T16:39:26.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 375
2026-01-30T16:39:26.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 158
2026-01-30T16:39:26.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 158 and transaction ID: TXN-f27acbe2-7e1f-4dbe-94e0-7ce8fa08e74d
2026-01-30T16:39:26.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 128
2026-01-30T16:39:26.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 128
2026-01-30T16:39:26.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 375
2026-01-30T16:39:26.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=118 ms | success=true
2026-01-30T16:39:26.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.248+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 376
2026-01-30T16:39:26.248+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 376
2026-01-30T16:39:26.248+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.264+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 159
2026-01-30T16:39:26.264+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 159 and transaction ID: TXN-244a9cf8-9490-4d1a-bbb5-e49ad37ce0bb
2026-01-30T16:39:26.264+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 129
2026-01-30T16:39:26.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 129
2026-01-30T16:39:26.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 376
2026-01-30T16:39:26.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=129 ms | success=true
2026-01-30T16:39:26.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 377
2026-01-30T16:39:26.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 377
2026-01-30T16:39:26.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 160
2026-01-30T16:39:26.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 160 and transaction ID: TXN-3e743325-9891-414f-ad46-d4f40231eeac
2026-01-30T16:39:26.447+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 130
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 130
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 377
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=158 ms | success=true
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.458+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 378
2026-01-30T16:39:26.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 378
2026-01-30T16:39:26.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.614+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 161
2026-01-30T16:39:26.614+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 161 and transaction ID: TXN-eec995b5-3280-4d25-8b08-5875e2091e87
2026-01-30T16:39:26.614+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.629+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 131
2026-01-30T16:39:26.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 131
2026-01-30T16:39:26.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 378
2026-01-30T16:39:26.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=177 ms | success=true
2026-01-30T16:39:26.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.645+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 379
2026-01-30T16:39:26.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 379
2026-01-30T16:39:26.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 162
2026-01-30T16:39:26.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 162 and transaction ID: TXN-b4a2b521-f042-4c92-9e80-5111e319db91
2026-01-30T16:39:26.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 132
2026-01-30T16:39:26.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 132
2026-01-30T16:39:26.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 379
2026-01-30T16:39:26.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=177 ms | success=true
2026-01-30T16:39:26.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:26.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 380
2026-01-30T16:39:26.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 380
2026-01-30T16:39:26.932+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:26.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 163
2026-01-30T16:39:26.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 163 and transaction ID: TXN-ccc97e16-bef0-4afc-9a19-1b58f5763b72
2026-01-30T16:39:26.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:26.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 133
2026-01-30T16:39:26.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 133
2026-01-30T16:39:26.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 380
2026-01-30T16:39:26.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=148 ms | success=true
2026-01-30T16:39:26.993+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:26.993+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:26.993+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:27.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 381
2026-01-30T16:39:27.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 381
2026-01-30T16:39:27.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:27.091+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 164
2026-01-30T16:39:27.091+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 164 and transaction ID: TXN-a3bfd227-f1e5-4a9d-9f30-21d90517a4c9
2026-01-30T16:39:27.091+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:27.103+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:27.1018279","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:27.1018279","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:39:27.105+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:27.1018279","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:27.1018279","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:27.1018279","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:39:27.108+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 164
2026-01-30T16:39:27.131+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 381
2026-01-30T16:39:27.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=166 ms | success=false
2026-01-30T16:39:27.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:27.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:27.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:27.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 382
2026-01-30T16:39:27.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 382
2026-01-30T16:39:27.272+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:27.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 165
2026-01-30T16:39:27.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 165 and transaction ID: TXN-77b7503f-22be-4375-8c26-27e3f5f6eaf8
2026-01-30T16:39:27.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:27.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 134
2026-01-30T16:39:27.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 134
2026-01-30T16:39:27.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 382
2026-01-30T16:39:27.349+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=189 ms | success=true
2026-01-30T16:39:27.364+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:27.364+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:27.364+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:27.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 383
2026-01-30T16:39:27.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 383
2026-01-30T16:39:27.445+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:27.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 166
2026-01-30T16:39:27.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 166 and transaction ID: TXN-aa1b7602-d58c-429e-9fec-b263caa41394
2026-01-30T16:39:27.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:27.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 135
2026-01-30T16:39:27.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 135
2026-01-30T16:39:27.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 383
2026-01-30T16:39:27.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=123 ms | success=true
2026-01-30T16:39:27.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:27.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:27.495+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:27.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 384
2026-01-30T16:39:27.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 384
2026-01-30T16:39:27.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:27.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 167
2026-01-30T16:39:27.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 167 and transaction ID: TXN-66d55e34-d2df-4df6-8811-aaca363160a6
2026-01-30T16:39:27.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:27.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 136
2026-01-30T16:39:27.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 136
2026-01-30T16:39:27.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 384
2026-01-30T16:39:27.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=125 ms | success=true
2026-01-30T16:39:27.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:27.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:27.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:27.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 385
2026-01-30T16:39:27.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 385
2026-01-30T16:39:27.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:27.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 168
2026-01-30T16:39:27.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 168 and transaction ID: TXN-b6a67f77-1424-42e1-947a-7271cd5ca53c
2026-01-30T16:39:27.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:27.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 137
2026-01-30T16:39:27.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 137
2026-01-30T16:39:27.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 385
2026-01-30T16:39:27.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=169 ms | success=true
2026-01-30T16:39:27.801+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:27.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:27.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:27.926+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 386
2026-01-30T16:39:27.926+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 386
2026-01-30T16:39:27.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:27.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 169
2026-01-30T16:39:27.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 169 and transaction ID: TXN-4c13bedd-5436-4939-a496-1bc27bbdc627
2026-01-30T16:39:27.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:27.961+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 138
2026-01-30T16:39:27.961+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 138
2026-01-30T16:39:27.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 386
2026-01-30T16:39:27.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=160 ms | success=true
2026-01-30T16:39:27.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:27.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:27.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:28.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 387
2026-01-30T16:39:28.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 387
2026-01-30T16:39:28.075+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:28.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 170
2026-01-30T16:39:28.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 170 and transaction ID: TXN-59d18bb3-a0e4-4537-9cac-31604d91bbc5
2026-01-30T16:39:28.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:28.141+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 139
2026-01-30T16:39:28.141+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 139
2026-01-30T16:39:28.141+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 387
2026-01-30T16:39:28.141+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=172 ms | success=true
2026-01-30T16:39:28.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:28.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:28.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:28.226+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 388
2026-01-30T16:39:28.226+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 388
2026-01-30T16:39:28.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 171
2026-01-30T16:39:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 171 and transaction ID: TXN-bc0eb508-4eac-4244-8b01-ad206c969d2f
2026-01-30T16:39:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:28.262+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 140
2026-01-30T16:39:28.262+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 140
2026-01-30T16:39:28.262+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 388
2026-01-30T16:39:28.262+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=114 ms | success=true
2026-01-30T16:39:28.270+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:28.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:28.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:28.345+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 389
2026-01-30T16:39:28.345+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 389
2026-01-30T16:39:28.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:28.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 172
2026-01-30T16:39:28.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 172 and transaction ID: TXN-78e48355-4798-4a71-ac50-3c6fa674bb19
2026-01-30T16:39:28.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:28.380+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 141
2026-01-30T16:39:28.380+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 141
2026-01-30T16:39:28.380+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 389
2026-01-30T16:39:28.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=110 ms | success=true
2026-01-30T16:39:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:28.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 390
2026-01-30T16:39:28.476+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 390
2026-01-30T16:39:28.476+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:28.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 173
2026-01-30T16:39:28.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 173 and transaction ID: TXN-644cf7d9-d1d2-476b-a36e-3e786de96c7b
2026-01-30T16:39:28.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:28.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 142
2026-01-30T16:39:28.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 142
2026-01-30T16:39:28.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 390
2026-01-30T16:39:28.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=123 ms | success=true
2026-01-30T16:39:28.518+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:28.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:28.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:28.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:28.592+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 391
2026-01-30T16:39:28.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=391, status=PREPARED, latency=74ms
2026-01-30T16:39:28.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:28.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:28.601+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:28.6009298","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:28.6009298","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:39:28.604+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:28.6009298","path":"/api/payments/prepare"}"
2026-01-30T16:39:28.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/391/abort
2026-01-30T16:39:28.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 391
2026-01-30T16:39:28.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 20 ms with 1 compensations
2026-01-30T16:39:28.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=106 ms | success=false
2026-01-30T16:39:28.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:28.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:28.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:28.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:28.713+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 392
2026-01-30T16:39:28.713+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=392, status=PREPARED, latency=81ms
2026-01-30T16:39:28.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:28.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:28.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 174
2026-01-30T16:39:28.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=174, status=PRE_AUTHORIZED, latency=11ms
2026-01-30T16:39:28.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:28.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:28.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 143
2026-01-30T16:39:28.814+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=143, status=RESERVED, latency=89ms
2026-01-30T16:39:28.814+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:28.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:28.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/392/commit
2026-01-30T16:39:28.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 392
2026-01-30T16:39:28.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=392, latency=13ms
2026-01-30T16:39:28.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:28.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/174/commit
2026-01-30T16:39:28.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 174
2026-01-30T16:39:28.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=174, latency=10ms
2026-01-30T16:39:28.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:28.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/143/commit
2026-01-30T16:39:28.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 143
2026-01-30T16:39:28.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=143, latency=13ms
2026-01-30T16:39:28.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:28.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=219 ms | success=true
2026-01-30T16:39:28.855+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:28.855+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:28.855+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:28.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:28.936+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 393
2026-01-30T16:39:28.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=393, status=PREPARED, latency=82ms
2026-01-30T16:39:28.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:28.937+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:28.954+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 175
2026-01-30T16:39:28.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=175, status=PRE_AUTHORIZED, latency=18ms
2026-01-30T16:39:28.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:28.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:29.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 144
2026-01-30T16:39:29.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=144, status=RESERVED, latency=76ms
2026-01-30T16:39:29.032+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:29.032+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:29.032+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/393/commit
2026-01-30T16:39:29.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 393
2026-01-30T16:39:29.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=393, latency=14ms
2026-01-30T16:39:29.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:29.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/175/commit
2026-01-30T16:39:29.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 175
2026-01-30T16:39:29.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=175, latency=8ms
2026-01-30T16:39:29.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:29.054+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/144/commit
2026-01-30T16:39:29.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 144
2026-01-30T16:39:29.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=144, latency=3ms
2026-01-30T16:39:29.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:29.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=211 ms | success=true
2026-01-30T16:39:29.072+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:29.072+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:29.072+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:29.072+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:29.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 394
2026-01-30T16:39:29.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=394, status=PREPARED, latency=94ms
2026-01-30T16:39:29.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:29.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:29.197+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:29.1977615","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:29.1977615","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:39:29.197+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:39:29.1977615","path":"/api/payments/prepare"}"
2026-01-30T16:39:29.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/394/abort
2026-01-30T16:39:29.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 394
2026-01-30T16:39:29.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 32 ms with 1 compensations
2026-01-30T16:39:29.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=163 ms | success=false
2026-01-30T16:39:29.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:29.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:29.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:29.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:29.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 395
2026-01-30T16:39:29.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=395, status=PREPARED, latency=98ms
2026-01-30T16:39:29.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:29.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:29.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 176
2026-01-30T16:39:29.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=176, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:39:29.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:29.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:29.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 145
2026-01-30T16:39:29.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=145, status=RESERVED, latency=16ms
2026-01-30T16:39:29.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:29.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:29.389+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/395/commit
2026-01-30T16:39:29.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 395
2026-01-30T16:39:29.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=395, latency=31ms
2026-01-30T16:39:29.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:29.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/176/commit
2026-01-30T16:39:29.420+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 176
2026-01-30T16:39:29.420+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=176, latency=16ms
2026-01-30T16:39:29.420+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:29.420+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/145/commit
2026-01-30T16:39:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 145
2026-01-30T16:39:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=145, latency=15ms
2026-01-30T16:39:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=200 ms | success=true
2026-01-30T16:39:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:29.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 396
2026-01-30T16:39:29.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=396, status=PREPARED, latency=94ms
2026-01-30T16:39:29.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:29.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:29.560+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 177
2026-01-30T16:39:29.560+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=177, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:39:29.560+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:29.560+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:29.576+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 146
2026-01-30T16:39:29.576+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=146, status=RESERVED, latency=16ms
2026-01-30T16:39:29.576+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:29.576+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:29.576+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/396/commit
2026-01-30T16:39:29.607+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 396
2026-01-30T16:39:29.607+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=396, latency=31ms
2026-01-30T16:39:29.607+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:29.607+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/177/commit
2026-01-30T16:39:29.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 177
2026-01-30T16:39:29.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=177, latency=16ms
2026-01-30T16:39:29.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:29.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/146/commit
2026-01-30T16:39:29.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 146
2026-01-30T16:39:29.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=146, latency=16ms
2026-01-30T16:39:29.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:29.639+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=195 ms | success=true
2026-01-30T16:39:29.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:29.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:29.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:29.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:29.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 397
2026-01-30T16:39:29.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=397, status=PREPARED, latency=94ms
2026-01-30T16:39:29.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:29.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:29.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 178
2026-01-30T16:39:29.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=178, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:39:29.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:29.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:29.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 147
2026-01-30T16:39:29.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=147, status=RESERVED, latency=31ms
2026-01-30T16:39:29.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:29.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:29.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/397/commit
2026-01-30T16:39:29.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 397
2026-01-30T16:39:29.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=397, latency=31ms
2026-01-30T16:39:29.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:29.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/178/commit
2026-01-30T16:39:29.842+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 178
2026-01-30T16:39:29.842+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=178, latency=16ms
2026-01-30T16:39:29.842+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:29.842+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/147/commit
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 147
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=147, latency=15ms
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=209 ms | success=true
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:29.857+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:29.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 398
2026-01-30T16:39:29.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=398, status=PREPARED, latency=94ms
2026-01-30T16:39:29.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:29.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:29.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 179
2026-01-30T16:39:29.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=179, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:39:29.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:29.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:30.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 148
2026-01-30T16:39:30.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=148, status=RESERVED, latency=46ms
2026-01-30T16:39:30.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:30.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:30.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/398/commit
2026-01-30T16:39:30.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 398
2026-01-30T16:39:30.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=398, latency=16ms
2026-01-30T16:39:30.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:30.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/179/commit
2026-01-30T16:39:30.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 179
2026-01-30T16:39:30.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=179, latency=16ms
2026-01-30T16:39:30.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:30.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/148/commit
2026-01-30T16:39:30.070+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 148
2026-01-30T16:39:30.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=148, latency=26ms
2026-01-30T16:39:30.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:30.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=200 ms | success=true
2026-01-30T16:39:30.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:30.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:30.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:30.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:30.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 399
2026-01-30T16:39:30.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=399, status=PREPARED, latency=108ms
2026-01-30T16:39:30.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:30.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:30.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 180
2026-01-30T16:39:30.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=180, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:39:30.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:30.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:30.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 149
2026-01-30T16:39:30.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=149, status=RESERVED, latency=31ms
2026-01-30T16:39:30.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:30.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:30.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/399/commit
2026-01-30T16:39:30.266+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 399
2026-01-30T16:39:30.266+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=399, latency=16ms
2026-01-30T16:39:30.266+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:30.266+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/180/commit
2026-01-30T16:39:30.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 180
2026-01-30T16:39:30.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=180, latency=16ms
2026-01-30T16:39:30.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:30.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/149/commit
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 149
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=149, latency=15ms
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=224 ms | success=true
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:30.297+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:30.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 400
2026-01-30T16:39:30.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=400, status=PREPARED, latency=100ms
2026-01-30T16:39:30.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:30.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 181
2026-01-30T16:39:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=181, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:39:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:30.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 150
2026-01-30T16:39:30.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=150, status=RESERVED, latency=47ms
2026-01-30T16:39:30.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:30.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:30.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/400/commit
2026-01-30T16:39:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 400
2026-01-30T16:39:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=400, latency=15ms
2026-01-30T16:39:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/181/commit
2026-01-30T16:39:30.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 181
2026-01-30T16:39:30.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=181, latency=16ms
2026-01-30T16:39:30.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:30.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/150/commit
2026-01-30T16:39:30.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 150
2026-01-30T16:39:30.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=150, latency=16ms
2026-01-30T16:39:30.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:30.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=220 ms | success=true
2026-01-30T16:39:30.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:30.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:30.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:30.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:30.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 401
2026-01-30T16:39:30.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=401, status=PREPARED, latency=94ms
2026-01-30T16:39:30.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:30.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:30.662+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 182
2026-01-30T16:39:30.662+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=182, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:39:30.662+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:30.662+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:30.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 151
2026-01-30T16:39:30.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=151, status=RESERVED, latency=47ms
2026-01-30T16:39:30.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:30.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:30.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/401/commit
2026-01-30T16:39:30.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 401
2026-01-30T16:39:30.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=401, latency=16ms
2026-01-30T16:39:30.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:30.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/182/commit
2026-01-30T16:39:30.740+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 182
2026-01-30T16:39:30.740+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=182, latency=15ms
2026-01-30T16:39:30.740+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:30.740+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/151/commit
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 151
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=151, latency=16ms
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=223 ms | success=true
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:30.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:30.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 402
2026-01-30T16:39:30.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=402, status=PREPARED, latency=117ms
2026-01-30T16:39:30.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:30.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:30.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 183
2026-01-30T16:39:30.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=183, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:39:30.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:30.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:30.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 152
2026-01-30T16:39:30.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=152, status=RESERVED, latency=31ms
2026-01-30T16:39:30.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:30.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:30.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/402/commit
2026-01-30T16:39:30.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 402
2026-01-30T16:39:30.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=402, latency=16ms
2026-01-30T16:39:30.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:30.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/183/commit
2026-01-30T16:39:30.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 183
2026-01-30T16:39:30.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=183, latency=15ms
2026-01-30T16:39:30.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:30.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/152/commit
2026-01-30T16:39:30.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 152
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=152, latency=25ms
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=238 ms | success=true
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:31.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:31.101+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 403
2026-01-30T16:39:31.101+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=403, status=PREPARED, latency=94ms
2026-01-30T16:39:31.101+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:31.101+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:31.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 184
2026-01-30T16:39:31.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=184, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:39:31.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:31.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:31.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 153
2026-01-30T16:39:31.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=153, status=RESERVED, latency=16ms
2026-01-30T16:39:31.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:31.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:31.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/403/commit
2026-01-30T16:39:31.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 403
2026-01-30T16:39:31.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=403, latency=16ms
2026-01-30T16:39:31.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:31.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/184/commit
2026-01-30T16:39:31.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 184
2026-01-30T16:39:31.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=184, latency=15ms
2026-01-30T16:39:31.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:31.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/153/commit
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 153
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=153, latency=16ms
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=173 ms | success=true
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:31.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:31.273+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 404
2026-01-30T16:39:31.273+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=404, status=PREPARED, latency=94ms
2026-01-30T16:39:31.273+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:31.273+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:31.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 185
2026-01-30T16:39:31.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=185, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:39:31.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:31.288+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:31.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 154
2026-01-30T16:39:31.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=154, status=RESERVED, latency=77ms
2026-01-30T16:39:31.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:31.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:31.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/404/commit
2026-01-30T16:39:31.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 404
2026-01-30T16:39:31.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=404, latency=31ms
2026-01-30T16:39:31.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:31.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/185/commit
2026-01-30T16:39:31.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 185
2026-01-30T16:39:31.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=185, latency=16ms
2026-01-30T16:39:31.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:31.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/154/commit
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 154
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=154, latency=15ms
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=242 ms | success=true
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:31.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:31.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 405
2026-01-30T16:39:31.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=405, status=PREPARED, latency=95ms
2026-01-30T16:39:31.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:31.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:31.538+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 186
2026-01-30T16:39:31.538+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=186, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:39:31.538+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:31.538+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 155
2026-01-30T16:39:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=155, status=RESERVED, latency=47ms
2026-01-30T16:39:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/405/commit
2026-01-30T16:39:31.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 405
2026-01-30T16:39:31.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=405, latency=16ms
2026-01-30T16:39:31.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:31.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/186/commit
2026-01-30T16:39:31.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 186
2026-01-30T16:39:31.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=186, latency=31ms
2026-01-30T16:39:31.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:31.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/155/commit
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 155
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=155, latency=16ms
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=214 ms | success=true
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:31.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:31.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 406
2026-01-30T16:39:31.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=406, status=PREPARED, latency=131ms
2026-01-30T16:39:31.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:31.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:31.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 187
2026-01-30T16:39:31.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=187, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:39:31.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:31.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:31.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 156
2026-01-30T16:39:31.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=156, status=RESERVED, latency=63ms
2026-01-30T16:39:31.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:31.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:31.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/406/commit
2026-01-30T16:39:31.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 406
2026-01-30T16:39:31.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=406, latency=16ms
2026-01-30T16:39:31.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:31.889+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/187/commit
2026-01-30T16:39:31.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 187
2026-01-30T16:39:31.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=187, latency=15ms
2026-01-30T16:39:31.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:31.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/156/commit
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 156
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=156, latency=16ms
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=265 ms | success=true
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:31.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:32.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 407
2026-01-30T16:39:32.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=407, status=PREPARED, latency=94ms
2026-01-30T16:39:32.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:32.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:32.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 188
2026-01-30T16:39:32.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=188, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:39:32.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:32.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:32.060+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 157
2026-01-30T16:39:32.060+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=157, status=RESERVED, latency=15ms
2026-01-30T16:39:32.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:32.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:32.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/407/commit
2026-01-30T16:39:32.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 407
2026-01-30T16:39:32.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=407, latency=16ms
2026-01-30T16:39:32.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:32.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/188/commit
2026-01-30T16:39:32.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 188
2026-01-30T16:39:32.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=188, latency=15ms
2026-01-30T16:39:32.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:32.107+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/157/commit
2026-01-30T16:39:32.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 157
2026-01-30T16:39:32.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=157, latency=16ms
2026-01-30T16:39:32.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:32.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=203 ms | success=true
2026-01-30T16:39:32.139+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:32.139+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:32.139+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:32.139+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:32.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 408
2026-01-30T16:39:32.241+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=408, status=PREPARED, latency=102ms
2026-01-30T16:39:32.242+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:32.242+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:32.270+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 189
2026-01-30T16:39:32.270+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=189, status=PRE_AUTHORIZED, latency=28ms
2026-01-30T16:39:32.270+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:32.270+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:32.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 158
2026-01-30T16:39:32.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=158, status=RESERVED, latency=24ms
2026-01-30T16:39:32.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:32.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:32.296+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/408/commit
2026-01-30T16:39:32.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 408
2026-01-30T16:39:32.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=408, latency=8ms
2026-01-30T16:39:32.304+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:32.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/189/commit
2026-01-30T16:39:32.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 189
2026-01-30T16:39:32.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=189, latency=17ms
2026-01-30T16:39:32.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:32.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/158/commit
2026-01-30T16:39:32.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 158
2026-01-30T16:39:32.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=158, latency=20ms
2026-01-30T16:39:32.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:32.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=201 ms | success=true
2026-01-30T16:39:32.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:32.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:32.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:32.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:32.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 409
2026-01-30T16:39:32.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=409, status=PREPARED, latency=85ms
2026-01-30T16:39:32.492+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:32.570+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 190
2026-01-30T16:39:32.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=190, status=PRE_AUTHORIZED, latency=79ms
2026-01-30T16:39:32.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:32.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:32.580+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:32.5787563","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:32.5787563","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:39:32.585+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:39:32.5787563","path":"/api/shipments/prepare"}"
2026-01-30T16:39:32.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/190/abort
2026-01-30T16:39:32.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 190
2026-01-30T16:39:32.597+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/409/abort
2026-01-30T16:39:32.617+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 409
2026-01-30T16:39:32.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 32 ms with 2 compensations
2026-01-30T16:39:32.621+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=235 ms | success=false
2026-01-30T16:39:32.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:39:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:39:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:39:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:39:32.721+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 410
2026-01-30T16:39:32.721+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=410, status=PREPARED, latency=84ms
2026-01-30T16:39:32.721+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:39:32.721+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:39:32.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 191
2026-01-30T16:39:32.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=191, status=PRE_AUTHORIZED, latency=55ms
2026-01-30T16:39:32.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:39:32.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:39:32.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 159
2026-01-30T16:39:32.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=159, status=RESERVED, latency=28ms
2026-01-30T16:39:32.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:39:32.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:39:32.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/410/commit
2026-01-30T16:39:32.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 410
2026-01-30T16:39:32.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=410, latency=51ms
2026-01-30T16:39:32.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:39:32.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/191/commit
2026-01-30T16:39:32.871+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 191
2026-01-30T16:39:32.871+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=191, latency=15ms
2026-01-30T16:39:32.871+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:39:32.871+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/159/commit
2026-01-30T16:39:32.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 159
2026-01-30T16:39:32.903+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=159, latency=32ms
2026-01-30T16:39:32.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:39:32.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=271 ms | success=true
2026-01-30T16:39:58.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:58.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:58.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:58.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 411
2026-01-30T16:39:58.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 411
2026-01-30T16:39:58.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:58.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 192
2026-01-30T16:39:58.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 192 and transaction ID: TXN-ee62512d-7a51-4b95-a8fe-f6cb59c8af53
2026-01-30T16:39:58.678+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:58.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 160
2026-01-30T16:39:58.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 160
2026-01-30T16:39:58.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 411
2026-01-30T16:39:58.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=182 ms | success=true
2026-01-30T16:39:58.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:58.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:58.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:58.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 412
2026-01-30T16:39:58.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 412
2026-01-30T16:39:58.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:58.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 193
2026-01-30T16:39:58.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 193 and transaction ID: TXN-a42629af-63d1-4637-bee4-07cd19bdd086
2026-01-30T16:39:58.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:59.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 161
2026-01-30T16:39:59.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 161
2026-01-30T16:39:59.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 412
2026-01-30T16:39:59.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=300 ms | success=true
2026-01-30T16:39:59.059+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:59.060+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:59.060+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:59.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 413
2026-01-30T16:39:59.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 413
2026-01-30T16:39:59.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:59.232+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 194
2026-01-30T16:39:59.234+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 194 and transaction ID: TXN-2b21e247-8142-4218-984b-597151e0ed8e
2026-01-30T16:39:59.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:59.267+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 162
2026-01-30T16:39:59.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 162
2026-01-30T16:39:59.270+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 413
2026-01-30T16:39:59.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=210 ms | success=true
2026-01-30T16:39:59.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:59.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:59.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:59.407+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 414
2026-01-30T16:39:59.408+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 414
2026-01-30T16:39:59.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:59.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 195
2026-01-30T16:39:59.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 195 and transaction ID: TXN-72b18214-0bfc-4a77-b276-445a06277693
2026-01-30T16:39:59.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:59.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 163
2026-01-30T16:39:59.475+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 163
2026-01-30T16:39:59.479+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 414
2026-01-30T16:39:59.480+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=186 ms | success=true
2026-01-30T16:39:59.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:59.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:59.491+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:59.576+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 415
2026-01-30T16:39:59.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 415
2026-01-30T16:39:59.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:59.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 196
2026-01-30T16:39:59.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 196 and transaction ID: TXN-db20cbdb-a526-44ba-b082-9084621de88b
2026-01-30T16:39:59.607+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:59.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 164
2026-01-30T16:39:59.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 164
2026-01-30T16:39:59.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 415
2026-01-30T16:39:59.632+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=142 ms | success=true
2026-01-30T16:39:59.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:59.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:59.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:59.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 416
2026-01-30T16:39:59.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 416
2026-01-30T16:39:59.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:59.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 197
2026-01-30T16:39:59.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 197 and transaction ID: TXN-9b22d679-fd31-44c4-a754-da56fa9e7cfe
2026-01-30T16:39:59.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:59.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 165
2026-01-30T16:39:59.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 165
2026-01-30T16:39:59.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 416
2026-01-30T16:39:59.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=135 ms | success=true
2026-01-30T16:39:59.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:59.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:59.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:39:59.880+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 417
2026-01-30T16:39:59.881+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 417
2026-01-30T16:39:59.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:39:59.915+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 198
2026-01-30T16:39:59.915+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 198 and transaction ID: TXN-a079a796-feb4-4fa7-9dcd-07b5b16947aa
2026-01-30T16:39:59.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:39:59.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 166
2026-01-30T16:39:59.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 166
2026-01-30T16:39:59.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 417
2026-01-30T16:39:59.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=159 ms | success=true
2026-01-30T16:39:59.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:39:59.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:39:59.956+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:00.052+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 418
2026-01-30T16:40:00.053+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 418
2026-01-30T16:40:00.053+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:00.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 199
2026-01-30T16:40:00.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 199 and transaction ID: TXN-87242ca2-5f17-4e5a-9104-a35ddfefada2
2026-01-30T16:40:00.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:00.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 167
2026-01-30T16:40:00.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 167
2026-01-30T16:40:00.125+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 418
2026-01-30T16:40:00.125+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=169 ms | success=true
2026-01-30T16:40:00.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:00.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:00.368+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:00.505+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 419
2026-01-30T16:40:00.505+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 419
2026-01-30T16:40:00.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:00.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 200
2026-01-30T16:40:00.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 200 and transaction ID: TXN-d8543a3f-a486-45d9-a635-062b9c61a757
2026-01-30T16:40:00.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:00.544+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 168
2026-01-30T16:40:00.544+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 168
2026-01-30T16:40:00.544+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 419
2026-01-30T16:40:00.559+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=201 ms | success=true
2026-01-30T16:40:00.559+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:00.559+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:00.559+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:00.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 420
2026-01-30T16:40:00.654+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 420
2026-01-30T16:40:00.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:00.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 201
2026-01-30T16:40:00.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 201 and transaction ID: TXN-83e9e5c3-ff33-4188-9c17-30b8ba2e73bf
2026-01-30T16:40:00.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:00.683+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:00.681524","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:00.681524","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:40:00.687+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:00.681524","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:00.681524","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:00.681524","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:40:00.690+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 201
2026-01-30T16:40:00.694+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 420
2026-01-30T16:40:00.742+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=170 ms | success=false
2026-01-30T16:40:00.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:00.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:00.780+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:00.874+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 421
2026-01-30T16:40:00.874+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 421
2026-01-30T16:40:00.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:00.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 202
2026-01-30T16:40:00.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 202 and transaction ID: TXN-2e88678b-e521-4bac-8177-099dfd657511
2026-01-30T16:40:00.895+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:00.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 169
2026-01-30T16:40:00.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 169
2026-01-30T16:40:00.913+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 421
2026-01-30T16:40:00.913+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=133 ms | success=true
2026-01-30T16:40:00.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:00.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:00.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:01.002+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 422
2026-01-30T16:40:01.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 422
2026-01-30T16:40:01.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:01.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 203
2026-01-30T16:40:01.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 203 and transaction ID: TXN-5e54e408-151a-4426-85e3-d1a6bf2566da
2026-01-30T16:40:01.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:01.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 170
2026-01-30T16:40:01.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 170
2026-01-30T16:40:01.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 422
2026-01-30T16:40:01.028+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=119 ms | success=true
2026-01-30T16:40:01.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:01.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:01.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:01.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 423
2026-01-30T16:40:01.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 423
2026-01-30T16:40:01.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:01.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 204
2026-01-30T16:40:01.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 204 and transaction ID: TXN-18f683aa-5c40-4eb0-8c12-0a8f9b61c90d
2026-01-30T16:40:01.148+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:01.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 171
2026-01-30T16:40:01.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 171
2026-01-30T16:40:01.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 423
2026-01-30T16:40:01.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=127 ms | success=true
2026-01-30T16:40:01.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:01.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:01.179+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:01.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 424
2026-01-30T16:40:01.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 424
2026-01-30T16:40:01.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:01.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 205
2026-01-30T16:40:01.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 205 and transaction ID: TXN-b6e5648a-0cce-40b5-ac85-7b9ea6295a3b
2026-01-30T16:40:01.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:01.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 172
2026-01-30T16:40:01.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 172
2026-01-30T16:40:01.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 424
2026-01-30T16:40:01.355+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=174 ms | success=true
2026-01-30T16:40:01.370+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:01.371+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:01.371+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:01.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 425
2026-01-30T16:40:01.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 425
2026-01-30T16:40:01.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:01.580+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 206
2026-01-30T16:40:01.580+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 206 and transaction ID: TXN-66aec564-eba8-4eba-bf69-33a89f5f949e
2026-01-30T16:40:01.580+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:01.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 173
2026-01-30T16:40:01.667+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 173
2026-01-30T16:40:01.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 425
2026-01-30T16:40:01.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=297 ms | success=true
2026-01-30T16:40:01.674+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:01.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:01.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:01.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 426
2026-01-30T16:40:01.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 426
2026-01-30T16:40:01.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:01.780+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 207
2026-01-30T16:40:01.780+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 207 and transaction ID: TXN-96e80eb3-2349-43fc-9142-42f806b5f484
2026-01-30T16:40:01.780+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:01.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 174
2026-01-30T16:40:01.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 174
2026-01-30T16:40:01.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 426
2026-01-30T16:40:01.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=135 ms | success=true
2026-01-30T16:40:01.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:01.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:01.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:01.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 427
2026-01-30T16:40:01.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 427
2026-01-30T16:40:01.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:01.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 208
2026-01-30T16:40:01.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 208 and transaction ID: TXN-9877d960-c9d8-40ff-87e6-8a8092e46202
2026-01-30T16:40:01.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:01.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 175
2026-01-30T16:40:01.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 175
2026-01-30T16:40:01.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 427
2026-01-30T16:40:01.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=147 ms | success=true
2026-01-30T16:40:01.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:01.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:01.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:02.072+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 428
2026-01-30T16:40:02.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 428
2026-01-30T16:40:02.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:02.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 209
2026-01-30T16:40:02.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 209 and transaction ID: TXN-1779698f-8113-4921-bb4f-3b612163b149
2026-01-30T16:40:02.090+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:02.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 176
2026-01-30T16:40:02.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 176
2026-01-30T16:40:02.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 428
2026-01-30T16:40:02.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=147 ms | success=true
2026-01-30T16:40:02.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:02.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:02.123+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:02.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 429
2026-01-30T16:40:02.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 429
2026-01-30T16:40:02.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:02.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 210
2026-01-30T16:40:02.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 210 and transaction ID: TXN-c2e33973-38f3-4442-a42f-31876eed494f
2026-01-30T16:40:02.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:02.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 177
2026-01-30T16:40:02.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 177
2026-01-30T16:40:02.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 429
2026-01-30T16:40:02.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=129 ms | success=true
2026-01-30T16:40:02.256+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:02.256+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:02.256+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:02.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 430
2026-01-30T16:40:02.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 430
2026-01-30T16:40:02.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:02.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 211
2026-01-30T16:40:02.417+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 211 and transaction ID: TXN-4d102a8a-9ce9-49a3-8ec2-658e457e057d
2026-01-30T16:40:02.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:02.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 178
2026-01-30T16:40:02.461+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 178
2026-01-30T16:40:02.465+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 430
2026-01-30T16:40:02.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=204 ms | success=true
2026-01-30T16:40:02.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:02.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:02.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:02.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:02.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 431
2026-01-30T16:40:02.600+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=431, status=PREPARED, latency=114ms
2026-01-30T16:40:02.611+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:02.613+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:02.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 212
2026-01-30T16:40:02.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=212, status=PRE_AUTHORIZED, latency=35ms
2026-01-30T16:40:02.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:02.647+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:02.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 179
2026-01-30T16:40:02.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=179, status=RESERVED, latency=25ms
2026-01-30T16:40:02.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:02.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:02.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/431/commit
2026-01-30T16:40:02.680+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 431
2026-01-30T16:40:02.693+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=431, latency=22ms
2026-01-30T16:40:02.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:02.698+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/212/commit
2026-01-30T16:40:02.737+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 212
2026-01-30T16:40:02.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=212, latency=44ms
2026-01-30T16:40:02.742+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:02.743+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/179/commit
2026-01-30T16:40:02.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 179
2026-01-30T16:40:02.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=179, latency=40ms
2026-01-30T16:40:02.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:02.794+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=298 ms | success=true
2026-01-30T16:40:02.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:02.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:02.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:02.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:02.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 432
2026-01-30T16:40:02.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=432, status=PREPARED, latency=108ms
2026-01-30T16:40:02.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:02.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:02.954+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 213
2026-01-30T16:40:02.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=213, status=PRE_AUTHORIZED, latency=26ms
2026-01-30T16:40:02.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:02.955+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:02.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 180
2026-01-30T16:40:02.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=180, status=RESERVED, latency=18ms
2026-01-30T16:40:02.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:02.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:02.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/432/commit
2026-01-30T16:40:02.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 432
2026-01-30T16:40:02.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=432, latency=15ms
2026-01-30T16:40:02.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:02.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/213/commit
2026-01-30T16:40:02.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 213
2026-01-30T16:40:02.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=213, latency=7ms
2026-01-30T16:40:02.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:02.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/180/commit
2026-01-30T16:40:03.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 180
2026-01-30T16:40:03.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=180, latency=9ms
2026-01-30T16:40:03.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:03.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=184 ms | success=true
2026-01-30T16:40:03.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:03.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:03.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:03.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:03.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 433
2026-01-30T16:40:03.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=433, status=PREPARED, latency=85ms
2026-01-30T16:40:03.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:03.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:03.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 214
2026-01-30T16:40:03.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=214, status=PRE_AUTHORIZED, latency=47ms
2026-01-30T16:40:03.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:03.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:03.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 181
2026-01-30T16:40:03.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=181, status=RESERVED, latency=15ms
2026-01-30T16:40:03.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:03.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:03.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/433/commit
2026-01-30T16:40:03.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 433
2026-01-30T16:40:03.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=433, latency=32ms
2026-01-30T16:40:03.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:03.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/214/commit
2026-01-30T16:40:03.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 214
2026-01-30T16:40:03.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=214, latency=15ms
2026-01-30T16:40:03.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:03.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/181/commit
2026-01-30T16:40:03.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 181
2026-01-30T16:40:03.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=181, latency=16ms
2026-01-30T16:40:03.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:03.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=220 ms | success=true
2026-01-30T16:40:03.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:03.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:03.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:03.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:03.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 434
2026-01-30T16:40:03.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=434, status=PREPARED, latency=106ms
2026-01-30T16:40:03.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:03.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:03.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 215
2026-01-30T16:40:03.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=215, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T16:40:03.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:03.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:03.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 182
2026-01-30T16:40:03.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=182, status=RESERVED, latency=29ms
2026-01-30T16:40:03.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:03.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:03.405+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/434/commit
2026-01-30T16:40:03.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 434
2026-01-30T16:40:03.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=434, latency=8ms
2026-01-30T16:40:03.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:03.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/215/commit
2026-01-30T16:40:03.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 215
2026-01-30T16:40:03.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=215, latency=8ms
2026-01-30T16:40:03.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:03.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/182/commit
2026-01-30T16:40:03.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 182
2026-01-30T16:40:03.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=182, latency=10ms
2026-01-30T16:40:03.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:03.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=191 ms | success=true
2026-01-30T16:40:03.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:03.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:03.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:03.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:03.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 435
2026-01-30T16:40:03.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=435, status=PREPARED, latency=98ms
2026-01-30T16:40:03.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:03.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:03.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 216
2026-01-30T16:40:03.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=216, status=PRE_AUTHORIZED, latency=19ms
2026-01-30T16:40:03.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:03.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:03.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 183
2026-01-30T16:40:03.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=183, status=RESERVED, latency=19ms
2026-01-30T16:40:03.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:03.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:03.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/435/commit
2026-01-30T16:40:03.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 435
2026-01-30T16:40:03.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=435, latency=6ms
2026-01-30T16:40:03.581+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:03.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/216/commit
2026-01-30T16:40:03.590+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 216
2026-01-30T16:40:03.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=216, latency=10ms
2026-01-30T16:40:03.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:03.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/183/commit
2026-01-30T16:40:03.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 183
2026-01-30T16:40:03.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=183, latency=14ms
2026-01-30T16:40:03.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:03.605+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=167 ms | success=true
2026-01-30T16:40:03.611+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:03.611+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:03.611+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:03.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:03.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 436
2026-01-30T16:40:03.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=436, status=PREPARED, latency=108ms
2026-01-30T16:40:03.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:03.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:03.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 217
2026-01-30T16:40:03.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=217, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:03.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:03.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:03.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 184
2026-01-30T16:40:03.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=184, status=RESERVED, latency=83ms
2026-01-30T16:40:03.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:03.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:03.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/436/commit
2026-01-30T16:40:03.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 436
2026-01-30T16:40:03.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=436, latency=78ms
2026-01-30T16:40:03.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:03.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/217/commit
2026-01-30T16:40:03.959+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 217
2026-01-30T16:40:03.959+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=217, latency=63ms
2026-01-30T16:40:03.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:03.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/184/commit
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 184
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=184, latency=15ms
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=384 ms | success=true
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:03.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:04.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 437
2026-01-30T16:40:04.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=437, status=PREPARED, latency=122ms
2026-01-30T16:40:04.113+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:04.113+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:04.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 218
2026-01-30T16:40:04.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=218, status=PRE_AUTHORIZED, latency=18ms
2026-01-30T16:40:04.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:04.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:04.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 185
2026-01-30T16:40:04.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=185, status=RESERVED, latency=47ms
2026-01-30T16:40:04.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:04.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:04.178+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/437/commit
2026-01-30T16:40:04.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 437
2026-01-30T16:40:04.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=437, latency=15ms
2026-01-30T16:40:04.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:04.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/218/commit
2026-01-30T16:40:04.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 218
2026-01-30T16:40:04.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=218, latency=16ms
2026-01-30T16:40:04.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:04.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/185/commit
2026-01-30T16:40:04.225+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 185
2026-01-30T16:40:04.225+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=185, latency=16ms
2026-01-30T16:40:04.225+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:04.225+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=232 ms | success=true
2026-01-30T16:40:04.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:04.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:04.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:04.240+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:04.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 438
2026-01-30T16:40:04.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=438, status=PREPARED, latency=94ms
2026-01-30T16:40:04.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:04.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:04.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 219
2026-01-30T16:40:04.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=219, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:04.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:04.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:04.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 186
2026-01-30T16:40:04.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=186, status=RESERVED, latency=31ms
2026-01-30T16:40:04.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:04.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:04.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/438/commit
2026-01-30T16:40:04.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 438
2026-01-30T16:40:04.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=438, latency=16ms
2026-01-30T16:40:04.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:04.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/219/commit
2026-01-30T16:40:04.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 219
2026-01-30T16:40:04.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=219, latency=16ms
2026-01-30T16:40:04.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:04.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/186/commit
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 186
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=186, latency=15ms
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=195 ms | success=true
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:04.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:04.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 439
2026-01-30T16:40:04.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=439, status=PREPARED, latency=94ms
2026-01-30T16:40:04.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:04.522+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:04.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 220
2026-01-30T16:40:04.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=220, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:40:04.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:04.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:04.553+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 187
2026-01-30T16:40:04.569+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=187, status=RESERVED, latency=16ms
2026-01-30T16:40:04.569+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:04.569+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:04.569+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/439/commit
2026-01-30T16:40:04.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 439
2026-01-30T16:40:04.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=439, latency=19ms
2026-01-30T16:40:04.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:04.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/220/commit
2026-01-30T16:40:04.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 220
2026-01-30T16:40:04.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=220, latency=16ms
2026-01-30T16:40:04.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:04.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/187/commit
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 187
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=187, latency=15ms
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=184 ms | success=true
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:04.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:04.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 440
2026-01-30T16:40:04.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=440, status=PREPARED, latency=110ms
2026-01-30T16:40:04.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:04.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:04.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 221
2026-01-30T16:40:04.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=221, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:04.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:04.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:04.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 188
2026-01-30T16:40:04.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=188, status=RESERVED, latency=31ms
2026-01-30T16:40:04.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:04.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:04.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/440/commit
2026-01-30T16:40:04.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 440
2026-01-30T16:40:04.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=440, latency=16ms
2026-01-30T16:40:04.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:04.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/221/commit
2026-01-30T16:40:04.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 221
2026-01-30T16:40:04.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=221, latency=15ms
2026-01-30T16:40:04.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:04.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/188/commit
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 188
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=188, latency=16ms
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=196 ms | success=true
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:04.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:04.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 441
2026-01-30T16:40:04.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=441, status=PREPARED, latency=94ms
2026-01-30T16:40:04.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:04.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:05.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 222
2026-01-30T16:40:05.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=222, status=PRE_AUTHORIZED, latency=109ms
2026-01-30T16:40:05.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:05.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:05.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 189
2026-01-30T16:40:05.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=189, status=RESERVED, latency=109ms
2026-01-30T16:40:05.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:05.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:05.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/441/commit
2026-01-30T16:40:05.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 441
2026-01-30T16:40:05.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=441, latency=16ms
2026-01-30T16:40:05.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:05.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/222/commit
2026-01-30T16:40:05.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 222
2026-01-30T16:40:05.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=222, latency=16ms
2026-01-30T16:40:05.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:05.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/189/commit
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 189
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=189, latency=15ms
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=353 ms | success=true
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:05.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:05.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 442
2026-01-30T16:40:05.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=442, status=PREPARED, latency=96ms
2026-01-30T16:40:05.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:05.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:05.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 223
2026-01-30T16:40:05.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=223, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:05.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:05.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:05.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 190
2026-01-30T16:40:05.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=190, status=RESERVED, latency=31ms
2026-01-30T16:40:05.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:05.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:05.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/442/commit
2026-01-30T16:40:05.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 442
2026-01-30T16:40:05.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=442, latency=16ms
2026-01-30T16:40:05.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:05.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/223/commit
2026-01-30T16:40:05.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 223
2026-01-30T16:40:05.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=223, latency=15ms
2026-01-30T16:40:05.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:05.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/190/commit
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 190
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=190, latency=16ms
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=185 ms | success=true
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:05.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:05.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 443
2026-01-30T16:40:05.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=443, status=PREPARED, latency=96ms
2026-01-30T16:40:05.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:05.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:05.483+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 224
2026-01-30T16:40:05.483+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=224, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:40:05.483+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:05.483+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:05.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 191
2026-01-30T16:40:05.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=191, status=RESERVED, latency=32ms
2026-01-30T16:40:05.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:05.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:05.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/443/commit
2026-01-30T16:40:05.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 443
2026-01-30T16:40:05.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=443, latency=15ms
2026-01-30T16:40:05.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:05.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/224/commit
2026-01-30T16:40:05.546+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 224
2026-01-30T16:40:05.546+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=224, latency=16ms
2026-01-30T16:40:05.546+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:05.546+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/191/commit
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 191
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=191, latency=16ms
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=183 ms | success=true
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:05.562+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:05.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:05.676+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 444
2026-01-30T16:40:05.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=444, status=PREPARED, latency=115ms
2026-01-30T16:40:05.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:05.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:05.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 225
2026-01-30T16:40:05.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=225, status=PRE_AUTHORIZED, latency=36ms
2026-01-30T16:40:05.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:05.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:05.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 192
2026-01-30T16:40:05.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=192, status=RESERVED, latency=31ms
2026-01-30T16:40:05.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:05.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:05.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/444/commit
2026-01-30T16:40:05.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 444
2026-01-30T16:40:05.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=444, latency=9ms
2026-01-30T16:40:05.755+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:05.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/225/commit
2026-01-30T16:40:05.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 225
2026-01-30T16:40:05.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=225, latency=10ms
2026-01-30T16:40:05.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:05.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/192/commit
2026-01-30T16:40:05.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 192
2026-01-30T16:40:05.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=192, latency=11ms
2026-01-30T16:40:05.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:05.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=199 ms | success=true
2026-01-30T16:40:05.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:05.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:05.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:05.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:05.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 445
2026-01-30T16:40:05.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=445, status=PREPARED, latency=74ms
2026-01-30T16:40:05.859+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:05.859+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:05.874+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 226
2026-01-30T16:40:05.874+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=226, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:40:05.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:05.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:05.895+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 193
2026-01-30T16:40:05.895+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=193, status=RESERVED, latency=20ms
2026-01-30T16:40:05.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:05.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:05.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/445/commit
2026-01-30T16:40:05.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 445
2026-01-30T16:40:05.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=445, latency=18ms
2026-01-30T16:40:05.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:05.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/226/commit
2026-01-30T16:40:05.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 226
2026-01-30T16:40:05.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=226, latency=12ms
2026-01-30T16:40:05.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:05.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/193/commit
2026-01-30T16:40:05.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 193
2026-01-30T16:40:05.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=193, latency=17ms
2026-01-30T16:40:05.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:05.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=162 ms | success=true
2026-01-30T16:40:05.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:05.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:05.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:05.952+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:06.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 446
2026-01-30T16:40:06.032+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=446, status=PREPARED, latency=81ms
2026-01-30T16:40:06.033+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:06.034+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:06.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 227
2026-01-30T16:40:06.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=227, status=PRE_AUTHORIZED, latency=17ms
2026-01-30T16:40:06.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:06.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:06.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 194
2026-01-30T16:40:06.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=194, status=RESERVED, latency=23ms
2026-01-30T16:40:06.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:06.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:06.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/446/commit
2026-01-30T16:40:06.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 446
2026-01-30T16:40:06.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=446, latency=9ms
2026-01-30T16:40:06.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:06.083+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/227/commit
2026-01-30T16:40:06.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 227
2026-01-30T16:40:06.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=227, latency=11ms
2026-01-30T16:40:06.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:06.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/194/commit
2026-01-30T16:40:06.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 194
2026-01-30T16:40:06.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=194, latency=9ms
2026-01-30T16:40:06.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:06.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=151 ms | success=true
2026-01-30T16:40:06.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:06.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:06.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:06.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:06.186+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 447
2026-01-30T16:40:06.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=447, status=PREPARED, latency=77ms
2026-01-30T16:40:06.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:06.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:06.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 228
2026-01-30T16:40:06.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=228, status=PRE_AUTHORIZED, latency=22ms
2026-01-30T16:40:06.212+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:06.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:06.339+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 195
2026-01-30T16:40:06.340+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=195, status=RESERVED, latency=128ms
2026-01-30T16:40:06.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:06.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:06.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/447/commit
2026-01-30T16:40:06.376+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 447
2026-01-30T16:40:06.377+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=447, latency=36ms
2026-01-30T16:40:06.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:06.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/228/commit
2026-01-30T16:40:06.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 228
2026-01-30T16:40:06.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=228, latency=24ms
2026-01-30T16:40:06.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:06.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/195/commit
2026-01-30T16:40:06.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 195
2026-01-30T16:40:06.426+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=195, latency=24ms
2026-01-30T16:40:06.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:06.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=317 ms | success=true
2026-01-30T16:40:06.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:06.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:06.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:06.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:06.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 448
2026-01-30T16:40:06.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=448, status=PREPARED, latency=93ms
2026-01-30T16:40:06.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:06.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:06.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 229
2026-01-30T16:40:06.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=229, status=PRE_AUTHORIZED, latency=18ms
2026-01-30T16:40:06.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:06.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:06.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 196
2026-01-30T16:40:06.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=196, status=RESERVED, latency=34ms
2026-01-30T16:40:06.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:06.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:06.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/448/commit
2026-01-30T16:40:06.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 448
2026-01-30T16:40:06.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=448, latency=2ms
2026-01-30T16:40:06.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:06.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/229/commit
2026-01-30T16:40:06.607+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 229
2026-01-30T16:40:06.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=229, latency=19ms
2026-01-30T16:40:06.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:06.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/196/commit
2026-01-30T16:40:06.621+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 196
2026-01-30T16:40:06.621+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=196, latency=13ms
2026-01-30T16:40:06.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:06.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=181 ms | success=true
2026-01-30T16:40:06.628+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:06.628+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:06.628+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:06.628+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:06.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 449
2026-01-30T16:40:06.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=449, status=PREPARED, latency=96ms
2026-01-30T16:40:06.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:06.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:06.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 230
2026-01-30T16:40:06.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=230, status=PRE_AUTHORIZED, latency=19ms
2026-01-30T16:40:06.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:06.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:06.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 197
2026-01-30T16:40:06.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=197, status=RESERVED, latency=24ms
2026-01-30T16:40:06.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:06.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:06.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/449/commit
2026-01-30T16:40:06.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 449
2026-01-30T16:40:06.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=449, latency=2ms
2026-01-30T16:40:06.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:06.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/230/commit
2026-01-30T16:40:06.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 230
2026-01-30T16:40:06.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=230, latency=15ms
2026-01-30T16:40:06.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:06.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/197/commit
2026-01-30T16:40:06.794+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 197
2026-01-30T16:40:06.794+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=197, latency=8ms
2026-01-30T16:40:06.794+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:06.794+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=166 ms | success=true
2026-01-30T16:40:06.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:06.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:06.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:06.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:06.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 450
2026-01-30T16:40:06.896+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=450, status=PREPARED, latency=89ms
2026-01-30T16:40:06.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:06.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:06.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 231
2026-01-30T16:40:06.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=231, status=PRE_AUTHORIZED, latency=49ms
2026-01-30T16:40:06.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:06.951+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:06.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 198
2026-01-30T16:40:06.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=198, status=RESERVED, latency=21ms
2026-01-30T16:40:06.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:06.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:06.972+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/450/commit
2026-01-30T16:40:06.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 450
2026-01-30T16:40:06.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=450, latency=15ms
2026-01-30T16:40:06.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:06.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/231/commit
2026-01-30T16:40:07.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 231
2026-01-30T16:40:07.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=231, latency=16ms
2026-01-30T16:40:07.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:07.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/198/commit
2026-01-30T16:40:07.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 198
2026-01-30T16:40:07.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=198, latency=24ms
2026-01-30T16:40:07.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:07.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=221 ms | success=true
2026-01-30T16:40:32.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:32.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:32.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 451
2026-01-30T16:40:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 451
2026-01-30T16:40:32.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:32.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 232
2026-01-30T16:40:32.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 232 and transaction ID: TXN-2de7fcd5-a902-408b-9af2-633c07395b99
2026-01-30T16:40:32.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:32.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 199
2026-01-30T16:40:32.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 199
2026-01-30T16:40:32.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 451
2026-01-30T16:40:32.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=265 ms | success=true
2026-01-30T16:40:32.861+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:32.861+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:32.861+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:32.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 452
2026-01-30T16:40:32.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 452
2026-01-30T16:40:32.947+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:32.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 233
2026-01-30T16:40:32.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 233 and transaction ID: TXN-1331397f-f971-40f5-99f6-2a7174c376ec
2026-01-30T16:40:32.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:32.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 200
2026-01-30T16:40:32.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 200
2026-01-30T16:40:32.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 452
2026-01-30T16:40:32.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=117 ms | success=true
2026-01-30T16:40:32.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:32.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:32.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:33.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 453
2026-01-30T16:40:33.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 453
2026-01-30T16:40:33.088+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:33.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 234
2026-01-30T16:40:33.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 234 and transaction ID: TXN-f9a356f2-44d8-41b9-8b1f-19147d2df970
2026-01-30T16:40:33.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:33.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 201
2026-01-30T16:40:33.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 201
2026-01-30T16:40:33.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 453
2026-01-30T16:40:33.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=146 ms | success=true
2026-01-30T16:40:33.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:33.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:33.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:33.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 454
2026-01-30T16:40:33.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 454
2026-01-30T16:40:33.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:33.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 235
2026-01-30T16:40:33.280+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 235 and transaction ID: TXN-cf1cb3fd-2555-48dc-bc69-bb51f0a03e37
2026-01-30T16:40:33.280+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:33.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 202
2026-01-30T16:40:33.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 202
2026-01-30T16:40:33.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 454
2026-01-30T16:40:33.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=154 ms | success=true
2026-01-30T16:40:33.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:33.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:33.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:33.464+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 455
2026-01-30T16:40:33.464+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 455
2026-01-30T16:40:33.464+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:33.480+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:33.4800572","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:33.4800572","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:40:33.480+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:33.4800572","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:33.4800572","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:33.4800572","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:40:33.495+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 455
2026-01-30T16:40:33.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=220 ms | success=false
2026-01-30T16:40:33.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:33.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:33.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:33.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 456
2026-01-30T16:40:33.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 456
2026-01-30T16:40:33.660+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:33.688+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 236
2026-01-30T16:40:33.688+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 236 and transaction ID: TXN-870f6cf5-f50b-4a1a-928e-af61ff8c0069
2026-01-30T16:40:33.689+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:33.704+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 203
2026-01-30T16:40:33.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 203
2026-01-30T16:40:33.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 456
2026-01-30T16:40:33.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=177 ms | success=true
2026-01-30T16:40:33.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:33.713+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:33.713+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:33.789+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 457
2026-01-30T16:40:33.790+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 457
2026-01-30T16:40:33.791+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:33.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 237
2026-01-30T16:40:33.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 237 and transaction ID: TXN-6a394ae3-1fcc-4ff1-be63-0edf7524e6e0
2026-01-30T16:40:33.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:33.873+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 204
2026-01-30T16:40:33.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 204
2026-01-30T16:40:33.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 457
2026-01-30T16:40:33.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=199 ms | success=true
2026-01-30T16:40:33.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:33.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:33.949+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:34.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 458
2026-01-30T16:40:34.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 458
2026-01-30T16:40:34.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:34.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 238
2026-01-30T16:40:34.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 238 and transaction ID: TXN-6396ac76-3641-4d3b-a788-6fcf8deb8026
2026-01-30T16:40:34.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:34.133+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 205
2026-01-30T16:40:34.133+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 205
2026-01-30T16:40:34.133+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 458
2026-01-30T16:40:34.133+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=184 ms | success=true
2026-01-30T16:40:34.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:34.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:34.140+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:34.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 459
2026-01-30T16:40:34.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 459
2026-01-30T16:40:34.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:34.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 239
2026-01-30T16:40:34.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 239 and transaction ID: TXN-b18942b8-37fa-4473-8eb9-5f75f93521ce
2026-01-30T16:40:34.278+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:34.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 206
2026-01-30T16:40:34.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 206
2026-01-30T16:40:34.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 459
2026-01-30T16:40:34.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=153 ms | success=true
2026-01-30T16:40:34.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:34.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:34.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:34.395+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 460
2026-01-30T16:40:34.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 460
2026-01-30T16:40:34.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:34.413+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 240
2026-01-30T16:40:34.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 240 and transaction ID: TXN-5241849e-6a71-4cdd-9823-9d46427b5f1a
2026-01-30T16:40:34.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:34.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 207
2026-01-30T16:40:34.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 207
2026-01-30T16:40:34.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 460
2026-01-30T16:40:34.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=129 ms | success=true
2026-01-30T16:40:34.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:34.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:34.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:34.546+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 461
2026-01-30T16:40:34.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 461
2026-01-30T16:40:34.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:34.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 241
2026-01-30T16:40:34.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 241 and transaction ID: TXN-3201f86a-a352-43c3-af63-b5bc562b65b3
2026-01-30T16:40:34.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:34.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 208
2026-01-30T16:40:34.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 208
2026-01-30T16:40:34.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 461
2026-01-30T16:40:34.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=153 ms | success=true
2026-01-30T16:40:34.595+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:34.596+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:34.596+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:34.706+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 462
2026-01-30T16:40:34.706+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 462
2026-01-30T16:40:34.706+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:34.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 242
2026-01-30T16:40:34.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 242 and transaction ID: TXN-e24f9c9f-f46c-499f-9419-b4a8c378b42c
2026-01-30T16:40:34.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:34.734+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 209
2026-01-30T16:40:34.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 209
2026-01-30T16:40:34.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 462
2026-01-30T16:40:34.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=139 ms | success=true
2026-01-30T16:40:34.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:34.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:34.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:34.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 463
2026-01-30T16:40:34.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 463
2026-01-30T16:40:34.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:34.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 243
2026-01-30T16:40:34.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 243 and transaction ID: TXN-84738bce-be53-4732-8d0e-7de63f4d1fc8
2026-01-30T16:40:34.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:34.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 210
2026-01-30T16:40:34.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 210
2026-01-30T16:40:34.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 463
2026-01-30T16:40:34.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=164 ms | success=true
2026-01-30T16:40:34.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:34.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:34.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:35.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 464
2026-01-30T16:40:35.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 464
2026-01-30T16:40:35.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:35.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 244
2026-01-30T16:40:35.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 244 and transaction ID: TXN-d6e8b8b9-a9d1-4176-8282-d5097695b6c6
2026-01-30T16:40:35.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:35.196+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 211
2026-01-30T16:40:35.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 211
2026-01-30T16:40:35.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 464
2026-01-30T16:40:35.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=286 ms | success=true
2026-01-30T16:40:35.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:35.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:35.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:35.312+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 465
2026-01-30T16:40:35.312+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 465
2026-01-30T16:40:35.313+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:35.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 245
2026-01-30T16:40:35.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 245 and transaction ID: TXN-12fabd15-d18b-4f05-a77c-ca5de5b7661a
2026-01-30T16:40:35.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:35.355+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:35.3555844","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:35.3555844","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:40:35.355+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:35.3555844","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:35.3555844","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:35.3555844","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:40:35.355+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 245
2026-01-30T16:40:35.371+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 465
2026-01-30T16:40:35.386+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=191 ms | success=false
2026-01-30T16:40:35.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:35.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:35.402+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:35.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 466
2026-01-30T16:40:35.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 466
2026-01-30T16:40:35.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:35.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 246
2026-01-30T16:40:35.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 246 and transaction ID: TXN-4021c0eb-d589-4827-b474-89289345674d
2026-01-30T16:40:35.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:35.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 212
2026-01-30T16:40:35.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 212
2026-01-30T16:40:35.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 466
2026-01-30T16:40:35.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=178 ms | success=true
2026-01-30T16:40:35.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:35.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:35.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:35.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 467
2026-01-30T16:40:35.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 467
2026-01-30T16:40:35.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:35.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 247
2026-01-30T16:40:35.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 247 and transaction ID: TXN-e651f1f0-e5bb-4c88-a85b-87dfe5661569
2026-01-30T16:40:35.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:35.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 213
2026-01-30T16:40:35.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 213
2026-01-30T16:40:35.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 467
2026-01-30T16:40:35.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=181 ms | success=true
2026-01-30T16:40:35.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:35.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:35.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:35.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 468
2026-01-30T16:40:35.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 468
2026-01-30T16:40:35.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:35.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 248
2026-01-30T16:40:35.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 248 and transaction ID: TXN-7d690970-309f-4d8e-b42b-9b3fa511c1ba
2026-01-30T16:40:35.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:35.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 214
2026-01-30T16:40:35.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 214
2026-01-30T16:40:35.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 468
2026-01-30T16:40:35.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=151 ms | success=true
2026-01-30T16:40:35.933+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:35.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:35.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:36.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 469
2026-01-30T16:40:36.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 469
2026-01-30T16:40:36.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:36.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 249
2026-01-30T16:40:36.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 249 and transaction ID: TXN-227a72e3-c5c2-4e1a-a9f6-8a6455ba1b8d
2026-01-30T16:40:36.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:36.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 215
2026-01-30T16:40:36.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 215
2026-01-30T16:40:36.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 469
2026-01-30T16:40:36.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=171 ms | success=true
2026-01-30T16:40:36.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:40:36.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:40:36.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:40:36.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 470
2026-01-30T16:40:36.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 470
2026-01-30T16:40:36.330+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:40:36.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 250
2026-01-30T16:40:36.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 250 and transaction ID: TXN-80dee612-fbea-43cf-aafb-93fecd13ba55
2026-01-30T16:40:36.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 216
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 216
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 470
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=291 ms | success=true
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:36.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:36.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 471
2026-01-30T16:40:36.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=471, status=PREPARED, latency=94ms
2026-01-30T16:40:36.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:36.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:36.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 251
2026-01-30T16:40:36.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=251, status=PRE_AUTHORIZED, latency=62ms
2026-01-30T16:40:36.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:36.556+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:36.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 217
2026-01-30T16:40:36.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=217, status=RESERVED, latency=31ms
2026-01-30T16:40:36.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:36.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:36.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/471/commit
2026-01-30T16:40:36.603+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 471
2026-01-30T16:40:36.603+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=471, latency=16ms
2026-01-30T16:40:36.603+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:36.603+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/251/commit
2026-01-30T16:40:36.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 251
2026-01-30T16:40:36.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=251, latency=16ms
2026-01-30T16:40:36.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:36.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/217/commit
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 217
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=217, latency=15ms
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=230 ms | success=true
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:36.634+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:36.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 472
2026-01-30T16:40:36.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=472, status=PREPARED, latency=95ms
2026-01-30T16:40:36.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:36.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:36.791+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 252
2026-01-30T16:40:36.791+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=252, status=PRE_AUTHORIZED, latency=62ms
2026-01-30T16:40:36.791+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:36.791+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:36.822+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 218
2026-01-30T16:40:36.822+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=218, status=RESERVED, latency=31ms
2026-01-30T16:40:36.822+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:36.822+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:36.822+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/472/commit
2026-01-30T16:40:36.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 472
2026-01-30T16:40:36.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=472, latency=17ms
2026-01-30T16:40:36.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:36.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/252/commit
2026-01-30T16:40:36.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 252
2026-01-30T16:40:36.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=252, latency=15ms
2026-01-30T16:40:36.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:36.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/218/commit
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 218
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=218, latency=16ms
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=228 ms | success=true
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:36.870+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:36.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 473
2026-01-30T16:40:36.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=473, status=PREPARED, latency=94ms
2026-01-30T16:40:36.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:36.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:36.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 253
2026-01-30T16:40:36.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=253, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:40:36.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:36.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:37.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 219
2026-01-30T16:40:37.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=219, status=RESERVED, latency=32ms
2026-01-30T16:40:37.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:37.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:37.011+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/473/commit
2026-01-30T16:40:37.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 473
2026-01-30T16:40:37.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=473, latency=15ms
2026-01-30T16:40:37.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:37.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/253/commit
2026-01-30T16:40:37.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 253
2026-01-30T16:40:37.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=253, latency=16ms
2026-01-30T16:40:37.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:37.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/219/commit
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 219
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=219, latency=15ms
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=183 ms | success=true
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:37.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:37.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 474
2026-01-30T16:40:37.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=474, status=PREPARED, latency=94ms
2026-01-30T16:40:37.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:37.151+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:37.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 254
2026-01-30T16:40:37.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=254, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:37.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:37.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:37.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 220
2026-01-30T16:40:37.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=220, status=RESERVED, latency=15ms
2026-01-30T16:40:37.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:37.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:37.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/474/commit
2026-01-30T16:40:37.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 474
2026-01-30T16:40:37.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=474, latency=16ms
2026-01-30T16:40:37.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:37.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/254/commit
2026-01-30T16:40:37.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 254
2026-01-30T16:40:37.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=254, latency=16ms
2026-01-30T16:40:37.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:37.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/220/commit
2026-01-30T16:40:37.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 220
2026-01-30T16:40:37.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=220, latency=15ms
2026-01-30T16:40:37.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:37.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=172 ms | success=true
2026-01-30T16:40:37.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:37.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:37.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:37.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:37.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 475
2026-01-30T16:40:37.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=475, status=PREPARED, latency=96ms
2026-01-30T16:40:37.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:37.341+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:37.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 255
2026-01-30T16:40:37.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=255, status=PRE_AUTHORIZED, latency=140ms
2026-01-30T16:40:37.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:37.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:37.513+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:37.5131963","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:37.5131963","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:40:37.528+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:40:37.5131963","path":"/api/shipments/prepare"}"
2026-01-30T16:40:37.528+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/255/abort
2026-01-30T16:40:37.560+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 255
2026-01-30T16:40:37.560+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/475/abort
2026-01-30T16:40:37.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 475
2026-01-30T16:40:37.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 78 ms with 2 compensations
2026-01-30T16:40:37.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=365 ms | success=false
2026-01-30T16:40:37.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:37.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:37.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:37.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:37.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 476
2026-01-30T16:40:37.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=476, status=PREPARED, latency=92ms
2026-01-30T16:40:37.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:37.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:37.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 256
2026-01-30T16:40:37.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=256, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:40:37.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:37.729+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:37.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 221
2026-01-30T16:40:37.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=221, status=RESERVED, latency=63ms
2026-01-30T16:40:37.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:37.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:37.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/476/commit
2026-01-30T16:40:37.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 476
2026-01-30T16:40:37.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=476, latency=15ms
2026-01-30T16:40:37.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:37.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/256/commit
2026-01-30T16:40:37.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 256
2026-01-30T16:40:37.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=256, latency=16ms
2026-01-30T16:40:37.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:37.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/221/commit
2026-01-30T16:40:37.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 221
2026-01-30T16:40:37.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=221, latency=15ms
2026-01-30T16:40:37.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:37.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=215 ms | success=true
2026-01-30T16:40:37.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:37.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:37.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:37.854+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:37.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 477
2026-01-30T16:40:37.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=477, status=PREPARED, latency=94ms
2026-01-30T16:40:37.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:37.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:37.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 257
2026-01-30T16:40:37.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=257, status=PRE_AUTHORIZED, latency=25ms
2026-01-30T16:40:37.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:37.973+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:38.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 222
2026-01-30T16:40:38.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=222, status=RESERVED, latency=31ms
2026-01-30T16:40:38.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:38.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:38.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/477/commit
2026-01-30T16:40:38.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 477
2026-01-30T16:40:38.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=477, latency=16ms
2026-01-30T16:40:38.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:38.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/257/commit
2026-01-30T16:40:38.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 257
2026-01-30T16:40:38.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=257, latency=15ms
2026-01-30T16:40:38.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:38.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/222/commit
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 222
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=222, latency=16ms
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=202 ms | success=true
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:38.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:38.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 478
2026-01-30T16:40:38.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=478, status=PREPARED, latency=109ms
2026-01-30T16:40:38.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:38.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:38.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 258
2026-01-30T16:40:38.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=258, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:38.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:38.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:38.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 223
2026-01-30T16:40:38.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=223, status=RESERVED, latency=16ms
2026-01-30T16:40:38.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:38.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:38.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/478/commit
2026-01-30T16:40:38.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 478
2026-01-30T16:40:38.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=478, latency=31ms
2026-01-30T16:40:38.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:38.223+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/258/commit
2026-01-30T16:40:38.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 258
2026-01-30T16:40:38.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=258, latency=15ms
2026-01-30T16:40:38.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:38.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/223/commit
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 223
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=223, latency=16ms
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=197 ms | success=true
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:38.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:38.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 479
2026-01-30T16:40:38.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=479, status=PREPARED, latency=112ms
2026-01-30T16:40:38.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:38.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:38.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 259
2026-01-30T16:40:38.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=259, status=PRE_AUTHORIZED, latency=78ms
2026-01-30T16:40:38.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:38.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:38.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 224
2026-01-30T16:40:38.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=224, status=RESERVED, latency=67ms
2026-01-30T16:40:38.512+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:38.512+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:38.512+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/479/commit
2026-01-30T16:40:38.569+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 479
2026-01-30T16:40:38.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=479, latency=60ms
2026-01-30T16:40:38.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:38.604+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/259/commit
2026-01-30T16:40:38.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 259
2026-01-30T16:40:38.674+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=259, latency=92ms
2026-01-30T16:40:38.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:38.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/224/commit
2026-01-30T16:40:38.722+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 224
2026-01-30T16:40:38.723+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=224, latency=48ms
2026-01-30T16:40:38.724+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:38.725+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=455 ms | success=true
2026-01-30T16:40:38.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:38.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:38.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:38.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:38.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 480
2026-01-30T16:40:38.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=480, status=PREPARED, latency=117ms
2026-01-30T16:40:38.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:38.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:38.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 260
2026-01-30T16:40:38.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=260, status=PRE_AUTHORIZED, latency=78ms
2026-01-30T16:40:38.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:38.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:38.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 225
2026-01-30T16:40:38.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=225, status=RESERVED, latency=47ms
2026-01-30T16:40:38.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:38.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:38.988+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/480/commit
2026-01-30T16:40:39.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 480
2026-01-30T16:40:39.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=480, latency=16ms
2026-01-30T16:40:39.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:39.004+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/260/commit
2026-01-30T16:40:39.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 260
2026-01-30T16:40:39.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=260, latency=16ms
2026-01-30T16:40:39.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:39.020+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/225/commit
2026-01-30T16:40:39.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 225
2026-01-30T16:40:39.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=225, latency=15ms
2026-01-30T16:40:39.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:39.035+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=302 ms | success=true
2026-01-30T16:40:39.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:39.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:39.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:39.066+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:39.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 481
2026-01-30T16:40:39.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=481, status=PREPARED, latency=98ms
2026-01-30T16:40:39.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:39.164+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:39.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 261
2026-01-30T16:40:39.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=261, status=PRE_AUTHORIZED, latency=86ms
2026-01-30T16:40:39.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:39.250+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:39.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 226
2026-01-30T16:40:39.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=226, status=RESERVED, latency=33ms
2026-01-30T16:40:39.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:39.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:39.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/481/commit
2026-01-30T16:40:39.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 481
2026-01-30T16:40:39.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=481, latency=15ms
2026-01-30T16:40:39.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:39.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/261/commit
2026-01-30T16:40:39.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 261
2026-01-30T16:40:39.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=261, latency=16ms
2026-01-30T16:40:39.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:39.314+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/226/commit
2026-01-30T16:40:39.345+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 226
2026-01-30T16:40:39.345+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=226, latency=31ms
2026-01-30T16:40:39.345+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:39.345+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=278 ms | success=true
2026-01-30T16:40:39.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:39.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:39.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:39.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:39.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 482
2026-01-30T16:40:39.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=482, status=PREPARED, latency=113ms
2026-01-30T16:40:39.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:39.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:39.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 262
2026-01-30T16:40:39.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=262, status=PRE_AUTHORIZED, latency=63ms
2026-01-30T16:40:39.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:39.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:39.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 227
2026-01-30T16:40:39.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=227, status=RESERVED, latency=31ms
2026-01-30T16:40:39.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:39.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:39.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/482/commit
2026-01-30T16:40:39.584+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 482
2026-01-30T16:40:39.584+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=482, latency=16ms
2026-01-30T16:40:39.584+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:39.584+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/262/commit
2026-01-30T16:40:39.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 262
2026-01-30T16:40:39.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=262, latency=15ms
2026-01-30T16:40:39.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:39.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/227/commit
2026-01-30T16:40:39.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 227
2026-01-30T16:40:39.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=227, latency=16ms
2026-01-30T16:40:39.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:39.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=266 ms | success=true
2026-01-30T16:40:39.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:39.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:39.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:39.646+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:40.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 483
2026-01-30T16:40:40.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=483, status=PREPARED, latency=363ms
2026-01-30T16:40:40.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:40.010+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:40.047+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 263
2026-01-30T16:40:40.047+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=263, status=PRE_AUTHORIZED, latency=38ms
2026-01-30T16:40:40.047+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:40.047+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:40.070+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 228
2026-01-30T16:40:40.070+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=228, status=RESERVED, latency=23ms
2026-01-30T16:40:40.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:40.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:40.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/483/commit
2026-01-30T16:40:40.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 483
2026-01-30T16:40:40.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=483, latency=7ms
2026-01-30T16:40:40.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:40.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/263/commit
2026-01-30T16:40:40.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 263
2026-01-30T16:40:40.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=263, latency=8ms
2026-01-30T16:40:40.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:40.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/228/commit
2026-01-30T16:40:40.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 228
2026-01-30T16:40:40.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=228, latency=16ms
2026-01-30T16:40:40.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:40.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=454 ms | success=true
2026-01-30T16:40:40.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:40.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:40.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:40.110+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:40.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 484
2026-01-30T16:40:40.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=484, status=PREPARED, latency=82ms
2026-01-30T16:40:40.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:40.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:40.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 264
2026-01-30T16:40:40.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=264, status=PRE_AUTHORIZED, latency=20ms
2026-01-30T16:40:40.213+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:40.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:40.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 229
2026-01-30T16:40:40.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=229, status=RESERVED, latency=14ms
2026-01-30T16:40:40.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:40.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:40.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/484/commit
2026-01-30T16:40:40.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 484
2026-01-30T16:40:40.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=484, latency=8ms
2026-01-30T16:40:40.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:40.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/264/commit
2026-01-30T16:40:40.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 264
2026-01-30T16:40:40.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=264, latency=9ms
2026-01-30T16:40:40.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:40.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/229/commit
2026-01-30T16:40:40.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 229
2026-01-30T16:40:40.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=229, latency=9ms
2026-01-30T16:40:40.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:40.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=143 ms | success=true
2026-01-30T16:40:40.267+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:40.267+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:40.267+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:40.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:40.347+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 485
2026-01-30T16:40:40.347+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=485, status=PREPARED, latency=80ms
2026-01-30T16:40:40.347+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:40.347+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:40.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 265
2026-01-30T16:40:40.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=265, status=PRE_AUTHORIZED, latency=19ms
2026-01-30T16:40:40.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:40.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:40.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 230
2026-01-30T16:40:40.410+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=230, status=RESERVED, latency=44ms
2026-01-30T16:40:40.410+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:40.410+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:40.410+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/485/commit
2026-01-30T16:40:40.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 485
2026-01-30T16:40:40.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=485, latency=4ms
2026-01-30T16:40:40.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:40.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/265/commit
2026-01-30T16:40:40.431+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 265
2026-01-30T16:40:40.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=265, latency=18ms
2026-01-30T16:40:40.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:40.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/230/commit
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 230
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=230, latency=7ms
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=178 ms | success=true
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:40.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:40.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 486
2026-01-30T16:40:40.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=486, status=PREPARED, latency=94ms
2026-01-30T16:40:40.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:40.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:40.555+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:40.5400154","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:40.5400154","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:40:40.587+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:40:40.5400154","path":"/api/payments/prepare"}"
2026-01-30T16:40:40.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/486/abort
2026-01-30T16:40:40.627+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 486
2026-01-30T16:40:40.627+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 35 ms with 1 compensations
2026-01-30T16:40:40.627+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=183 ms | success=false
2026-01-30T16:40:40.627+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:40.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:40.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:40.643+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:40.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 487
2026-01-30T16:40:40.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=487, status=PREPARED, latency=107ms
2026-01-30T16:40:40.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:40.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:40.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 266
2026-01-30T16:40:40.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=266, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:40:40.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:40.781+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:40.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 231
2026-01-30T16:40:40.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=231, status=RESERVED, latency=24ms
2026-01-30T16:40:40.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:40.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:40.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/487/commit
2026-01-30T16:40:40.819+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 487
2026-01-30T16:40:40.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=487, latency=15ms
2026-01-30T16:40:40.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:40.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/266/commit
2026-01-30T16:40:40.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 266
2026-01-30T16:40:40.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=266, latency=9ms
2026-01-30T16:40:40.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:40.830+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/231/commit
2026-01-30T16:40:40.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 231
2026-01-30T16:40:40.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=231, latency=9ms
2026-01-30T16:40:40.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:40.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=194 ms | success=true
2026-01-30T16:40:40.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:40.845+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:40.845+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:40.845+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:40.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 488
2026-01-30T16:40:40.923+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=488, status=PREPARED, latency=78ms
2026-01-30T16:40:40.924+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:40.924+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:40.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 267
2026-01-30T16:40:40.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=267, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:40:40.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:40.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:40.959+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 232
2026-01-30T16:40:40.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=232, status=RESERVED, latency=19ms
2026-01-30T16:40:40.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:40.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:40.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/488/commit
2026-01-30T16:40:40.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 488
2026-01-30T16:40:40.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=488, latency=9ms
2026-01-30T16:40:40.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:40.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/267/commit
2026-01-30T16:40:41.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 267
2026-01-30T16:40:41.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=267, latency=71ms
2026-01-30T16:40:41.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:41.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/232/commit
2026-01-30T16:40:41.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 232
2026-01-30T16:40:41.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=232, latency=31ms
2026-01-30T16:40:41.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:41.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=226 ms | success=true
2026-01-30T16:40:41.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:41.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:41.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:41.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:41.281+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 489
2026-01-30T16:40:41.281+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=489, status=PREPARED, latency=201ms
2026-01-30T16:40:41.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:41.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:41.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 268
2026-01-30T16:40:41.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=268, status=PRE_AUTHORIZED, latency=19ms
2026-01-30T16:40:41.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:41.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:41.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 233
2026-01-30T16:40:41.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=233, status=RESERVED, latency=15ms
2026-01-30T16:40:41.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:41.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:41.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/489/commit
2026-01-30T16:40:41.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 489
2026-01-30T16:40:41.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=489, latency=9ms
2026-01-30T16:40:41.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:41.325+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/268/commit
2026-01-30T16:40:41.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 268
2026-01-30T16:40:41.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=268, latency=11ms
2026-01-30T16:40:41.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:41.337+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/233/commit
2026-01-30T16:40:41.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 233
2026-01-30T16:40:41.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=233, latency=8ms
2026-01-30T16:40:41.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:41.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=264 ms | success=true
2026-01-30T16:40:41.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:40:41.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:40:41.351+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:40:41.351+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:40:41.422+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 490
2026-01-30T16:40:41.422+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=490, status=PREPARED, latency=71ms
2026-01-30T16:40:41.422+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:40:41.422+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:40:41.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 269
2026-01-30T16:40:41.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=269, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:40:41.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:40:41.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:40:41.514+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 234
2026-01-30T16:40:41.514+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=234, status=RESERVED, latency=77ms
2026-01-30T16:40:41.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:40:41.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:40:41.516+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/490/commit
2026-01-30T16:40:41.527+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 490
2026-01-30T16:40:41.527+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=490, latency=11ms
2026-01-30T16:40:41.527+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:40:41.527+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/269/commit
2026-01-30T16:40:41.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 269
2026-01-30T16:40:41.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=269, latency=8ms
2026-01-30T16:40:41.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:40:41.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/234/commit
2026-01-30T16:40:41.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 234
2026-01-30T16:40:41.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=234, latency=4ms
2026-01-30T16:40:41.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:40:41.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=193 ms | success=true
2026-01-30T16:42:41.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:41.710+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:41.711+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:41.799+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 491
2026-01-30T16:42:41.801+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 491
2026-01-30T16:42:41.802+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:41.831+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 270
2026-01-30T16:42:41.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 270 and transaction ID: TXN-9a5edbf8-2076-4494-abd9-afbd5a31bd0e
2026-01-30T16:42:41.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:41.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 235
2026-01-30T16:42:41.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 235
2026-01-30T16:42:41.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 491
2026-01-30T16:42:41.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=153 ms | success=true
2026-01-30T16:42:41.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:41.876+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:41.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:42.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 492
2026-01-30T16:42:42.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 492
2026-01-30T16:42:42.007+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:42.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 271
2026-01-30T16:42:42.043+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 271 and transaction ID: TXN-4b2b2a44-c881-4c17-a3ea-1bea3157b6a6
2026-01-30T16:42:42.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:42.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 236
2026-01-30T16:42:42.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 236
2026-01-30T16:42:42.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 492
2026-01-30T16:42:42.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=203 ms | success=true
2026-01-30T16:42:42.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:42.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:42.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:42.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 493
2026-01-30T16:42:42.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 493
2026-01-30T16:42:42.210+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:42.247+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 272
2026-01-30T16:42:42.249+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 272 and transaction ID: TXN-2eb6206f-3076-43fa-b5bb-4e2562fd463e
2026-01-30T16:42:42.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:42.283+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 237
2026-01-30T16:42:42.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 237
2026-01-30T16:42:42.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 493
2026-01-30T16:42:42.286+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=192 ms | success=true
2026-01-30T16:42:42.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:42.298+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:42.299+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:42.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 494
2026-01-30T16:42:42.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 494
2026-01-30T16:42:42.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:42.462+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 273
2026-01-30T16:42:42.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 273 and transaction ID: TXN-d542f741-e388-467a-9cbf-65972723465a
2026-01-30T16:42:42.467+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:42.553+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 238
2026-01-30T16:42:42.557+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 238
2026-01-30T16:42:42.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 494
2026-01-30T16:42:42.569+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=270 ms | success=true
2026-01-30T16:42:42.584+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:42.598+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:42.598+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:42.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 495
2026-01-30T16:42:42.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 495
2026-01-30T16:42:42.709+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:42.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 274
2026-01-30T16:42:42.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 274 and transaction ID: TXN-f03a4eab-2e0f-4932-8f44-85d822380528
2026-01-30T16:42:42.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:42.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 239
2026-01-30T16:42:42.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 239
2026-01-30T16:42:42.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 495
2026-01-30T16:42:42.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=173 ms | success=true
2026-01-30T16:42:42.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:42.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:42.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:42.880+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 496
2026-01-30T16:42:42.881+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 496
2026-01-30T16:42:42.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:42.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 275
2026-01-30T16:42:42.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 275 and transaction ID: TXN-e90aaae2-c53b-4b7e-ba1a-ee0240af8cb2
2026-01-30T16:42:42.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:42.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 240
2026-01-30T16:42:42.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 240
2026-01-30T16:42:42.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 496
2026-01-30T16:42:42.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=155 ms | success=true
2026-01-30T16:42:42.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:42.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:42.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:43.056+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 497
2026-01-30T16:42:43.056+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 497
2026-01-30T16:42:43.058+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:43.082+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 276
2026-01-30T16:42:43.082+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 276 and transaction ID: TXN-bc756c80-7787-45fc-9b5c-a8de3c262f1e
2026-01-30T16:42:43.082+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:43.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 241
2026-01-30T16:42:43.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 241
2026-01-30T16:42:43.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 497
2026-01-30T16:42:43.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=182 ms | success=true
2026-01-30T16:42:43.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:43.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:43.144+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:43.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 498
2026-01-30T16:42:43.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 498
2026-01-30T16:42:43.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:43.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 277
2026-01-30T16:42:43.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 277 and transaction ID: TXN-ff265266-bf26-4c07-8551-67b94e45011e
2026-01-30T16:42:43.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:43.273+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 242
2026-01-30T16:42:43.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 242
2026-01-30T16:42:43.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 498
2026-01-30T16:42:43.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=131 ms | success=true
2026-01-30T16:42:43.281+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:43.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:43.282+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:43.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 499
2026-01-30T16:42:43.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 499
2026-01-30T16:42:43.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:43.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 278
2026-01-30T16:42:43.420+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 278 and transaction ID: TXN-6ede97e1-7f91-4644-a82b-4992097c9449
2026-01-30T16:42:43.421+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:43.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 243
2026-01-30T16:42:43.444+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 243
2026-01-30T16:42:43.445+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 499
2026-01-30T16:42:43.445+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=163 ms | success=true
2026-01-30T16:42:43.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:43.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:43.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:43.541+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 500
2026-01-30T16:42:43.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 500
2026-01-30T16:42:43.543+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:43.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 279
2026-01-30T16:42:43.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 279 and transaction ID: TXN-f1faa3c7-be6f-4c15-8a0b-caeeda810545
2026-01-30T16:42:43.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:43.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 244
2026-01-30T16:42:43.613+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 244
2026-01-30T16:42:43.616+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 500
2026-01-30T16:42:43.616+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=160 ms | success=true
2026-01-30T16:42:43.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:43.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:43.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:43.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 501
2026-01-30T16:42:43.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 501
2026-01-30T16:42:43.747+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:43.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 280
2026-01-30T16:42:43.821+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 280 and transaction ID: TXN-cb7d95a6-bdb1-4158-8d85-fdeba9ee9ea7
2026-01-30T16:42:43.824+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:43.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 245
2026-01-30T16:42:43.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 245
2026-01-30T16:42:43.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 501
2026-01-30T16:42:43.900+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=273 ms | success=true
2026-01-30T16:42:43.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:43.910+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:43.910+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:43.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 502
2026-01-30T16:42:43.999+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 502
2026-01-30T16:42:44.001+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:44.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 281
2026-01-30T16:42:44.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 281 and transaction ID: TXN-d666c794-4f60-49bc-b958-18f8231e207a
2026-01-30T16:42:44.032+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:44.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 246
2026-01-30T16:42:44.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 246
2026-01-30T16:42:44.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 502
2026-01-30T16:42:44.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=151 ms | success=true
2026-01-30T16:42:44.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:44.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:44.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:44.161+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 503
2026-01-30T16:42:44.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 503
2026-01-30T16:42:44.163+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:44.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 282
2026-01-30T16:42:44.192+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 282 and transaction ID: TXN-2e02d78a-6901-4539-8d83-25715cd8a7ef
2026-01-30T16:42:44.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:44.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 247
2026-01-30T16:42:44.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 247
2026-01-30T16:42:44.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 503
2026-01-30T16:42:44.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=155 ms | success=true
2026-01-30T16:42:44.232+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:44.232+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:44.232+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:44.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 504
2026-01-30T16:42:44.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 504
2026-01-30T16:42:44.339+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:44.382+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 283
2026-01-30T16:42:44.383+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 283 and transaction ID: TXN-b9ef93f6-6dca-4c87-ba22-82e62b87e5dc
2026-01-30T16:42:44.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:44.423+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 248
2026-01-30T16:42:44.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 248
2026-01-30T16:42:44.426+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 504
2026-01-30T16:42:44.427+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=188 ms | success=true
2026-01-30T16:42:44.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:44.436+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:44.436+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:44.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 505
2026-01-30T16:42:44.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 505
2026-01-30T16:42:44.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:44.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 284
2026-01-30T16:42:44.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 284 and transaction ID: TXN-33faad70-3245-4674-8529-317513988f1b
2026-01-30T16:42:44.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:44.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 249
2026-01-30T16:42:44.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 249
2026-01-30T16:42:44.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 505
2026-01-30T16:42:44.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=179 ms | success=true
2026-01-30T16:42:44.624+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:44.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:44.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:44.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 506
2026-01-30T16:42:44.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 506
2026-01-30T16:42:44.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:44.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 285
2026-01-30T16:42:44.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 285 and transaction ID: TXN-be6b981d-4fdf-4590-87d5-c015a8ad4c37
2026-01-30T16:42:44.737+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:44.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 250
2026-01-30T16:42:44.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 250
2026-01-30T16:42:44.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 506
2026-01-30T16:42:44.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=138 ms | success=true
2026-01-30T16:42:44.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:44.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:44.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:44.948+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 507
2026-01-30T16:42:44.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 507
2026-01-30T16:42:44.964+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:45.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 286
2026-01-30T16:42:45.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 286 and transaction ID: TXN-1b5af144-cd46-4696-a289-818f9f933279
2026-01-30T16:42:45.042+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:45.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 251
2026-01-30T16:42:45.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 251
2026-01-30T16:42:45.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 507
2026-01-30T16:42:45.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=307 ms | success=true
2026-01-30T16:42:45.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:45.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:45.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:45.211+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 508
2026-01-30T16:42:45.211+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 508
2026-01-30T16:42:45.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:45.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 287
2026-01-30T16:42:45.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 287 and transaction ID: TXN-4bbdd8d9-dde5-4586-86db-ca7a249e03ad
2026-01-30T16:42:45.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:45.362+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 252
2026-01-30T16:42:45.362+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 252
2026-01-30T16:42:45.362+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 508
2026-01-30T16:42:45.362+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=269 ms | success=true
2026-01-30T16:42:45.386+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:45.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:45.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:45.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 509
2026-01-30T16:42:45.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 509
2026-01-30T16:42:45.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:45.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 288
2026-01-30T16:42:45.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 288 and transaction ID: TXN-2457eeaf-c321-41c9-b831-6d1206001fc6
2026-01-30T16:42:45.486+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 253
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 253
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 509
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=132 ms | success=true
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:42:45.517+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:42:45.617+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 510
2026-01-30T16:42:45.617+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 510
2026-01-30T16:42:45.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:42:45.630+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:45.6289733","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:45.6289733","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:42:45.632+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:45.6289733","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:45.6289733","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:45.6289733","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:42:45.632+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 510
2026-01-30T16:42:45.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=176 ms | success=false
2026-01-30T16:42:45.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:45.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:45.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:45.694+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:45.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 511
2026-01-30T16:42:45.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=511, status=PREPARED, latency=103ms
2026-01-30T16:42:45.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:45.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:45.811+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 289
2026-01-30T16:42:45.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=289, status=PRE_AUTHORIZED, latency=14ms
2026-01-30T16:42:45.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:45.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:45.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 254
2026-01-30T16:42:45.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=254, status=RESERVED, latency=3ms
2026-01-30T16:42:45.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:45.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:45.815+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/511/commit
2026-01-30T16:42:45.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 511
2026-01-30T16:42:45.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=511, latency=31ms
2026-01-30T16:42:45.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:45.846+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/289/commit
2026-01-30T16:42:45.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 289
2026-01-30T16:42:45.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=289, latency=16ms
2026-01-30T16:42:45.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:45.862+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/254/commit
2026-01-30T16:42:45.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 254
2026-01-30T16:42:45.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=254, latency=15ms
2026-01-30T16:42:45.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:45.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=181 ms | success=true
2026-01-30T16:42:45.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:45.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:45.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:45.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:45.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 512
2026-01-30T16:42:45.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=512, status=PREPARED, latency=94ms
2026-01-30T16:42:45.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:45.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:46.018+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 290
2026-01-30T16:42:46.018+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=290, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:42:46.018+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:46.018+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:46.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 255
2026-01-30T16:42:46.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=255, status=RESERVED, latency=47ms
2026-01-30T16:42:46.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:46.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:46.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/512/commit
2026-01-30T16:42:46.127+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 512
2026-01-30T16:42:46.127+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=512, latency=62ms
2026-01-30T16:42:46.127+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:46.127+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/290/commit
2026-01-30T16:42:46.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 290
2026-01-30T16:42:46.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=290, latency=58ms
2026-01-30T16:42:46.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:46.185+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/255/commit
2026-01-30T16:42:46.248+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 255
2026-01-30T16:42:46.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=255, latency=66ms
2026-01-30T16:42:46.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:46.251+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=354 ms | success=true
2026-01-30T16:42:46.267+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:46.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:46.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:46.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:46.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 513
2026-01-30T16:42:46.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=513, status=PREPARED, latency=101ms
2026-01-30T16:42:46.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:46.369+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:46.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 291
2026-01-30T16:42:46.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=291, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:42:46.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:46.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:46.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 256
2026-01-30T16:42:46.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=256, status=RESERVED, latency=32ms
2026-01-30T16:42:46.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:46.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:46.432+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/513/commit
2026-01-30T16:42:46.447+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 513
2026-01-30T16:42:46.447+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=513, latency=15ms
2026-01-30T16:42:46.447+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:46.447+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/291/commit
2026-01-30T16:42:46.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 291
2026-01-30T16:42:46.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=291, latency=16ms
2026-01-30T16:42:46.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:46.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/256/commit
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 256
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=256, latency=15ms
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=220 ms | success=true
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:46.478+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:46.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 514
2026-01-30T16:42:46.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=514, status=PREPARED, latency=116ms
2026-01-30T16:42:46.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:46.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:46.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 292
2026-01-30T16:42:46.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=292, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:42:46.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:46.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:46.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 257
2026-01-30T16:42:46.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=257, status=RESERVED, latency=16ms
2026-01-30T16:42:46.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:46.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:46.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/514/commit
2026-01-30T16:42:46.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 514
2026-01-30T16:42:46.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=514, latency=15ms
2026-01-30T16:42:46.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:46.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/292/commit
2026-01-30T16:42:46.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 292
2026-01-30T16:42:46.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=292, latency=16ms
2026-01-30T16:42:46.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:46.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/257/commit
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 257
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=257, latency=15ms
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=186 ms | success=true
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:46.672+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:46.791+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 515
2026-01-30T16:42:46.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=515, status=PREPARED, latency=120ms
2026-01-30T16:42:46.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:46.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:46.827+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 293
2026-01-30T16:42:46.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=293, status=PRE_AUTHORIZED, latency=35ms
2026-01-30T16:42:46.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:46.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:46.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 258
2026-01-30T16:42:46.877+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=258, status=RESERVED, latency=49ms
2026-01-30T16:42:46.881+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:46.881+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:46.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/515/commit
2026-01-30T16:42:46.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 515
2026-01-30T16:42:46.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=515, latency=17ms
2026-01-30T16:42:46.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:46.899+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/293/commit
2026-01-30T16:42:46.913+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 293
2026-01-30T16:42:46.915+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=293, latency=17ms
2026-01-30T16:42:46.915+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:46.915+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/258/commit
2026-01-30T16:42:46.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 258
2026-01-30T16:42:46.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=258, latency=15ms
2026-01-30T16:42:46.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:46.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=254 ms | success=true
2026-01-30T16:42:46.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:46.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:46.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:46.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:47.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 516
2026-01-30T16:42:47.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=516, status=PREPARED, latency=100ms
2026-01-30T16:42:47.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:47.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:47.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 294
2026-01-30T16:42:47.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=294, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:42:47.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:47.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:47.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 259
2026-01-30T16:42:47.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=259, status=RESERVED, latency=15ms
2026-01-30T16:42:47.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:47.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:47.092+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/516/commit
2026-01-30T16:42:47.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 516
2026-01-30T16:42:47.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=516, latency=16ms
2026-01-30T16:42:47.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:47.108+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/294/commit
2026-01-30T16:42:47.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 294
2026-01-30T16:42:47.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=294, latency=16ms
2026-01-30T16:42:47.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:47.124+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/259/commit
2026-01-30T16:42:47.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 259
2026-01-30T16:42:47.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=259, latency=22ms
2026-01-30T16:42:47.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:47.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=199 ms | success=true
2026-01-30T16:42:47.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:47.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:47.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:47.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:47.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 517
2026-01-30T16:42:47.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=517, status=PREPARED, latency=90ms
2026-01-30T16:42:47.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:47.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:47.328+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 295
2026-01-30T16:42:47.328+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=295, status=PRE_AUTHORIZED, latency=85ms
2026-01-30T16:42:47.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:47.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:47.440+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 260
2026-01-30T16:42:47.441+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=260, status=RESERVED, latency=112ms
2026-01-30T16:42:47.442+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:47.442+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:47.442+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/517/commit
2026-01-30T16:42:47.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 517
2026-01-30T16:42:47.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=517, latency=18ms
2026-01-30T16:42:47.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:47.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/295/commit
2026-01-30T16:42:47.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 295
2026-01-30T16:42:47.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=295, latency=10ms
2026-01-30T16:42:47.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:47.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/260/commit
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 260
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=260, latency=3ms
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=327 ms | success=true
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:47.473+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:47.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 518
2026-01-30T16:42:47.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=518, status=PREPARED, latency=105ms
2026-01-30T16:42:47.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:47.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:47.593+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:47.5939422","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:47.5939422","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:42:47.593+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:47.5939422","path":"/api/payments/prepare"}"
2026-01-30T16:42:47.593+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/518/abort
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 518
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 32 ms with 1 compensations
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=147 ms | success=false
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:47.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:47.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 519
2026-01-30T16:42:47.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=519, status=PREPARED, latency=105ms
2026-01-30T16:42:47.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:47.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:47.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 296
2026-01-30T16:42:47.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=296, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:42:47.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:47.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:47.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 261
2026-01-30T16:42:47.785+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=261, status=RESERVED, latency=39ms
2026-01-30T16:42:47.785+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:47.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:47.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/519/commit
2026-01-30T16:42:47.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 519
2026-01-30T16:42:47.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=519, latency=9ms
2026-01-30T16:42:47.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:47.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/296/commit
2026-01-30T16:42:47.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 296
2026-01-30T16:42:47.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=296, latency=10ms
2026-01-30T16:42:47.805+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:47.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/261/commit
2026-01-30T16:42:47.831+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 261
2026-01-30T16:42:47.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=261, latency=27ms
2026-01-30T16:42:47.834+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:47.834+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=195 ms | success=true
2026-01-30T16:42:47.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:47.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:47.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:47.839+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:47.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 520
2026-01-30T16:42:47.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=520, status=PREPARED, latency=89ms
2026-01-30T16:42:47.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:47.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:47.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 297
2026-01-30T16:42:47.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=297, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:42:47.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:47.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:47.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 262
2026-01-30T16:42:47.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=262, status=RESERVED, latency=31ms
2026-01-30T16:42:47.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:47.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:47.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/520/commit
2026-01-30T16:42:47.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 520
2026-01-30T16:42:47.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=520, latency=15ms
2026-01-30T16:42:47.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:47.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/297/commit
2026-01-30T16:42:48.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 297
2026-01-30T16:42:48.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=297, latency=16ms
2026-01-30T16:42:48.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:48.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/262/commit
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 262
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=262, latency=16ms
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=190 ms | success=true
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:48.022+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:48.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 521
2026-01-30T16:42:48.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=521, status=PREPARED, latency=110ms
2026-01-30T16:42:48.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:48.132+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:48.156+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:48.1518395","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:48.1518395","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:42:48.159+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:42:48.1518395","path":"/api/payments/prepare"}"
2026-01-30T16:42:48.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/521/abort
2026-01-30T16:42:48.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 521
2026-01-30T16:42:48.207+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 48 ms with 1 compensations
2026-01-30T16:42:48.208+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=172 ms | success=false
2026-01-30T16:42:48.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:48.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:48.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:48.219+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 522
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=522, status=PREPARED, latency=110ms
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 298
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=298, status=PRE_AUTHORIZED, latency=0ms
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:48.329+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:48.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 263
2026-01-30T16:42:48.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=263, status=RESERVED, latency=45ms
2026-01-30T16:42:48.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:48.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:48.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/522/commit
2026-01-30T16:42:48.390+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 522
2026-01-30T16:42:48.406+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=522, latency=32ms
2026-01-30T16:42:48.406+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:48.406+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/298/commit
2026-01-30T16:42:48.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 298
2026-01-30T16:42:48.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=298, latency=31ms
2026-01-30T16:42:48.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:48.437+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/263/commit
2026-01-30T16:42:48.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 263
2026-01-30T16:42:48.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=263, latency=62ms
2026-01-30T16:42:48.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:48.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=290 ms | success=true
2026-01-30T16:42:48.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:48.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:48.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:48.515+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:48.666+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 523
2026-01-30T16:42:48.666+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=523, status=PREPARED, latency=151ms
2026-01-30T16:42:48.682+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:48.682+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:48.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 299
2026-01-30T16:42:48.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=299, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:42:48.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:48.697+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:48.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 264
2026-01-30T16:42:48.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=264, status=RESERVED, latency=48ms
2026-01-30T16:42:48.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:48.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:48.745+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/523/commit
2026-01-30T16:42:48.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 523
2026-01-30T16:42:48.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=523, latency=15ms
2026-01-30T16:42:48.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:48.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/299/commit
2026-01-30T16:42:48.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 299
2026-01-30T16:42:48.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=299, latency=16ms
2026-01-30T16:42:48.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:48.776+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/264/commit
2026-01-30T16:42:48.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 264
2026-01-30T16:42:48.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=264, latency=17ms
2026-01-30T16:42:48.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:48.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=277 ms | success=true
2026-01-30T16:42:48.808+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:48.808+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:48.808+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:48.808+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:48.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 524
2026-01-30T16:42:48.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=524, status=PREPARED, latency=120ms
2026-01-30T16:42:48.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:48.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:48.943+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 300
2026-01-30T16:42:48.943+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=300, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:42:48.943+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:48.943+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:48.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 265
2026-01-30T16:42:48.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=265, status=RESERVED, latency=31ms
2026-01-30T16:42:48.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:48.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:48.974+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/524/commit
2026-01-30T16:42:48.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 524
2026-01-30T16:42:48.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=524, latency=16ms
2026-01-30T16:42:48.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:48.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/300/commit
2026-01-30T16:42:49.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 300
2026-01-30T16:42:49.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=300, latency=16ms
2026-01-30T16:42:49.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:49.006+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/265/commit
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 265
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=265, latency=15ms
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=219 ms | success=true
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:49.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:49.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 525
2026-01-30T16:42:49.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=525, status=PREPARED, latency=107ms
2026-01-30T16:42:49.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:49.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:49.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 301
2026-01-30T16:42:49.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=301, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:42:49.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:49.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:49.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 266
2026-01-30T16:42:49.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=266, status=RESERVED, latency=16ms
2026-01-30T16:42:49.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:49.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:49.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/525/commit
2026-01-30T16:42:49.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 525
2026-01-30T16:42:49.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=525, latency=15ms
2026-01-30T16:42:49.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:49.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/301/commit
2026-01-30T16:42:49.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 301
2026-01-30T16:42:49.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=301, latency=16ms
2026-01-30T16:42:49.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:49.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/266/commit
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 266
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=266, latency=16ms
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=178 ms | success=true
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:49.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:49.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 526
2026-01-30T16:42:49.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=526, status=PREPARED, latency=99ms
2026-01-30T16:42:49.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:49.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:49.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 302
2026-01-30T16:42:49.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=302, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:42:49.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:49.321+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:49.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 267
2026-01-30T16:42:49.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=267, status=RESERVED, latency=31ms
2026-01-30T16:42:49.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:49.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:49.352+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/526/commit
2026-01-30T16:42:49.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 526
2026-01-30T16:42:49.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=526, latency=15ms
2026-01-30T16:42:49.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:49.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/302/commit
2026-01-30T16:42:49.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 302
2026-01-30T16:42:49.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=302, latency=17ms
2026-01-30T16:42:49.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:49.384+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/267/commit
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 267
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=267, latency=16ms
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=187 ms | success=true
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:49.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:49.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 527
2026-01-30T16:42:49.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=527, status=PREPARED, latency=111ms
2026-01-30T16:42:49.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:49.511+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:49.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 303
2026-01-30T16:42:49.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=303, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:42:49.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:49.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:49.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 268
2026-01-30T16:42:49.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=268, status=RESERVED, latency=16ms
2026-01-30T16:42:49.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:49.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:49.558+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/527/commit
2026-01-30T16:42:49.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 527
2026-01-30T16:42:49.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=527, latency=43ms
2026-01-30T16:42:49.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:49.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/303/commit
2026-01-30T16:42:49.635+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 303
2026-01-30T16:42:49.636+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=303, latency=35ms
2026-01-30T16:42:49.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:49.649+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/268/commit
2026-01-30T16:42:49.692+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 268
2026-01-30T16:42:49.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=268, latency=64ms
2026-01-30T16:42:49.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:49.714+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=302 ms | success=true
2026-01-30T16:42:49.773+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:49.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:49.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:49.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:49.928+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 528
2026-01-30T16:42:49.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=528, status=PREPARED, latency=150ms
2026-01-30T16:42:49.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:49.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:49.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 304
2026-01-30T16:42:49.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=304, status=PRE_AUTHORIZED, latency=33ms
2026-01-30T16:42:49.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:49.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:49.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 269
2026-01-30T16:42:49.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=269, status=RESERVED, latency=19ms
2026-01-30T16:42:49.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:49.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:49.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/528/commit
2026-01-30T16:42:49.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 528
2026-01-30T16:42:49.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=528, latency=6ms
2026-01-30T16:42:49.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:49.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/304/commit
2026-01-30T16:42:49.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 304
2026-01-30T16:42:49.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=304, latency=8ms
2026-01-30T16:42:49.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:49.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/269/commit
2026-01-30T16:42:50.002+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 269
2026-01-30T16:42:50.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=269, latency=8ms
2026-01-30T16:42:50.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:50.003+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=228 ms | success=true
2026-01-30T16:42:50.008+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:50.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:50.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:50.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:50.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 529
2026-01-30T16:42:50.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=529, status=PREPARED, latency=80ms
2026-01-30T16:42:50.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:50.089+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:50.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 305
2026-01-30T16:42:50.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=305, status=PRE_AUTHORIZED, latency=27ms
2026-01-30T16:42:50.116+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:50.117+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:50.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 270
2026-01-30T16:42:50.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=270, status=RESERVED, latency=15ms
2026-01-30T16:42:50.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:50.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:50.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/529/commit
2026-01-30T16:42:50.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 529
2026-01-30T16:42:50.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=529, latency=15ms
2026-01-30T16:42:50.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:50.146+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/305/commit
2026-01-30T16:42:50.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 305
2026-01-30T16:42:50.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=305, latency=24ms
2026-01-30T16:42:50.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:50.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/270/commit
2026-01-30T16:42:50.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 270
2026-01-30T16:42:50.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=270, latency=6ms
2026-01-30T16:42:50.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:50.176+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=167 ms | success=true
2026-01-30T16:42:50.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:42:50.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:42:50.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:42:50.180+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:42:50.290+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 530
2026-01-30T16:42:50.290+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=530, status=PREPARED, latency=110ms
2026-01-30T16:42:50.290+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:42:50.290+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:42:50.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 306
2026-01-30T16:42:50.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=306, status=PRE_AUTHORIZED, latency=34ms
2026-01-30T16:42:50.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:42:50.324+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:42:50.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 271
2026-01-30T16:42:50.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=271, status=RESERVED, latency=49ms
2026-01-30T16:42:50.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:42:50.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:42:50.374+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/530/commit
2026-01-30T16:42:50.379+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 530
2026-01-30T16:42:50.379+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=530, latency=5ms
2026-01-30T16:42:50.380+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:42:50.380+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/306/commit
2026-01-30T16:42:50.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 306
2026-01-30T16:42:50.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=306, latency=11ms
2026-01-30T16:42:50.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:42:50.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/271/commit
2026-01-30T16:42:50.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 271
2026-01-30T16:42:50.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=271, latency=6ms
2026-01-30T16:42:50.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:42:50.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=221 ms | success=true
2026-01-30T16:43:06.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:06.838+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:06.840+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:06.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 531
2026-01-30T16:43:06.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 531
2026-01-30T16:43:06.957+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:06.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 307
2026-01-30T16:43:06.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 307 and transaction ID: TXN-1698117b-5b2d-4ecb-bec9-664e2b784ef3
2026-01-30T16:43:06.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:07.005+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.0053041","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.0053041","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:43:07.005+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.0053041","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.0053041","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.0053041","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:43:07.020+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 307
2026-01-30T16:43:07.045+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 531
2026-01-30T16:43:07.060+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=233 ms | success=false
2026-01-30T16:43:07.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:07.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:07.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:07.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 532
2026-01-30T16:43:07.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 532
2026-01-30T16:43:07.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:07.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 308
2026-01-30T16:43:07.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 308 and transaction ID: TXN-76d09b4b-7917-4fd2-b0b5-3e0bf0509b8a
2026-01-30T16:43:07.189+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:07.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 272
2026-01-30T16:43:07.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 272
2026-01-30T16:43:07.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 532
2026-01-30T16:43:07.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=117 ms | success=true
2026-01-30T16:43:07.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:07.225+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:07.226+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:07.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 533
2026-01-30T16:43:07.311+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 533
2026-01-30T16:43:07.312+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:07.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 309
2026-01-30T16:43:07.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 309 and transaction ID: TXN-5fa9c26c-f873-4ddf-ac96-03c98030ede1
2026-01-30T16:43:07.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:07.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 273
2026-01-30T16:43:07.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 273
2026-01-30T16:43:07.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 533
2026-01-30T16:43:07.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=118 ms | success=true
2026-01-30T16:43:07.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:07.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:07.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:07.550+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 534
2026-01-30T16:43:07.550+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 534
2026-01-30T16:43:07.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:07.608+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 310
2026-01-30T16:43:07.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 310 and transaction ID: TXN-69c0ff17-5f91-4330-bffc-885feff6547f
2026-01-30T16:43:07.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:07.615+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.6157545","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.6157545","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:43:07.615+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.6157545","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.6157545","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:07.6157545","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:43:07.633+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 310
2026-01-30T16:43:07.665+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 534
2026-01-30T16:43:07.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=332 ms | success=false
2026-01-30T16:43:07.698+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:07.698+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:07.698+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:07.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 535
2026-01-30T16:43:07.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 535
2026-01-30T16:43:07.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:07.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 311
2026-01-30T16:43:07.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 311 and transaction ID: TXN-0267617e-86cf-4211-8bf2-f0d38bb244fa
2026-01-30T16:43:07.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:07.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 274
2026-01-30T16:43:07.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 274
2026-01-30T16:43:07.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 535
2026-01-30T16:43:07.837+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=139 ms | success=true
2026-01-30T16:43:07.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:07.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:07.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:07.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 536
2026-01-30T16:43:07.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 536
2026-01-30T16:43:07.943+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:07.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 312
2026-01-30T16:43:07.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 312 and transaction ID: TXN-04657184-d2f4-46c2-86c5-818105f39fba
2026-01-30T16:43:07.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:07.984+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 275
2026-01-30T16:43:07.985+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 275
2026-01-30T16:43:07.985+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 536
2026-01-30T16:43:07.985+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=134 ms | success=true
2026-01-30T16:43:07.994+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:07.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:07.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:08.096+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 537
2026-01-30T16:43:08.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 537
2026-01-30T16:43:08.098+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:08.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 313
2026-01-30T16:43:08.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 313 and transaction ID: TXN-21fb8e83-f52c-4732-ad6a-62b39b0cd658
2026-01-30T16:43:08.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 276
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 276
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 537
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=168 ms | success=true
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:08.156+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:08.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 538
2026-01-30T16:43:08.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 538
2026-01-30T16:43:08.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:08.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 314
2026-01-30T16:43:08.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 314 and transaction ID: TXN-688f3285-4e22-4904-b527-3ea524eaa7c7
2026-01-30T16:43:08.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:08.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 277
2026-01-30T16:43:08.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 277
2026-01-30T16:43:08.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 538
2026-01-30T16:43:08.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=141 ms | success=true
2026-01-30T16:43:08.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:08.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:08.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:08.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 539
2026-01-30T16:43:08.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 539
2026-01-30T16:43:08.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:08.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 315
2026-01-30T16:43:08.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 315 and transaction ID: TXN-bbe09a9d-3544-4caf-a82a-0e62930596ab
2026-01-30T16:43:08.434+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:08.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 278
2026-01-30T16:43:08.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 278
2026-01-30T16:43:08.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 539
2026-01-30T16:43:08.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=156 ms | success=true
2026-01-30T16:43:08.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:08.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:08.481+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:08.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 540
2026-01-30T16:43:08.577+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 540
2026-01-30T16:43:08.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:08.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 316
2026-01-30T16:43:08.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 316 and transaction ID: TXN-c83f73f2-36c9-4b03-ab1d-8a4e6d1ad267
2026-01-30T16:43:08.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:08.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 279
2026-01-30T16:43:08.618+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 279
2026-01-30T16:43:08.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 540
2026-01-30T16:43:08.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=127 ms | success=true
2026-01-30T16:43:08.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:08.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:08.623+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:08.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 541
2026-01-30T16:43:08.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 541
2026-01-30T16:43:08.878+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:08.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 317
2026-01-30T16:43:08.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 317 and transaction ID: TXN-4e648877-ffa1-4c58-8b33-e847a08bb2d3
2026-01-30T16:43:08.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:08.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 280
2026-01-30T16:43:08.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 280
2026-01-30T16:43:08.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 541
2026-01-30T16:43:08.941+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=326 ms | success=true
2026-01-30T16:43:08.956+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:08.956+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:08.956+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:09.047+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 542
2026-01-30T16:43:09.047+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 542
2026-01-30T16:43:09.049+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:09.073+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 318
2026-01-30T16:43:09.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 318 and transaction ID: TXN-9ea065dd-c783-44f6-b218-2aaba9885b45
2026-01-30T16:43:09.074+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:09.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 281
2026-01-30T16:43:09.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 281
2026-01-30T16:43:09.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 542
2026-01-30T16:43:09.109+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=150 ms | success=true
2026-01-30T16:43:09.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:09.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:09.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:09.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 543
2026-01-30T16:43:09.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 543
2026-01-30T16:43:09.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:09.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 319
2026-01-30T16:43:09.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 319 and transaction ID: TXN-663fdecf-1f97-4d2f-8651-84829cfd11fa
2026-01-30T16:43:09.256+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 282
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 282
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 543
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=176 ms | success=true
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:09.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:09.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 544
2026-01-30T16:43:09.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 544
2026-01-30T16:43:09.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:09.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 320
2026-01-30T16:43:09.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 320 and transaction ID: TXN-d0682567-89e7-4001-a8f2-69bb2aa1861a
2026-01-30T16:43:09.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:09.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 283
2026-01-30T16:43:09.587+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 283
2026-01-30T16:43:09.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 544
2026-01-30T16:43:09.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=287 ms | success=true
2026-01-30T16:43:09.595+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:09.595+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:09.596+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:09.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 545
2026-01-30T16:43:09.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 545
2026-01-30T16:43:09.673+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:09.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 321
2026-01-30T16:43:09.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 321 and transaction ID: TXN-54300063-66ff-4213-beec-d6b360474048
2026-01-30T16:43:09.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 284
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 284
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 545
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=122 ms | success=true
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:09.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:09.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 546
2026-01-30T16:43:09.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 546
2026-01-30T16:43:09.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:09.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 322
2026-01-30T16:43:09.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 322 and transaction ID: TXN-6dbc980c-0690-4a4c-9975-9443556688a0
2026-01-30T16:43:09.829+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:09.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 285
2026-01-30T16:43:09.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 285
2026-01-30T16:43:09.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 546
2026-01-30T16:43:09.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=121 ms | success=true
2026-01-30T16:43:09.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:09.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:09.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:10.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 547
2026-01-30T16:43:10.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 547
2026-01-30T16:43:10.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:10.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 323
2026-01-30T16:43:10.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 323 and transaction ID: TXN-7d801490-8554-4d3d-872b-f979a9addc8a
2026-01-30T16:43:10.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:10.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 286
2026-01-30T16:43:10.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 286
2026-01-30T16:43:10.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 547
2026-01-30T16:43:10.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=249 ms | success=true
2026-01-30T16:43:10.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:10.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:10.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:10.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 548
2026-01-30T16:43:10.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 548
2026-01-30T16:43:10.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:10.204+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:43:10.2042541","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:43:10.2042541","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:43:10.210+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:43:10.2042541","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:43:10.2042541","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:43:10.2042541","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:43:10.213+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 548
2026-01-30T16:43:10.233+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=127 ms | success=false
2026-01-30T16:43:10.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:10.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:10.239+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:10.335+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 549
2026-01-30T16:43:10.335+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 549
2026-01-30T16:43:10.336+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:10.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 324
2026-01-30T16:43:10.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 324 and transaction ID: TXN-ff68f3ec-a237-4a60-8bea-e6a45aee2ec7
2026-01-30T16:43:10.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:10.357+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.3561252","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.3561252","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:43:10.359+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.3561252","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.3561252","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.3561252","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:43:10.361+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 324
2026-01-30T16:43:10.373+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 549
2026-01-30T16:43:10.399+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=169 ms | success=false
2026-01-30T16:43:10.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:43:10.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:43:10.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:43:10.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 550
2026-01-30T16:43:10.499+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 550
2026-01-30T16:43:10.514+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:43:10.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 325
2026-01-30T16:43:10.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 325 and transaction ID: TXN-eee28062-7e2f-42fd-8994-75dbe734334a
2026-01-30T16:43:10.530+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:43:10.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 287
2026-01-30T16:43:10.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 287
2026-01-30T16:43:10.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 550
2026-01-30T16:43:10.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=141 ms | success=true
2026-01-30T16:43:10.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:10.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:10.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:10.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 551
2026-01-30T16:43:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=551, status=PREPARED, latency=84ms
2026-01-30T16:43:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:10.655+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:10.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 326
2026-01-30T16:43:10.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=326, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:43:10.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:10.671+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:10.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 288
2026-01-30T16:43:10.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=288, status=RESERVED, latency=15ms
2026-01-30T16:43:10.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:10.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:10.686+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/551/commit
2026-01-30T16:43:10.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 551
2026-01-30T16:43:10.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=551, latency=16ms
2026-01-30T16:43:10.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:10.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/326/commit
2026-01-30T16:43:10.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 326
2026-01-30T16:43:10.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=326, latency=15ms
2026-01-30T16:43:10.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:10.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/288/commit
2026-01-30T16:43:10.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 288
2026-01-30T16:43:10.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=288, latency=16ms
2026-01-30T16:43:10.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:10.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=173 ms | success=true
2026-01-30T16:43:10.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:10.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:10.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:10.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:10.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 552
2026-01-30T16:43:10.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=552, status=PREPARED, latency=107ms
2026-01-30T16:43:10.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:10.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:10.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 327
2026-01-30T16:43:10.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=327, status=PRE_AUTHORIZED, latency=46ms
2026-01-30T16:43:10.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:10.902+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:10.918+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.9185341","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.9185341","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:43:10.918+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:10.9185341","path":"/api/shipments/prepare"}"
2026-01-30T16:43:10.918+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/327/abort
2026-01-30T16:43:10.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 327
2026-01-30T16:43:10.934+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/552/abort
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 552
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 2 compensations
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=220 ms | success=false
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:10.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:11.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 553
2026-01-30T16:43:11.079+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=553, status=PREPARED, latency=114ms
2026-01-30T16:43:11.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:11.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:11.141+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 328
2026-01-30T16:43:11.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=328, status=PRE_AUTHORIZED, latency=63ms
2026-01-30T16:43:11.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:11.157+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:11.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 289
2026-01-30T16:43:11.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=289, status=RESERVED, latency=87ms
2026-01-30T16:43:11.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:11.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:11.244+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/553/commit
2026-01-30T16:43:11.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 553
2026-01-30T16:43:11.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=553, latency=16ms
2026-01-30T16:43:11.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:11.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/328/commit
2026-01-30T16:43:11.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 328
2026-01-30T16:43:11.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=328, latency=16ms
2026-01-30T16:43:11.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:11.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/289/commit
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 289
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=289, latency=15ms
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=317 ms | success=true
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:11.291+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:11.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 554
2026-01-30T16:43:11.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=554, status=PREPARED, latency=97ms
2026-01-30T16:43:11.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:11.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:11.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 329
2026-01-30T16:43:11.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=329, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:43:11.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:11.404+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:11.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 290
2026-01-30T16:43:11.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=290, status=RESERVED, latency=15ms
2026-01-30T16:43:11.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:11.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:11.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/554/commit
2026-01-30T16:43:11.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 554
2026-01-30T16:43:11.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=554, latency=16ms
2026-01-30T16:43:11.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:11.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/329/commit
2026-01-30T16:43:11.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 329
2026-01-30T16:43:11.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=329, latency=22ms
2026-01-30T16:43:11.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:11.457+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/290/commit
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 290
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=290, latency=25ms
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=188 ms | success=true
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:11.482+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:11.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 555
2026-01-30T16:43:11.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=555, status=PREPARED, latency=81ms
2026-01-30T16:43:11.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:11.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:11.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 330
2026-01-30T16:43:11.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=330, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:11.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:11.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:11.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 291
2026-01-30T16:43:11.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=291, status=RESERVED, latency=16ms
2026-01-30T16:43:11.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:11.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:11.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/555/commit
2026-01-30T16:43:11.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 555
2026-01-30T16:43:11.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=555, latency=16ms
2026-01-30T16:43:11.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:11.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/330/commit
2026-01-30T16:43:11.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 330
2026-01-30T16:43:11.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=330, latency=15ms
2026-01-30T16:43:11.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:11.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/291/commit
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 291
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=291, latency=16ms
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=152 ms | success=true
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:11.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:11.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 556
2026-01-30T16:43:11.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=556, status=PREPARED, latency=113ms
2026-01-30T16:43:11.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:11.754+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:11.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 331
2026-01-30T16:43:11.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=331, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:11.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:11.785+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:11.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 292
2026-01-30T16:43:11.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=292, status=RESERVED, latency=47ms
2026-01-30T16:43:11.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:11.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:11.816+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/556/commit
2026-01-30T16:43:11.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 556
2026-01-30T16:43:11.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=556, latency=16ms
2026-01-30T16:43:11.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:11.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/331/commit
2026-01-30T16:43:11.847+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 331
2026-01-30T16:43:11.847+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=331, latency=15ms
2026-01-30T16:43:11.847+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:11.847+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/292/commit
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 292
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=292, latency=16ms
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=218 ms | success=true
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:11.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:11.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 557
2026-01-30T16:43:11.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=557, status=PREPARED, latency=100ms
2026-01-30T16:43:11.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:11.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:11.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 332
2026-01-30T16:43:11.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=332, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:43:11.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:11.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:11.994+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:11.9946695","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:11.9946695","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:43:11.994+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:43:11.9946695","path":"/api/shipments/prepare"}"
2026-01-30T16:43:11.994+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/332/abort
2026-01-30T16:43:12.010+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 332
2026-01-30T16:43:12.010+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/557/abort
2026-01-30T16:43:12.041+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 557
2026-01-30T16:43:12.041+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 2 compensations
2026-01-30T16:43:12.041+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=172 ms | success=false
2026-01-30T16:43:12.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:12.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:12.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:12.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:12.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 558
2026-01-30T16:43:12.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=558, status=PREPARED, latency=105ms
2026-01-30T16:43:12.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:12.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:12.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 333
2026-01-30T16:43:12.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=333, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:12.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:12.177+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:12.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 293
2026-01-30T16:43:12.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=293, status=RESERVED, latency=16ms
2026-01-30T16:43:12.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:12.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:12.193+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/558/commit
2026-01-30T16:43:12.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 558
2026-01-30T16:43:12.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=558, latency=16ms
2026-01-30T16:43:12.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:12.209+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/333/commit
2026-01-30T16:43:12.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 333
2026-01-30T16:43:12.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=333, latency=15ms
2026-01-30T16:43:12.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:12.224+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/293/commit
2026-01-30T16:43:12.255+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 293
2026-01-30T16:43:12.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=293, latency=37ms
2026-01-30T16:43:12.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:12.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=212 ms | success=true
2026-01-30T16:43:12.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:12.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:12.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:12.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:12.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 559
2026-01-30T16:43:12.503+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=559, status=PREPARED, latency=195ms
2026-01-30T16:43:12.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:12.506+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:12.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 334
2026-01-30T16:43:12.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=334, status=PRE_AUTHORIZED, latency=18ms
2026-01-30T16:43:12.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:12.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:12.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 294
2026-01-30T16:43:12.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=294, status=RESERVED, latency=15ms
2026-01-30T16:43:12.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:12.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:12.539+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/559/commit
2026-01-30T16:43:12.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 559
2026-01-30T16:43:12.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=559, latency=16ms
2026-01-30T16:43:12.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:12.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/334/commit
2026-01-30T16:43:12.570+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 334
2026-01-30T16:43:12.570+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=334, latency=15ms
2026-01-30T16:43:12.570+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:12.570+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/294/commit
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 294
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=294, latency=16ms
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=283 ms | success=true
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:12.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:12.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 560
2026-01-30T16:43:12.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=560, status=PREPARED, latency=95ms
2026-01-30T16:43:12.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:12.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:12.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 335
2026-01-30T16:43:12.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=335, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:43:12.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:12.712+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:12.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 295
2026-01-30T16:43:12.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=295, status=RESERVED, latency=16ms
2026-01-30T16:43:12.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:12.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:12.728+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/560/commit
2026-01-30T16:43:12.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 560
2026-01-30T16:43:12.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=560, latency=16ms
2026-01-30T16:43:12.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:12.744+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/335/commit
2026-01-30T16:43:12.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 335
2026-01-30T16:43:12.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=335, latency=15ms
2026-01-30T16:43:12.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:12.759+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/295/commit
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 295
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=295, latency=16ms
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=181 ms | success=true
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:12.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:12.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 561
2026-01-30T16:43:12.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=561, status=PREPARED, latency=107ms
2026-01-30T16:43:12.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:12.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:12.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 336
2026-01-30T16:43:12.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=336, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:12.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:12.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:12.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 296
2026-01-30T16:43:12.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=296, status=RESERVED, latency=32ms
2026-01-30T16:43:12.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:12.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:12.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/561/commit
2026-01-30T16:43:12.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 561
2026-01-30T16:43:12.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=561, latency=15ms
2026-01-30T16:43:12.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:12.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/336/commit
2026-01-30T16:43:12.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 336
2026-01-30T16:43:12.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=336, latency=16ms
2026-01-30T16:43:12.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:12.960+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/296/commit
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 296
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=296, latency=15ms
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=195 ms | success=true
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:12.975+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:13.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 562
2026-01-30T16:43:13.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=562, status=PREPARED, latency=106ms
2026-01-30T16:43:13.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:13.081+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:13.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 337
2026-01-30T16:43:13.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=337, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:43:13.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:13.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:13.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 297
2026-01-30T16:43:13.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=297, status=RESERVED, latency=15ms
2026-01-30T16:43:13.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:13.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:13.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/562/commit
2026-01-30T16:43:13.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 562
2026-01-30T16:43:13.128+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=562, latency=16ms
2026-01-30T16:43:13.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:13.138+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/337/commit
2026-01-30T16:43:13.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 337
2026-01-30T16:43:13.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=337, latency=16ms
2026-01-30T16:43:13.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:13.154+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/297/commit
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 297
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=297, latency=16ms
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=187 ms | success=true
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:13.170+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:13.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 563
2026-01-30T16:43:13.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=563, status=PREPARED, latency=109ms
2026-01-30T16:43:13.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:13.279+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:13.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 338
2026-01-30T16:43:13.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=338, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:43:13.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:13.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:13.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 298
2026-01-30T16:43:13.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=298, status=RESERVED, latency=15ms
2026-01-30T16:43:13.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:13.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:13.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/563/commit
2026-01-30T16:43:13.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 563
2026-01-30T16:43:13.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=563, latency=44ms
2026-01-30T16:43:13.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:13.354+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/338/commit
2026-01-30T16:43:13.370+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 338
2026-01-30T16:43:13.370+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=338, latency=16ms
2026-01-30T16:43:13.370+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:13.370+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/298/commit
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 298
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=298, latency=15ms
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=210 ms | success=true
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:13.385+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:13.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 564
2026-01-30T16:43:13.571+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=564, status=PREPARED, latency=186ms
2026-01-30T16:43:13.574+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:13.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:13.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 339
2026-01-30T16:43:13.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=339, status=PRE_AUTHORIZED, latency=161ms
2026-01-30T16:43:13.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:13.735+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:13.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 299
2026-01-30T16:43:13.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=299, status=RESERVED, latency=16ms
2026-01-30T16:43:13.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:13.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:13.751+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/564/commit
2026-01-30T16:43:13.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 564
2026-01-30T16:43:13.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=564, latency=16ms
2026-01-30T16:43:13.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:13.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/339/commit
2026-01-30T16:43:13.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 339
2026-01-30T16:43:13.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=339, latency=15ms
2026-01-30T16:43:13.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:13.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/299/commit
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 299
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=299, latency=16ms
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=406 ms | success=true
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:13.798+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:13.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 565
2026-01-30T16:43:13.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=565, status=PREPARED, latency=106ms
2026-01-30T16:43:13.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:13.904+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:13.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 340
2026-01-30T16:43:13.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=340, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:43:13.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:13.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:13.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 300
2026-01-30T16:43:13.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=300, status=RESERVED, latency=46ms
2026-01-30T16:43:13.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:13.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:13.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/565/commit
2026-01-30T16:43:13.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 565
2026-01-30T16:43:13.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=565, latency=16ms
2026-01-30T16:43:13.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:13.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/340/commit
2026-01-30T16:43:13.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 340
2026-01-30T16:43:13.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=340, latency=16ms
2026-01-30T16:43:13.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:13.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/300/commit
2026-01-30T16:43:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 300
2026-01-30T16:43:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=300, latency=15ms
2026-01-30T16:43:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=209 ms | success=true
2026-01-30T16:43:14.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:14.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:14.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:14.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:14.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 566
2026-01-30T16:43:14.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=566, status=PREPARED, latency=94ms
2026-01-30T16:43:14.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:14.121+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:14.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 341
2026-01-30T16:43:14.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=341, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:14.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:14.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:14.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 301
2026-01-30T16:43:14.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=301, status=RESERVED, latency=16ms
2026-01-30T16:43:14.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:14.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:14.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/566/commit
2026-01-30T16:43:14.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 566
2026-01-30T16:43:14.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=566, latency=16ms
2026-01-30T16:43:14.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:14.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/341/commit
2026-01-30T16:43:14.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 341
2026-01-30T16:43:14.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=341, latency=15ms
2026-01-30T16:43:14.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:14.183+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/301/commit
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 301
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=301, latency=16ms
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=177 ms | success=true
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:14.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:14.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 567
2026-01-30T16:43:14.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=567, status=PREPARED, latency=106ms
2026-01-30T16:43:14.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:14.305+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:14.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 342
2026-01-30T16:43:14.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=342, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:14.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:14.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:14.348+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 302
2026-01-30T16:43:14.348+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=302, status=RESERVED, latency=28ms
2026-01-30T16:43:14.348+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:14.348+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:14.348+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/567/commit
2026-01-30T16:43:14.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 567
2026-01-30T16:43:14.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=567, latency=15ms
2026-01-30T16:43:14.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:14.363+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/342/commit
2026-01-30T16:43:14.379+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 342
2026-01-30T16:43:14.379+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=342, latency=16ms
2026-01-30T16:43:14.379+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:14.379+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/302/commit
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 302
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=302, latency=15ms
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=189 ms | success=true
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:14.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:14.504+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 568
2026-01-30T16:43:14.504+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=568, status=PREPARED, latency=110ms
2026-01-30T16:43:14.504+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:14.504+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:14.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 343
2026-01-30T16:43:14.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=343, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:43:14.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:14.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:14.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 303
2026-01-30T16:43:14.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=303, status=RESERVED, latency=16ms
2026-01-30T16:43:14.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:14.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:14.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/568/commit
2026-01-30T16:43:14.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 568
2026-01-30T16:43:14.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=568, latency=16ms
2026-01-30T16:43:14.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:14.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/343/commit
2026-01-30T16:43:14.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 343
2026-01-30T16:43:14.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=343, latency=15ms
2026-01-30T16:43:14.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:14.566+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/303/commit
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 303
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=303, latency=16ms
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=181 ms | success=true
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:14.582+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:14.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 569
2026-01-30T16:43:14.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=569, status=PREPARED, latency=93ms
2026-01-30T16:43:14.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:14.675+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:14.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 344
2026-01-30T16:43:14.769+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=344, status=PRE_AUTHORIZED, latency=94ms
2026-01-30T16:43:14.785+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:14.785+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:14.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 304
2026-01-30T16:43:14.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=304, status=RESERVED, latency=47ms
2026-01-30T16:43:14.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:14.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:14.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/569/commit
2026-01-30T16:43:14.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 569
2026-01-30T16:43:14.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=569, latency=31ms
2026-01-30T16:43:14.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:14.863+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/344/commit
2026-01-30T16:43:14.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 344
2026-01-30T16:43:14.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=344, latency=16ms
2026-01-30T16:43:14.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:14.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/304/commit
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 304
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=304, latency=15ms
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=307 ms | success=true
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:43:14.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:43:15.009+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 570
2026-01-30T16:43:15.010+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=570, status=PREPARED, latency=116ms
2026-01-30T16:43:15.010+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:43:15.010+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:43:15.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 345
2026-01-30T16:43:15.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=345, status=PRE_AUTHORIZED, latency=34ms
2026-01-30T16:43:15.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:43:15.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:43:15.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 305
2026-01-30T16:43:15.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=305, status=RESERVED, latency=42ms
2026-01-30T16:43:15.093+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:43:15.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:43:15.094+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/570/commit
2026-01-30T16:43:15.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 570
2026-01-30T16:43:15.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=570, latency=25ms
2026-01-30T16:43:15.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:43:15.120+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/345/commit
2026-01-30T16:43:15.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 345
2026-01-30T16:43:15.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=345, latency=17ms
2026-01-30T16:43:15.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:43:15.136+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/305/commit
2026-01-30T16:43:15.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 305
2026-01-30T16:43:15.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=305, latency=17ms
2026-01-30T16:43:15.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:43:15.153+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=250 ms | success=true
2026-01-30T16:53:11.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:11.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:11.295+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:11.445+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 571
2026-01-30T16:53:11.445+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 571
2026-01-30T16:53:11.445+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:11.521+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 346
2026-01-30T16:53:11.521+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 346 and transaction ID: TXN-8a155e9f-e676-42d8-b663-02bc28cb6c48
2026-01-30T16:53:11.527+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:11.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 306
2026-01-30T16:53:11.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 306
2026-01-30T16:53:11.651+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 571
2026-01-30T16:53:11.651+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=353 ms | success=true
2026-01-30T16:53:11.659+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:11.660+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:11.663+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:11.749+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 572
2026-01-30T16:53:11.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 572
2026-01-30T16:53:11.750+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:11.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 347
2026-01-30T16:53:11.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 347 and transaction ID: TXN-b47295f9-68b4-4f0e-9e83-f97af568992c
2026-01-30T16:53:11.774+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 307
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 307
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 572
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=132 ms | success=true
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:11.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:11.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 573
2026-01-30T16:53:11.886+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 573
2026-01-30T16:53:11.886+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:11.925+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 348
2026-01-30T16:53:11.925+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 348 and transaction ID: TXN-6c18519f-8266-4387-a7c2-ad2f070c5ad7
2026-01-30T16:53:11.925+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:11.938+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:11.9343204","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:11.9343204","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:11.946+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:11.9343204","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:11.9343204","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:11.9343204","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:53:11.946+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 348
2026-01-30T16:53:11.969+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 573
2026-01-30T16:53:11.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=191 ms | success=false
2026-01-30T16:53:11.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:11.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:11.987+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:12.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 574
2026-01-30T16:53:12.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 574
2026-01-30T16:53:12.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:12.151+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:12.1516084","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:12.1516084","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:12.151+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:12.1516084","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:12.1516084","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:12.1516084","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:53:12.167+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 574
2026-01-30T16:53:12.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=194 ms | success=false
2026-01-30T16:53:12.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:12.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:12.198+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:12.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 575
2026-01-30T16:53:12.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 575
2026-01-30T16:53:12.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:12.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 349
2026-01-30T16:53:12.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 349 and transaction ID: TXN-c9231940-31a3-42c6-a0d8-a3fe577d32c3
2026-01-30T16:53:12.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:12.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 308
2026-01-30T16:53:12.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 308
2026-01-30T16:53:12.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 575
2026-01-30T16:53:12.331+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=143 ms | success=true
2026-01-30T16:53:12.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:12.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:12.346+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:12.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 576
2026-01-30T16:53:12.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 576
2026-01-30T16:53:12.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:12.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 350
2026-01-30T16:53:12.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 350 and transaction ID: TXN-3b5c543b-8bcc-47e3-9171-30a60645a4d7
2026-01-30T16:53:12.455+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:12.471+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:12.4713689","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:12.4713689","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:12.471+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:12.4713689","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:12.4713689","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:12.4713689","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:53:12.471+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 350
2026-01-30T16:53:12.487+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 576
2026-01-30T16:53:12.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=159 ms | success=false
2026-01-30T16:53:12.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:12.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:12.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:12.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 577
2026-01-30T16:53:12.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 577
2026-01-30T16:53:12.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:12.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 351
2026-01-30T16:53:12.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 351 and transaction ID: TXN-2e1ff4a6-f864-4b66-be20-291963e49ec5
2026-01-30T16:53:12.622+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:12.638+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 309
2026-01-30T16:53:12.638+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 309
2026-01-30T16:53:12.638+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 577
2026-01-30T16:53:12.638+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=133 ms | success=true
2026-01-30T16:53:12.656+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:12.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:12.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:12.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 578
2026-01-30T16:53:12.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 578
2026-01-30T16:53:12.733+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:12.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 352
2026-01-30T16:53:12.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 352 and transaction ID: TXN-99afca49-a112-4409-b9dd-277db2288acf
2026-01-30T16:53:12.764+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:12.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 310
2026-01-30T16:53:12.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 310
2026-01-30T16:53:12.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 578
2026-01-30T16:53:12.779+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=134 ms | success=true
2026-01-30T16:53:12.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:12.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:12.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:12.874+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 579
2026-01-30T16:53:12.890+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 579
2026-01-30T16:53:12.890+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:12.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 353
2026-01-30T16:53:12.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 353 and transaction ID: TXN-f72a3eb7-42ef-4abf-b72c-60af0f3485c7
2026-01-30T16:53:12.905+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 311
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 311
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 579
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=165 ms | success=true
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:12.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:13.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 580
2026-01-30T16:53:13.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 580
2026-01-30T16:53:13.051+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:13.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 354
2026-01-30T16:53:13.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 354 and transaction ID: TXN-284a43aa-58c2-4951-9754-47b9c055507e
2026-01-30T16:53:13.114+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:13.292+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 312
2026-01-30T16:53:13.293+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 312
2026-01-30T16:53:13.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 580
2026-01-30T16:53:13.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=322 ms | success=true
2026-01-30T16:53:13.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:13.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:13.301+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:13.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 581
2026-01-30T16:53:13.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 581
2026-01-30T16:53:13.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:13.390+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 355
2026-01-30T16:53:13.391+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 355 and transaction ID: TXN-8ca196c0-3b86-42b4-a56e-5c4da2ebfe31
2026-01-30T16:53:13.392+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:13.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 313
2026-01-30T16:53:13.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 313
2026-01-30T16:53:13.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 581
2026-01-30T16:53:13.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=113 ms | success=true
2026-01-30T16:53:13.422+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:13.423+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:13.423+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:13.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 582
2026-01-30T16:53:13.519+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 582
2026-01-30T16:53:13.525+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:13.570+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 356
2026-01-30T16:53:13.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 356 and transaction ID: TXN-edd59558-46a3-44e5-a195-379554ea0186
2026-01-30T16:53:13.579+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:13.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 314
2026-01-30T16:53:13.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 314
2026-01-30T16:53:13.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 582
2026-01-30T16:53:13.612+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=192 ms | success=true
2026-01-30T16:53:13.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:13.628+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:13.628+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:13.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 583
2026-01-30T16:53:13.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 583
2026-01-30T16:53:13.737+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:13.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 357
2026-01-30T16:53:13.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 357 and transaction ID: TXN-a84584d6-7971-4426-be7f-d9d5971c2107
2026-01-30T16:53:13.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:13.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 315
2026-01-30T16:53:13.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 315
2026-01-30T16:53:13.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 583
2026-01-30T16:53:13.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=154 ms | success=true
2026-01-30T16:53:13.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:13.796+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:13.796+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:13.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 584
2026-01-30T16:53:13.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 584
2026-01-30T16:53:13.880+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:13.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 358
2026-01-30T16:53:13.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 358 and transaction ID: TXN-4ed8da38-9839-4675-a014-74ab1ad6955d
2026-01-30T16:53:13.897+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:13.913+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 316
2026-01-30T16:53:13.913+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 316
2026-01-30T16:53:13.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 584
2026-01-30T16:53:13.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=118 ms | success=true
2026-01-30T16:53:13.921+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:13.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:13.922+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:13.994+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 585
2026-01-30T16:53:13.994+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 585
2026-01-30T16:53:13.995+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 359
2026-01-30T16:53:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 359 and transaction ID: TXN-56997d14-e8ea-4509-b200-d99a49e8aae8
2026-01-30T16:53:14.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:14.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 317
2026-01-30T16:53:14.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 317
2026-01-30T16:53:14.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 585
2026-01-30T16:53:14.030+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=108 ms | success=true
2026-01-30T16:53:14.038+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:14.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:14.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:14.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 586
2026-01-30T16:53:14.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 586
2026-01-30T16:53:14.113+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:14.129+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 360
2026-01-30T16:53:14.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 360 and transaction ID: TXN-c7fe033b-7b81-4458-96be-58da4d7a32ee
2026-01-30T16:53:14.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:14.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 318
2026-01-30T16:53:14.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 318
2026-01-30T16:53:14.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 586
2026-01-30T16:53:14.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=108 ms | success=true
2026-01-30T16:53:14.149+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:14.149+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:14.149+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:14.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 587
2026-01-30T16:53:14.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 587
2026-01-30T16:53:14.237+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:14.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 361
2026-01-30T16:53:14.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 361 and transaction ID: TXN-dab232c4-c06a-4f2e-9993-720c8c2c6739
2026-01-30T16:53:14.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:14.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 319
2026-01-30T16:53:14.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 319
2026-01-30T16:53:14.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 587
2026-01-30T16:53:14.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=126 ms | success=true
2026-01-30T16:53:14.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:14.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:14.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:14.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 588
2026-01-30T16:53:14.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 588
2026-01-30T16:53:14.389+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:14.425+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 362
2026-01-30T16:53:14.425+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 362 and transaction ID: TXN-a9ee0ea1-15f1-42f3-a5d6-159139297933
2026-01-30T16:53:14.426+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:14.469+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 320
2026-01-30T16:53:14.469+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 320
2026-01-30T16:53:14.471+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 588
2026-01-30T16:53:14.471+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=184 ms | success=true
2026-01-30T16:53:14.492+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:14.492+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:14.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:14.589+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 589
2026-01-30T16:53:14.590+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 589
2026-01-30T16:53:14.600+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:14.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 363
2026-01-30T16:53:14.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 363 and transaction ID: TXN-37cdf2d1-e412-4fee-892d-344bc6cbf613
2026-01-30T16:53:14.615+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:14.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 321
2026-01-30T16:53:14.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 321
2026-01-30T16:53:14.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 589
2026-01-30T16:53:14.631+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=152 ms | success=true
2026-01-30T16:53:14.647+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:14.647+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:14.647+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:14.731+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 590
2026-01-30T16:53:14.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 590
2026-01-30T16:53:14.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:14.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 364
2026-01-30T16:53:14.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 364 and transaction ID: TXN-75855e1f-11a2-45c4-9400-44dc5640fb18
2026-01-30T16:53:14.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:14.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 322
2026-01-30T16:53:14.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 322
2026-01-30T16:53:14.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 590
2026-01-30T16:53:14.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=149 ms | success=true
2026-01-30T16:53:14.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:14.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:14.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:14.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:14.908+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 591
2026-01-30T16:53:14.908+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=591, status=PREPARED, latency=99ms
2026-01-30T16:53:14.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:14.909+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:14.921+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 365
2026-01-30T16:53:14.921+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=365, status=PRE_AUTHORIZED, latency=12ms
2026-01-30T16:53:14.921+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:14.921+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:14.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 323
2026-01-30T16:53:14.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=323, status=RESERVED, latency=19ms
2026-01-30T16:53:14.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:14.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:14.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/591/commit
2026-01-30T16:53:14.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 591
2026-01-30T16:53:14.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=591, latency=26ms
2026-01-30T16:53:14.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:14.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/365/commit
2026-01-30T16:53:14.979+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 365
2026-01-30T16:53:14.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=365, latency=12ms
2026-01-30T16:53:14.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:14.980+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/323/commit
2026-01-30T16:53:14.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 323
2026-01-30T16:53:14.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=323, latency=9ms
2026-01-30T16:53:14.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:14.989+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=176 ms | success=true
2026-01-30T16:53:14.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:14.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:14.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:14.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:15.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 592
2026-01-30T16:53:15.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=592, status=PREPARED, latency=84ms
2026-01-30T16:53:15.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:15.080+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:15.096+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 366
2026-01-30T16:53:15.096+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=366, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:15.096+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:15.096+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:15.127+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 324
2026-01-30T16:53:15.127+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=324, status=RESERVED, latency=31ms
2026-01-30T16:53:15.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:15.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:15.143+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/592/commit
2026-01-30T16:53:15.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 592
2026-01-30T16:53:15.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=592, latency=16ms
2026-01-30T16:53:15.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:15.159+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/366/commit
2026-01-30T16:53:15.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 366
2026-01-30T16:53:15.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=366, latency=15ms
2026-01-30T16:53:15.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:15.174+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/324/commit
2026-01-30T16:53:15.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 324
2026-01-30T16:53:15.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=324, latency=16ms
2026-01-30T16:53:15.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:15.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=201 ms | success=true
2026-01-30T16:53:15.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:15.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:15.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:15.205+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:15.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 593
2026-01-30T16:53:15.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=593, status=PREPARED, latency=98ms
2026-01-30T16:53:15.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:15.303+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:15.319+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 367
2026-01-30T16:53:15.319+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=367, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:15.319+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:15.319+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:15.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 325
2026-01-30T16:53:15.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=325, status=RESERVED, latency=15ms
2026-01-30T16:53:15.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:15.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:15.334+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/593/commit
2026-01-30T16:53:15.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 593
2026-01-30T16:53:15.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=593, latency=16ms
2026-01-30T16:53:15.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:15.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/367/commit
2026-01-30T16:53:15.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 367
2026-01-30T16:53:15.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=367, latency=16ms
2026-01-30T16:53:15.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:15.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/325/commit
2026-01-30T16:53:15.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 325
2026-01-30T16:53:15.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=325, latency=15ms
2026-01-30T16:53:15.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:15.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=183 ms | success=true
2026-01-30T16:53:15.381+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:15.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:15.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:15.397+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:15.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 594
2026-01-30T16:53:15.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=594, status=PREPARED, latency=92ms
2026-01-30T16:53:15.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:15.489+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:15.505+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 368
2026-01-30T16:53:15.505+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=368, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:15.505+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:15.505+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:15.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 326
2026-01-30T16:53:15.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=326, status=RESERVED, latency=31ms
2026-01-30T16:53:15.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:15.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:15.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/594/commit
2026-01-30T16:53:15.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 594
2026-01-30T16:53:15.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=594, latency=16ms
2026-01-30T16:53:15.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:15.552+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/368/commit
2026-01-30T16:53:15.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 368
2026-01-30T16:53:15.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=368, latency=16ms
2026-01-30T16:53:15.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:15.568+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/326/commit
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 326
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=326, latency=15ms
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=192 ms | success=true
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:15.583+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:15.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 595
2026-01-30T16:53:15.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=595, status=PREPARED, latency=101ms
2026-01-30T16:53:15.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:15.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:15.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 369
2026-01-30T16:53:15.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=369, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:15.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:15.699+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:15.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 327
2026-01-30T16:53:15.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=327, status=RESERVED, latency=16ms
2026-01-30T16:53:15.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:15.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:15.715+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/595/commit
2026-01-30T16:53:15.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 595
2026-01-30T16:53:15.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=595, latency=24ms
2026-01-30T16:53:15.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:15.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/369/commit
2026-01-30T16:53:15.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 369
2026-01-30T16:53:15.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=369, latency=21ms
2026-01-30T16:53:15.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:15.760+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/327/commit
2026-01-30T16:53:15.775+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 327
2026-01-30T16:53:15.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=327, latency=17ms
2026-01-30T16:53:15.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:15.777+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=180 ms | success=true
2026-01-30T16:53:15.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:15.792+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:15.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:15.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:15.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 596
2026-01-30T16:53:15.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=596, status=PREPARED, latency=100ms
2026-01-30T16:53:15.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:15.893+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:15.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 370
2026-01-30T16:53:15.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=370, status=PRE_AUTHORIZED, latency=34ms
2026-01-30T16:53:15.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:15.927+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:15.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 328
2026-01-30T16:53:15.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=328, status=RESERVED, latency=19ms
2026-01-30T16:53:15.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:15.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:15.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/596/commit
2026-01-30T16:53:15.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 596
2026-01-30T16:53:15.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=596, latency=19ms
2026-01-30T16:53:15.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:15.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/370/commit
2026-01-30T16:53:15.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 370
2026-01-30T16:53:15.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=370, latency=16ms
2026-01-30T16:53:15.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:15.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/328/commit
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 328
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=328, latency=15ms
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=210 ms | success=true
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:15.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:16.095+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 597
2026-01-30T16:53:16.095+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=597, status=PREPARED, latency=99ms
2026-01-30T16:53:16.095+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:16.095+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:16.186+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 371
2026-01-30T16:53:16.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=371, status=PRE_AUTHORIZED, latency=95ms
2026-01-30T16:53:16.190+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:16.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:16.226+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 329
2026-01-30T16:53:16.227+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=329, status=RESERVED, latency=37ms
2026-01-30T16:53:16.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:16.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:16.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/597/commit
2026-01-30T16:53:16.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 597
2026-01-30T16:53:16.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=597, latency=32ms
2026-01-30T16:53:16.260+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:16.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/371/commit
2026-01-30T16:53:16.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 371
2026-01-30T16:53:16.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=371, latency=16ms
2026-01-30T16:53:16.276+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:16.277+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/329/commit
2026-01-30T16:53:16.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 329
2026-01-30T16:53:16.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=329, latency=18ms
2026-01-30T16:53:16.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:16.294+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=289 ms | success=true
2026-01-30T16:53:16.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:16.309+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:16.309+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:16.309+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:16.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 598
2026-01-30T16:53:16.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=598, status=PREPARED, latency=130ms
2026-01-30T16:53:16.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:16.439+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:16.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 372
2026-01-30T16:53:16.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=372, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:53:16.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:16.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:16.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 330
2026-01-30T16:53:16.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=330, status=RESERVED, latency=32ms
2026-01-30T16:53:16.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:16.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:16.502+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/598/commit
2026-01-30T16:53:16.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 598
2026-01-30T16:53:16.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=598, latency=18ms
2026-01-30T16:53:16.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:16.520+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/372/commit
2026-01-30T16:53:16.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 372
2026-01-30T16:53:16.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=372, latency=16ms
2026-01-30T16:53:16.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:16.536+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/330/commit
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 330
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=330, latency=15ms
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=249 ms | success=true
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:16.551+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:16.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 599
2026-01-30T16:53:16.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=599, status=PREPARED, latency=99ms
2026-01-30T16:53:16.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:16.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:16.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 373
2026-01-30T16:53:16.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=373, status=PRE_AUTHORIZED, latency=58ms
2026-01-30T16:53:16.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:16.708+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:16.723+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:16.7238377","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:16.7238377","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:16.723+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:16.7238377","path":"/api/shipments/prepare"}"
2026-01-30T16:53:16.723+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/373/abort
2026-01-30T16:53:16.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 373
2026-01-30T16:53:16.739+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/599/abort
2026-01-30T16:53:16.770+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 599
2026-01-30T16:53:16.770+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 2 compensations
2026-01-30T16:53:16.770+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=215 ms | success=false
2026-01-30T16:53:16.770+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:16.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:16.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:16.786+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:16.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 600
2026-01-30T16:53:16.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=600, status=PREPARED, latency=93ms
2026-01-30T16:53:16.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:16.879+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:16.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 374
2026-01-30T16:53:16.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=374, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:16.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:16.894+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:16.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 331
2026-01-30T16:53:16.945+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=331, status=RESERVED, latency=51ms
2026-01-30T16:53:16.949+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:16.949+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:16.949+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/600/commit
2026-01-30T16:53:16.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 600
2026-01-30T16:53:16.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=600, latency=16ms
2026-01-30T16:53:16.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:16.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/374/commit
2026-01-30T16:53:16.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 374
2026-01-30T16:53:16.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=374, latency=16ms
2026-01-30T16:53:16.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:16.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/331/commit
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 331
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=331, latency=15ms
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=219 ms | success=true
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:16.996+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:17.012+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:17.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 601
2026-01-30T16:53:17.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=601, status=PREPARED, latency=107ms
2026-01-30T16:53:17.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:17.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:17.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 375
2026-01-30T16:53:17.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=375, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:17.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:17.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:17.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 332
2026-01-30T16:53:17.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=332, status=RESERVED, latency=16ms
2026-01-30T16:53:17.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:17.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:17.150+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/601/commit
2026-01-30T16:53:17.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 601
2026-01-30T16:53:17.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=601, latency=31ms
2026-01-30T16:53:17.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:17.166+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/375/commit
2026-01-30T16:53:17.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 375
2026-01-30T16:53:17.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=375, latency=16ms
2026-01-30T16:53:17.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:17.182+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/332/commit
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 332
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=332, latency=15ms
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=194 ms | success=true
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:17.197+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:17.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 602
2026-01-30T16:53:17.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=602, status=PREPARED, latency=123ms
2026-01-30T16:53:17.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:17.320+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:17.342+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 376
2026-01-30T16:53:17.343+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=376, status=PRE_AUTHORIZED, latency=23ms
2026-01-30T16:53:17.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:17.344+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:17.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 333
2026-01-30T16:53:17.373+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=333, status=RESERVED, latency=29ms
2026-01-30T16:53:17.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:17.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:17.398+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/602/commit
2026-01-30T16:53:17.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 602
2026-01-30T16:53:17.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=602, latency=16ms
2026-01-30T16:53:17.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:17.414+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/376/commit
2026-01-30T16:53:17.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 376
2026-01-30T16:53:17.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=376, latency=16ms
2026-01-30T16:53:17.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:17.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/333/commit
2026-01-30T16:53:17.453+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 333
2026-01-30T16:53:17.453+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=333, latency=23ms
2026-01-30T16:53:17.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:17.454+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=241 ms | success=true
2026-01-30T16:53:17.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:17.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:17.460+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:17.461+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:17.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 603
2026-01-30T16:53:17.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=603, status=PREPARED, latency=72ms
2026-01-30T16:53:17.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:17.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:17.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 377
2026-01-30T16:53:17.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=377, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:17.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:17.547+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:17.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 334
2026-01-30T16:53:17.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=334, status=RESERVED, latency=16ms
2026-01-30T16:53:17.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:17.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:17.563+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/603/commit
2026-01-30T16:53:17.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 603
2026-01-30T16:53:17.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=603, latency=15ms
2026-01-30T16:53:17.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:17.578+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/377/commit
2026-01-30T16:53:17.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 377
2026-01-30T16:53:17.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=377, latency=16ms
2026-01-30T16:53:17.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:17.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/334/commit
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 334
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=334, latency=31ms
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=172 ms | success=true
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:17.625+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:17.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 604
2026-01-30T16:53:17.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=604, status=PREPARED, latency=107ms
2026-01-30T16:53:17.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:17.732+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:17.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 378
2026-01-30T16:53:17.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=378, status=PRE_AUTHORIZED, latency=33ms
2026-01-30T16:53:17.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:17.765+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:17.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 335
2026-01-30T16:53:17.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=335, status=RESERVED, latency=45ms
2026-01-30T16:53:17.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:17.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:17.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/604/commit
2026-01-30T16:53:17.827+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 604
2026-01-30T16:53:17.827+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=604, latency=17ms
2026-01-30T16:53:17.827+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:17.827+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/378/commit
2026-01-30T16:53:17.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 378
2026-01-30T16:53:17.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=378, latency=16ms
2026-01-30T16:53:17.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:17.843+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/335/commit
2026-01-30T16:53:17.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 335
2026-01-30T16:53:17.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=335, latency=55ms
2026-01-30T16:53:17.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:17.898+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=272 ms | success=true
2026-01-30T16:53:17.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:17.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:17.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:17.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:18.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 605
2026-01-30T16:53:18.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=605, status=PREPARED, latency=99ms
2026-01-30T16:53:18.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:18.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:18.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 379
2026-01-30T16:53:18.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=379, status=PRE_AUTHORIZED, latency=26ms
2026-01-30T16:53:18.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:18.039+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:18.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 336
2026-01-30T16:53:18.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=336, status=RESERVED, latency=73ms
2026-01-30T16:53:18.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:18.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:18.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/605/commit
2026-01-30T16:53:18.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 605
2026-01-30T16:53:18.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=605, latency=19ms
2026-01-30T16:53:18.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:18.131+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/379/commit
2026-01-30T16:53:18.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 379
2026-01-30T16:53:18.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=379, latency=16ms
2026-01-30T16:53:18.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:18.147+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/336/commit
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 336
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=336, latency=15ms
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=253 ms | success=true
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:18.162+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:18.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 606
2026-01-30T16:53:18.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=606, status=PREPARED, latency=109ms
2026-01-30T16:53:18.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:18.271+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:18.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 380
2026-01-30T16:53:18.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=380, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:18.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:18.287+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:18.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 337
2026-01-30T16:53:18.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=337, status=RESERVED, latency=19ms
2026-01-30T16:53:18.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:18.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:18.306+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/606/commit
2026-01-30T16:53:18.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 606
2026-01-30T16:53:18.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=606, latency=16ms
2026-01-30T16:53:18.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:18.322+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/380/commit
2026-01-30T16:53:18.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 380
2026-01-30T16:53:18.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=380, latency=16ms
2026-01-30T16:53:18.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:18.338+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/337/commit
2026-01-30T16:53:18.360+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 337
2026-01-30T16:53:18.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=337, latency=23ms
2026-01-30T16:53:18.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:18.361+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=184 ms | success=true
2026-01-30T16:53:18.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:18.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:18.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:18.367+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:18.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 607
2026-01-30T16:53:18.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=607, status=PREPARED, latency=103ms
2026-01-30T16:53:18.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:18.470+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:18.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 381
2026-01-30T16:53:18.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=381, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:53:18.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:18.501+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:18.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 338
2026-01-30T16:53:18.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=338, status=RESERVED, latency=25ms
2026-01-30T16:53:18.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:18.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:18.526+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/607/commit
2026-01-30T16:53:18.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 607
2026-01-30T16:53:18.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=607, latency=6ms
2026-01-30T16:53:18.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:18.532+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/381/commit
2026-01-30T16:53:18.548+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 381
2026-01-30T16:53:18.548+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=381, latency=16ms
2026-01-30T16:53:18.548+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:18.548+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/338/commit
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 338
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=338, latency=78ms
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=265 ms | success=true
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:18.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:18.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 608
2026-01-30T16:53:18.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=608, status=PREPARED, latency=104ms
2026-01-30T16:53:18.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:18.730+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:18.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 382
2026-01-30T16:53:18.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=382, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:18.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:18.746+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:18.773+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 339
2026-01-30T16:53:18.773+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=339, status=RESERVED, latency=27ms
2026-01-30T16:53:18.773+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:18.773+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:18.773+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/608/commit
2026-01-30T16:53:18.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 608
2026-01-30T16:53:18.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=608, latency=15ms
2026-01-30T16:53:18.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:18.788+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/382/commit
2026-01-30T16:53:18.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 382
2026-01-30T16:53:18.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=382, latency=16ms
2026-01-30T16:53:18.835+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:18.835+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/339/commit
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 339
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=339, latency=16ms
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=218 ms | success=true
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:18.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:18.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 609
2026-01-30T16:53:18.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=609, status=PREPARED, latency=95ms
2026-01-30T16:53:18.946+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:18.950+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:18.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 383
2026-01-30T16:53:18.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=383, status=PRE_AUTHORIZED, latency=21ms
2026-01-30T16:53:18.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:18.967+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:18.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 340
2026-01-30T16:53:18.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=340, status=RESERVED, latency=15ms
2026-01-30T16:53:18.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:18.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:18.982+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/609/commit
2026-01-30T16:53:18.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 609
2026-01-30T16:53:18.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=609, latency=16ms
2026-01-30T16:53:18.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:18.998+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/383/commit
2026-01-30T16:53:19.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 383
2026-01-30T16:53:19.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=383, latency=15ms
2026-01-30T16:53:19.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:19.013+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/340/commit
2026-01-30T16:53:19.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 340
2026-01-30T16:53:19.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=340, latency=16ms
2026-01-30T16:53:19.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:19.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=179 ms | success=true
2026-01-30T16:53:19.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:19.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:19.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:19.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:19.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 610
2026-01-30T16:53:19.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=610, status=PREPARED, latency=127ms
2026-01-30T16:53:19.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:19.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:19.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 384
2026-01-30T16:53:19.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=384, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:19.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:19.187+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:19.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 341
2026-01-30T16:53:19.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=341, status=RESERVED, latency=27ms
2026-01-30T16:53:19.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:19.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:19.214+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/610/commit
2026-01-30T16:53:19.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 610
2026-01-30T16:53:19.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=610, latency=15ms
2026-01-30T16:53:19.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:19.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/384/commit
2026-01-30T16:53:19.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 384
2026-01-30T16:53:19.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=384, latency=16ms
2026-01-30T16:53:19.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:19.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/341/commit
2026-01-30T16:53:19.261+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 341
2026-01-30T16:53:19.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=341, latency=23ms
2026-01-30T16:53:19.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:19.268+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=218 ms | success=true
2026-01-30T16:53:26.203+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:26.203+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:26.203+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:26.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 611
2026-01-30T16:53:26.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 611
2026-01-30T16:53:26.350+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:26.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 385
2026-01-30T16:53:26.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 385 and transaction ID: TXN-6a82ead8-beaf-431c-a882-f6fad6ad88d3
2026-01-30T16:53:26.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:26.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 342
2026-01-30T16:53:26.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 342
2026-01-30T16:53:26.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 611
2026-01-30T16:53:26.394+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=193 ms | success=true
2026-01-30T16:53:26.408+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:26.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:26.409+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:26.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 612
2026-01-30T16:53:26.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 612
2026-01-30T16:53:26.494+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:26.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 386
2026-01-30T16:53:26.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 386 and transaction ID: TXN-3f303749-a7ea-4944-9048-7978b4f7b1db
2026-01-30T16:53:26.524+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:26.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 343
2026-01-30T16:53:26.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 343
2026-01-30T16:53:26.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 612
2026-01-30T16:53:26.542+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=132 ms | success=true
2026-01-30T16:53:26.554+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:26.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:26.555+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:26.659+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 613
2026-01-30T16:53:26.660+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 613
2026-01-30T16:53:26.661+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:26.676+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 387
2026-01-30T16:53:26.676+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 387 and transaction ID: TXN-4503ce48-0739-4608-9952-8dfd55f5fa40
2026-01-30T16:53:26.676+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:26.691+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 344
2026-01-30T16:53:26.691+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 344
2026-01-30T16:53:26.691+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 613
2026-01-30T16:53:26.691+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=136 ms | success=true
2026-01-30T16:53:26.700+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:26.700+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:26.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:26.783+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 614
2026-01-30T16:53:26.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 614
2026-01-30T16:53:26.784+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:26.806+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 388
2026-01-30T16:53:26.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 388 and transaction ID: TXN-49b6a557-d9cd-4a02-b56b-5dfaf6b07776
2026-01-30T16:53:26.807+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:26.822+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 345
2026-01-30T16:53:26.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 345
2026-01-30T16:53:26.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 614
2026-01-30T16:53:26.823+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=122 ms | success=true
2026-01-30T16:53:26.831+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:26.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:26.832+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:26.915+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 615
2026-01-30T16:53:26.916+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 615
2026-01-30T16:53:26.917+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:26.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 389
2026-01-30T16:53:26.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 389 and transaction ID: TXN-ddaaf984-db94-4119-8c59-73815c09deaa
2026-01-30T16:53:26.940+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:26.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 346
2026-01-30T16:53:26.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 346
2026-01-30T16:53:26.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 615
2026-01-30T16:53:26.958+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=126 ms | success=true
2026-01-30T16:53:26.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:26.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:26.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:27.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 616
2026-01-30T16:53:27.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 616
2026-01-30T16:53:27.050+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:27.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 390
2026-01-30T16:53:27.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 390 and transaction ID: TXN-e10542d6-59f1-4b77-afbb-0aae0fcc8c85
2026-01-30T16:53:27.065+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:27.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 347
2026-01-30T16:53:27.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 347
2026-01-30T16:53:27.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 616
2026-01-30T16:53:27.097+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=143 ms | success=true
2026-01-30T16:53:27.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:27.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:27.112+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:27.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 617
2026-01-30T16:53:27.199+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 617
2026-01-30T16:53:27.200+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:27.215+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 391
2026-01-30T16:53:27.215+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 391 and transaction ID: TXN-4a0c7df1-3260-48cd-8bd4-4fc02be0ec69
2026-01-30T16:53:27.215+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:27.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 348
2026-01-30T16:53:27.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 348
2026-01-30T16:53:27.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 617
2026-01-30T16:53:27.229+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=112 ms | success=true
2026-01-30T16:53:27.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:27.235+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:27.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:27.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 618
2026-01-30T16:53:27.308+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 618
2026-01-30T16:53:27.309+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:27.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 392
2026-01-30T16:53:27.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 392 and transaction ID: TXN-50282282-a795-4791-add7-907779f108d0
2026-01-30T16:53:27.327+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:27.396+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 349
2026-01-30T16:53:27.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 349
2026-01-30T16:53:27.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 618
2026-01-30T16:53:27.400+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=164 ms | success=true
2026-01-30T16:53:27.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:27.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:27.418+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:27.533+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 619
2026-01-30T16:53:27.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 619
2026-01-30T16:53:27.535+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:27.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 393
2026-01-30T16:53:27.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 393 and transaction ID: TXN-f34a255d-9f63-43ad-a133-d5bb5c9f7e07
2026-01-30T16:53:27.567+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:27.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 350
2026-01-30T16:53:27.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 350
2026-01-30T16:53:27.595+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 619
2026-01-30T16:53:27.595+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=175 ms | success=true
2026-01-30T16:53:27.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:27.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:27.599+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:27.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 620
2026-01-30T16:53:27.701+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 620
2026-01-30T16:53:27.702+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:27.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 394
2026-01-30T16:53:27.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 394 and transaction ID: TXN-e307dba3-419c-44a3-8f89-9c518a4c136b
2026-01-30T16:53:27.720+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:27.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 351
2026-01-30T16:53:27.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 351
2026-01-30T16:53:27.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 620
2026-01-30T16:53:27.741+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=141 ms | success=true
2026-01-30T16:53:27.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:27.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:27.748+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:27.849+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 621
2026-01-30T16:53:27.850+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 621
2026-01-30T16:53:27.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:27.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 395
2026-01-30T16:53:27.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 395 and transaction ID: TXN-5f7e42b4-5c68-4963-bf01-ad2fa07036ed
2026-01-30T16:53:27.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:27.883+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:27.8835733","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:27.8835733","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:27.883+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:27.8835733","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:27.8835733","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:27.8835733","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:53:27.883+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 395
2026-01-30T16:53:27.899+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 621
2026-01-30T16:53:27.914+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=174 ms | success=false
2026-01-30T16:53:27.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:27.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:27.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 622
2026-01-30T16:53:28.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 622
2026-01-30T16:53:28.031+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 396
2026-01-30T16:53:28.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 396 and transaction ID: TXN-b3287dcc-b1c8-4075-9127-8d1465a8d852
2026-01-30T16:53:28.046+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:28.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 352
2026-01-30T16:53:28.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 352
2026-01-30T16:53:28.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 622
2026-01-30T16:53:28.062+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=142 ms | success=true
2026-01-30T16:53:28.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 623
2026-01-30T16:53:28.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 623
2026-01-30T16:53:28.172+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 397
2026-01-30T16:53:28.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 397 and transaction ID: TXN-445fba11-3dcc-4216-b452-faf2b59bc843
2026-01-30T16:53:28.188+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:28.204+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:28.2042532","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:28.2042532","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:28.204+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:28.2042532","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:28.2042532","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:28.2042532","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:53:28.204+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 397
2026-01-30T16:53:28.220+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 623
2026-01-30T16:53:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=166 ms | success=false
2026-01-30T16:53:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.245+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 624
2026-01-30T16:53:28.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 624
2026-01-30T16:53:28.357+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 398
2026-01-30T16:53:28.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 398 and transaction ID: TXN-3f773159-80fe-40bb-9c86-64e685dd6381
2026-01-30T16:53:28.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 353
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 353
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 624
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=140 ms | success=true
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 625
2026-01-30T16:53:28.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 625
2026-01-30T16:53:28.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.506+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:28.5061359","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:28.5061359","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:28.506+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:28.5061359","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:28.5061359","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:28.5061359","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T16:53:28.506+01:00  WARN 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 625
2026-01-30T16:53:28.521+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=130 ms | success=false
2026-01-30T16:53:28.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.537+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 626
2026-01-30T16:53:28.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 626
2026-01-30T16:53:28.610+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 399
2026-01-30T16:53:28.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 399 and transaction ID: TXN-7c9741bf-640d-4515-b4cd-a4dd94be499c
2026-01-30T16:53:28.626+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:28.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 354
2026-01-30T16:53:28.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 354
2026-01-30T16:53:28.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 626
2026-01-30T16:53:28.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=116 ms | success=true
2026-01-30T16:53:28.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.657+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 627
2026-01-30T16:53:28.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 627
2026-01-30T16:53:28.756+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 400
2026-01-30T16:53:28.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 400 and transaction ID: TXN-20d9d4ad-c085-42da-897f-ddf3d65aa5c3
2026-01-30T16:53:28.771+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:28.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 355
2026-01-30T16:53:28.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 355
2026-01-30T16:53:28.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 627
2026-01-30T16:53:28.787+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=139 ms | success=true
2026-01-30T16:53:28.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.803+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:28.910+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 628
2026-01-30T16:53:28.911+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 628
2026-01-30T16:53:28.912+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:28.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 401
2026-01-30T16:53:28.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 401 and transaction ID: TXN-42cd6d95-c535-401e-8d6f-a5ca141e5451
2026-01-30T16:53:28.929+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:28.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 356
2026-01-30T16:53:28.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 356
2026-01-30T16:53:28.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 628
2026-01-30T16:53:28.944+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=145 ms | success=true
2026-01-30T16:53:28.962+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:28.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:28.963+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:29.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 629
2026-01-30T16:53:29.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 629
2026-01-30T16:53:29.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:29.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 402
2026-01-30T16:53:29.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 402 and transaction ID: TXN-59685cd9-76c4-4171-aec3-01aa776b7f7d
2026-01-30T16:53:29.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:29.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 357
2026-01-30T16:53:29.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 357
2026-01-30T16:53:29.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 629
2026-01-30T16:53:29.103+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=154 ms | success=true
2026-01-30T16:53:29.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T16:53:29.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T16:53:29.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T16:53:29.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 630
2026-01-30T16:53:29.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 630
2026-01-30T16:53:29.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T16:53:29.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 403
2026-01-30T16:53:29.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 403 and transaction ID: TXN-865e64d7-17ad-4235-a0dc-02803eef217d
2026-01-30T16:53:29.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T16:53:29.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 358
2026-01-30T16:53:29.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 358
2026-01-30T16:53:29.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 630
2026-01-30T16:53:29.254+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=142 ms | success=true
2026-01-30T16:53:29.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:29.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:29.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:29.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:29.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 631
2026-01-30T16:53:29.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=631, status=PREPARED, latency=103ms
2026-01-30T16:53:29.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:29.372+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:29.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 404
2026-01-30T16:53:29.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=404, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:29.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:29.388+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:29.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 359
2026-01-30T16:53:29.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=359, status=RESERVED, latency=31ms
2026-01-30T16:53:29.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:29.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:29.419+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/631/commit
2026-01-30T16:53:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 631
2026-01-30T16:53:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=631, latency=16ms
2026-01-30T16:53:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:29.435+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/404/commit
2026-01-30T16:53:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 404
2026-01-30T16:53:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=404, latency=16ms
2026-01-30T16:53:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:29.451+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/359/commit
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 359
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=359, latency=15ms
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=198 ms | success=true
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:29.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:29.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 632
2026-01-30T16:53:29.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=632, status=PREPARED, latency=106ms
2026-01-30T16:53:29.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:29.572+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:29.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 405
2026-01-30T16:53:29.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=405, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:29.588+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:29.603+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:29.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 360
2026-01-30T16:53:29.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=360, status=RESERVED, latency=31ms
2026-01-30T16:53:29.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:29.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:29.619+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/632/commit
2026-01-30T16:53:29.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 632
2026-01-30T16:53:29.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=632, latency=31ms
2026-01-30T16:53:29.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:29.650+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/405/commit
2026-01-30T16:53:29.666+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 405
2026-01-30T16:53:29.666+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=405, latency=16ms
2026-01-30T16:53:29.666+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:29.666+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/360/commit
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 360
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=360, latency=15ms
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=211 ms | success=true
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:29.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:29.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 633
2026-01-30T16:53:29.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=633, status=PREPARED, latency=101ms
2026-01-30T16:53:29.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:29.782+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:29.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 406
2026-01-30T16:53:29.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=406, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:29.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:29.797+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:29.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 361
2026-01-30T16:53:29.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=361, status=RESERVED, latency=16ms
2026-01-30T16:53:29.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:29.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:29.813+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/633/commit
2026-01-30T16:53:29.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 633
2026-01-30T16:53:29.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=633, latency=15ms
2026-01-30T16:53:29.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:29.828+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/406/commit
2026-01-30T16:53:29.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 406
2026-01-30T16:53:29.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=406, latency=16ms
2026-01-30T16:53:29.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:29.844+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/361/commit
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 361
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=361, latency=16ms
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=174 ms | success=true
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:29.860+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:29.968+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 634
2026-01-30T16:53:29.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=634, status=PREPARED, latency=109ms
2026-01-30T16:53:29.969+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:29.970+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:29.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 407
2026-01-30T16:53:29.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=407, status=PRE_AUTHORIZED, latency=17ms
2026-01-30T16:53:29.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:29.986+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:30.017+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 362
2026-01-30T16:53:30.017+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=362, status=RESERVED, latency=31ms
2026-01-30T16:53:30.017+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:30.017+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:30.017+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/634/commit
2026-01-30T16:53:30.033+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 634
2026-01-30T16:53:30.033+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=634, latency=16ms
2026-01-30T16:53:30.033+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:30.033+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/407/commit
2026-01-30T16:53:30.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 407
2026-01-30T16:53:30.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=407, latency=15ms
2026-01-30T16:53:30.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:30.048+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/362/commit
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 362
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=362, latency=16ms
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=198 ms | success=true
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:30.064+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:30.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 635
2026-01-30T16:53:30.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=635, status=PREPARED, latency=117ms
2026-01-30T16:53:30.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:30.181+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:30.212+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 408
2026-01-30T16:53:30.212+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=408, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T16:53:30.212+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:30.212+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:30.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 363
2026-01-30T16:53:30.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=363, status=RESERVED, latency=16ms
2026-01-30T16:53:30.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:30.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:30.228+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/635/commit
2026-01-30T16:53:30.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 635
2026-01-30T16:53:30.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=635, latency=15ms
2026-01-30T16:53:30.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:30.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/408/commit
2026-01-30T16:53:30.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 408
2026-01-30T16:53:30.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=408, latency=16ms
2026-01-30T16:53:30.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:30.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/363/commit
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 363
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=363, latency=15ms
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=203 ms | success=true
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:30.274+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:30.389+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 636
2026-01-30T16:53:30.389+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=636, status=PREPARED, latency=115ms
2026-01-30T16:53:30.389+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:30.389+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:30.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 409
2026-01-30T16:53:30.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=409, status=PRE_AUTHORIZED, latency=23ms
2026-01-30T16:53:30.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:30.412+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 364
2026-01-30T16:53:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=364, status=RESERVED, latency=16ms
2026-01-30T16:53:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:30.428+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/636/commit
2026-01-30T16:53:30.443+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 636
2026-01-30T16:53:30.443+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=636, latency=15ms
2026-01-30T16:53:30.443+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:30.443+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/409/commit
2026-01-30T16:53:30.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 409
2026-01-30T16:53:30.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=409, latency=16ms
2026-01-30T16:53:30.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:30.459+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/364/commit
2026-01-30T16:53:30.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 364
2026-01-30T16:53:30.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=364, latency=15ms
2026-01-30T16:53:30.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:30.474+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=196 ms | success=true
2026-01-30T16:53:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:30.490+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:30.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 637
2026-01-30T16:53:30.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=637, status=PREPARED, latency=96ms
2026-01-30T16:53:30.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:30.586+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:30.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 410
2026-01-30T16:53:30.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=410, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:30.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:30.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:30.633+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 365
2026-01-30T16:53:30.633+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=365, status=RESERVED, latency=32ms
2026-01-30T16:53:30.633+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:30.633+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:30.633+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/637/commit
2026-01-30T16:53:30.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 637
2026-01-30T16:53:30.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=637, latency=15ms
2026-01-30T16:53:30.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:30.648+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/410/commit
2026-01-30T16:53:30.664+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 410
2026-01-30T16:53:30.664+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=410, latency=16ms
2026-01-30T16:53:30.664+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:30.664+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/365/commit
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 365
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=365, latency=15ms
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=192 ms | success=true
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:30.679+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:30.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 638
2026-01-30T16:53:30.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=638, status=PREPARED, latency=83ms
2026-01-30T16:53:30.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:30.762+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:30.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 411
2026-01-30T16:53:30.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=411, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:30.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:30.778+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:30.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 366
2026-01-30T16:53:30.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=366, status=RESERVED, latency=15ms
2026-01-30T16:53:30.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:30.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:30.793+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/638/commit
2026-01-30T16:53:30.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 638
2026-01-30T16:53:30.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=638, latency=16ms
2026-01-30T16:53:30.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:30.809+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/411/commit
2026-01-30T16:53:30.825+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 411
2026-01-30T16:53:30.825+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=411, latency=16ms
2026-01-30T16:53:30.825+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:30.825+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/366/commit
2026-01-30T16:53:30.840+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 366
2026-01-30T16:53:30.840+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=366, latency=15ms
2026-01-30T16:53:30.840+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:30.840+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=158 ms | success=true
2026-01-30T16:53:30.840+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:30.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:30.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:30.856+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:30.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 639
2026-01-30T16:53:30.965+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=639, status=PREPARED, latency=109ms
2026-01-30T16:53:30.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:30.966+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:30.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 412
2026-01-30T16:53:30.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=412, status=PRE_AUTHORIZED, latency=24ms
2026-01-30T16:53:30.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:30.990+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:31.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 367
2026-01-30T16:53:31.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=367, status=RESERVED, latency=15ms
2026-01-30T16:53:31.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:31.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:31.005+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/639/commit
2026-01-30T16:53:31.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 639
2026-01-30T16:53:31.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=639, latency=16ms
2026-01-30T16:53:31.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:31.021+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/412/commit
2026-01-30T16:53:31.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 412
2026-01-30T16:53:31.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=412, latency=16ms
2026-01-30T16:53:31.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:31.037+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/367/commit
2026-01-30T16:53:31.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 367
2026-01-30T16:53:31.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=367, latency=20ms
2026-01-30T16:53:31.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:31.057+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=201 ms | success=true
2026-01-30T16:53:31.058+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:31.058+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:31.058+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:31.058+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:31.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 640
2026-01-30T16:53:31.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=640, status=PREPARED, latency=102ms
2026-01-30T16:53:31.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:31.160+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:31.175+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 413
2026-01-30T16:53:31.175+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=413, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:31.175+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:31.175+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:31.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 368
2026-01-30T16:53:31.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=368, status=RESERVED, latency=16ms
2026-01-30T16:53:31.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:31.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:31.191+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/640/commit
2026-01-30T16:53:31.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 640
2026-01-30T16:53:31.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=640, latency=15ms
2026-01-30T16:53:31.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:31.206+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/413/commit
2026-01-30T16:53:31.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 413
2026-01-30T16:53:31.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=413, latency=16ms
2026-01-30T16:53:31.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:31.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/368/commit
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 368
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=368, latency=16ms
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=181 ms | success=true
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:31.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:31.340+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 641
2026-01-30T16:53:31.340+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=641, status=PREPARED, latency=102ms
2026-01-30T16:53:31.340+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:31.340+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:31.356+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:31.3563563","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:31.3563563","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:31.356+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T16:53:31.3563563","path":"/api/payments/prepare"}"
2026-01-30T16:53:31.356+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/641/abort
2026-01-30T16:53:31.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 641
2026-01-30T16:53:31.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 31 ms with 1 compensations
2026-01-30T16:53:31.387+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=143 ms | success=false
2026-01-30T16:53:31.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:31.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:31.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:31.403+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 642
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=642, status=PREPARED, latency=95ms
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 414
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=414, status=PRE_AUTHORIZED, latency=0ms
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:31.498+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:31.529+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:31.5294383","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:31.5294383","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T16:53:31.529+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T16:53:31.5294383","path":"/api/shipments/prepare"}"
2026-01-30T16:53:31.529+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/414/abort
2026-01-30T16:53:31.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 414
2026-01-30T16:53:31.545+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/642/abort
2026-01-30T16:53:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 642
2026-01-30T16:53:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 56 ms with 2 compensations
2026-01-30T16:53:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=189 ms | success=false
2026-01-30T16:53:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:31.585+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:31.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:31.601+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:31.689+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 643
2026-01-30T16:53:31.689+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=643, status=PREPARED, latency=88ms
2026-01-30T16:53:31.689+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:31.689+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:31.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 415
2026-01-30T16:53:31.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=415, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:31.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:31.705+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:31.720+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 369
2026-01-30T16:53:31.720+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=369, status=RESERVED, latency=15ms
2026-01-30T16:53:31.720+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:31.720+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:31.720+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/643/commit
2026-01-30T16:53:31.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 643
2026-01-30T16:53:31.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=643, latency=16ms
2026-01-30T16:53:31.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:31.736+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/415/commit
2026-01-30T16:53:31.752+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 415
2026-01-30T16:53:31.752+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=415, latency=16ms
2026-01-30T16:53:31.752+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:31.752+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/369/commit
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 369
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=369, latency=15ms
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=173 ms | success=true
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:31.767+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:31.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 644
2026-01-30T16:53:31.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=644, status=PREPARED, latency=108ms
2026-01-30T16:53:31.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:31.875+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:31.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 416
2026-01-30T16:53:31.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=416, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:31.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:31.891+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:31.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 370
2026-01-30T16:53:31.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=370, status=RESERVED, latency=15ms
2026-01-30T16:53:31.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:31.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:31.906+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/644/commit
2026-01-30T16:53:31.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 644
2026-01-30T16:53:31.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=644, latency=24ms
2026-01-30T16:53:31.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:31.930+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/416/commit
2026-01-30T16:53:31.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 416
2026-01-30T16:53:31.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=416, latency=8ms
2026-01-30T16:53:31.938+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:31.939+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/370/commit
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 370
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=370, latency=4ms
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=166 ms | success=true
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:31.942+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:32.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 645
2026-01-30T16:53:32.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=645, status=PREPARED, latency=98ms
2026-01-30T16:53:32.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:32.040+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:32.055+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 417
2026-01-30T16:53:32.055+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=417, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:32.055+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:32.055+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:32.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 371
2026-01-30T16:53:32.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=371, status=RESERVED, latency=16ms
2026-01-30T16:53:32.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:32.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:32.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/645/commit
2026-01-30T16:53:32.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 645
2026-01-30T16:53:32.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=645, latency=16ms
2026-01-30T16:53:32.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:32.087+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/417/commit
2026-01-30T16:53:32.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 417
2026-01-30T16:53:32.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=417, latency=15ms
2026-01-30T16:53:32.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:32.102+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/371/commit
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 371
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=371, latency=16ms
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=171 ms | success=true
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:32.118+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:32.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 646
2026-01-30T16:53:32.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=646, status=PREPARED, latency=104ms
2026-01-30T16:53:32.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:32.222+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:32.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 418
2026-01-30T16:53:32.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=418, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:32.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:32.238+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:32.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 372
2026-01-30T16:53:32.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=372, status=RESERVED, latency=15ms
2026-01-30T16:53:32.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:32.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:32.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/646/commit
2026-01-30T16:53:32.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 646
2026-01-30T16:53:32.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=646, latency=16ms
2026-01-30T16:53:32.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:32.269+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/418/commit
2026-01-30T16:53:32.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 418
2026-01-30T16:53:32.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=418, latency=16ms
2026-01-30T16:53:32.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:32.285+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/372/commit
2026-01-30T16:53:32.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 372
2026-01-30T16:53:32.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=372, latency=15ms
2026-01-30T16:53:32.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:32.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=177 ms | success=true
2026-01-30T16:53:32.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:32.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:32.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:32.316+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:32.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 647
2026-01-30T16:53:32.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=647, status=PREPARED, latency=99ms
2026-01-30T16:53:32.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:32.415+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:32.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 419
2026-01-30T16:53:32.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=419, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:32.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:32.430+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:32.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 373
2026-01-30T16:53:32.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=373, status=RESERVED, latency=16ms
2026-01-30T16:53:32.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:32.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:32.446+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/647/commit
2026-01-30T16:53:32.461+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 647
2026-01-30T16:53:32.461+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=647, latency=15ms
2026-01-30T16:53:32.461+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:32.461+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/419/commit
2026-01-30T16:53:32.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 419
2026-01-30T16:53:32.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=419, latency=16ms
2026-01-30T16:53:32.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:32.477+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/373/commit
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 373
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=373, latency=16ms
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=181 ms | success=true
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:32.493+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:32.590+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 648
2026-01-30T16:53:32.590+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=648, status=PREPARED, latency=97ms
2026-01-30T16:53:32.590+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:32.590+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:32.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 420
2026-01-30T16:53:32.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=420, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T16:53:32.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:32.606+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 374
2026-01-30T16:53:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=374, status=RESERVED, latency=31ms
2026-01-30T16:53:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:32.637+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/648/commit
2026-01-30T16:53:32.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 648
2026-01-30T16:53:32.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=648, latency=16ms
2026-01-30T16:53:32.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:32.653+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/420/commit
2026-01-30T16:53:32.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 420
2026-01-30T16:53:32.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=420, latency=15ms
2026-01-30T16:53:32.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:32.668+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/374/commit
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 374
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=374, latency=16ms
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=184 ms | success=true
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:32.684+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:32.789+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 649
2026-01-30T16:53:32.789+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=649, status=PREPARED, latency=105ms
2026-01-30T16:53:32.789+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:32.789+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:32.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 421
2026-01-30T16:53:32.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=421, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T16:53:32.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:32.804+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 375
2026-01-30T16:53:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=375, status=RESERVED, latency=16ms
2026-01-30T16:53:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:32.820+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/649/commit
2026-01-30T16:53:32.836+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 649
2026-01-30T16:53:32.836+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=649, latency=16ms
2026-01-30T16:53:32.836+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:32.836+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/421/commit
2026-01-30T16:53:32.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 421
2026-01-30T16:53:32.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=421, latency=15ms
2026-01-30T16:53:32.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:32.851+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/375/commit
2026-01-30T16:53:32.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 375
2026-01-30T16:53:32.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=375, latency=16ms
2026-01-30T16:53:32.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:32.867+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=180 ms | success=true
2026-01-30T16:53:32.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T16:53:32.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T16:53:32.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T16:53:32.882+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T16:53:32.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 650
2026-01-30T16:53:32.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=650, status=PREPARED, latency=110ms
2026-01-30T16:53:32.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T16:53:32.992+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T16:53:33.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 422
2026-01-30T16:53:33.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=422, status=PRE_AUTHORIZED, latency=22ms
2026-01-30T16:53:33.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T16:53:33.014+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T16:53:33.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 376
2026-01-30T16:53:33.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=376, status=RESERVED, latency=15ms
2026-01-30T16:53:33.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T16:53:33.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T16:53:33.029+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/650/commit
2026-01-30T16:53:33.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 650
2026-01-30T16:53:33.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=650, latency=16ms
2026-01-30T16:53:33.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T16:53:33.045+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/422/commit
2026-01-30T16:53:33.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 422
2026-01-30T16:53:33.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=422, latency=16ms
2026-01-30T16:53:33.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T16:53:33.061+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/376/commit
2026-01-30T16:53:33.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 376
2026-01-30T16:53:33.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=376, latency=15ms
2026-01-30T16:53:33.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T16:53:33.076+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=197 ms | success=true
2026-01-30T19:41:53.566+01:00  WARN 3676 --- [Api Gateway] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h19m51s699ms810s800ns).
2026-01-30T19:51:17.130+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:17.135+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:17.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.081+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.0690735","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.0690735","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.107+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.0690735","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.0690735","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.0690735","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.111+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=1975 ms | success=false
2026-01-30T19:51:19.125+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.125+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.125+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.231+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.2311239","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.2311239","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.241+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.2311239","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.2311239","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.2311239","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.246+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=120 ms | success=false
2026-01-30T19:51:19.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.253+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.347+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.3476919","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.3476919","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.356+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.3476919","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.3476919","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.3476919","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.358+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=104 ms | success=false
2026-01-30T19:51:19.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.365+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.466+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.4664092","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.4664092","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.466+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.4664092","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.4664092","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.4664092","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.466+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=113 ms | success=false
2026-01-30T19:51:19.485+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.485+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.485+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.569+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.5679006","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.5679006","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.573+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.5679006","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.5679006","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.5679006","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=90 ms | success=false
2026-01-30T19:51:19.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.573+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.677+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.6760012","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.6760012","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.680+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.6760012","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.6760012","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.6760012","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=100 ms | success=false
2026-01-30T19:51:19.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.681+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.780+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.7802294","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.7802294","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.780+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.7802294","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.7802294","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.7802294","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.795+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=104 ms | success=false
2026-01-30T19:51:19.801+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.801+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:19.801+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:19.971+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.9697733","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.9697733","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:19.977+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.9697733","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.9697733","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:19.9697733","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:19.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=181 ms | success=false
2026-01-30T19:51:19.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:19.981+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.008+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.137+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.137212","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.137212","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.137+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.137212","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.137212","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.137212","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.137+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=152 ms | success=false
2026-01-30T19:51:20.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.152+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.245+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.2447734","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.2447734","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.250+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.2447734","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.2447734","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.2447734","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.252+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=99 ms | success=false
2026-01-30T19:51:20.258+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.259+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.339+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.3391691","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.3391691","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.343+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.3391691","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.3391691","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.3391691","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.347+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=88 ms | success=false
2026-01-30T19:51:20.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.353+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.453+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.4533805","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.4533805","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.453+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.4533805","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.4533805","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.4533805","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=116 ms | success=false
2026-01-30T19:51:20.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.575+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.5756767","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.5756767","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.575+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.5756767","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.5756767","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.5756767","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.575+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=112 ms | success=false
2026-01-30T19:51:20.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.591+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.703+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.7020304","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.7020304","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.707+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.7020304","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.7020304","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.7020304","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.711+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=116 ms | success=false
2026-01-30T19:51:20.716+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.717+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.804+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.8033154","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.8033154","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.809+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.8033154","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.8033154","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.8033154","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.812+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=94 ms | success=false
2026-01-30T19:51:20.817+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.818+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:20.920+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.9201546","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.9201546","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:20.920+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.9201546","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.9201546","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:20.9201546","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:20.920+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=115 ms | success=false
2026-01-30T19:51:20.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:20.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:20.935+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:21.044+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.0445567","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.0445567","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.044+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.0445567","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.0445567","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.0445567","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:21.044+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=119 ms | success=false
2026-01-30T19:51:21.084+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:21.085+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:21.086+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:21.244+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.244794","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.244794","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.270+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.244794","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.244794","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.244794","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:21.284+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=212 ms | success=false
2026-01-30T19:51:21.300+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:21.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:21.315+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:21.423+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.4230469","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.4230469","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.423+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.4230469","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.4230469","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.4230469","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:21.423+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=117 ms | success=false
2026-01-30T19:51:21.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:51:21.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:51:21.438+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:51:21.550+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5503606","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5503606","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.550+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5503606","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5503606","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5503606","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:51:21.550+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=119 ms | success=false
2026-01-30T19:51:21.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.565+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.593+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5918001","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5918001","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.594+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.5918001","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.594+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=29 ms | success=false
2026-01-30T19:51:21.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.609+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.636+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.6343757","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.6343757","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.641+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.6343757","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.641+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=32 ms | success=false
2026-01-30T19:51:21.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.644+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.674+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.6739744","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.6739744","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.677+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.6739744","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.677+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=30 ms | success=false
2026-01-30T19:51:21.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.685+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.716+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.7155969","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.7155969","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.719+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.7155969","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.719+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=31 ms | success=false
2026-01-30T19:51:21.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.727+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.759+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.7586534","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.7586534","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.763+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.7586534","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.763+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=32 ms | success=false
2026-01-30T19:51:21.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.768+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.801+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.8003401","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.8003401","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.810+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.8003401","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.810+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=53 ms | success=false
2026-01-30T19:51:21.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.826+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.885+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.8829818","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.8829818","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:21.885+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.8829818","path":"/api/orders/prepare"}"
2026-01-30T19:51:21.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:21.885+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=64 ms | success=false
2026-01-30T19:51:21.925+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:21.925+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:21.925+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:21.926+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:21.994+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.9887657","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.9887657","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.001+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:21.9887657","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.001+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.002+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=76 ms | success=false
2026-01-30T19:51:22.025+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.026+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.027+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.068+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.0671782","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.0671782","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.071+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.0671782","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.071+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.072+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=44 ms | success=false
2026-01-30T19:51:22.077+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.078+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.115+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1145605","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1145605","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.119+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1145605","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=41 ms | success=false
2026-01-30T19:51:22.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.119+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.145+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1458266","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1458266","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.145+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1458266","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.145+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=25 ms | success=false
2026-01-30T19:51:22.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.167+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.168+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.200+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1952964","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1952964","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.202+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.1952964","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.202+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.202+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=36 ms | success=false
2026-01-30T19:51:22.202+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.202+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.202+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.202+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.231+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.2180502","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.2180502","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.236+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.2180502","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.236+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=25 ms | success=false
2026-01-30T19:51:22.242+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.243+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.279+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.2787875","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.2787875","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.281+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.2787875","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.281+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.281+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=39 ms | success=false
2026-01-30T19:51:22.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.289+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.310+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.3105191","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.3105191","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.310+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.3105191","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.310+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=34 ms | success=false
2026-01-30T19:51:22.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.326+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.362+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.357392","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.357392","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.365+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.357392","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.366+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=34 ms | success=false
2026-01-30T19:51:22.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.378+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.412+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.4105418","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.4105418","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.417+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.4105418","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.417+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.417+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=39 ms | success=false
2026-01-30T19:51:22.423+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.424+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.459+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.458928","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.458928","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.462+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.458928","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.463+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=40 ms | success=false
2026-01-30T19:51:22.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.468+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.484+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.4846224","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.4846224","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.499+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.4846224","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.500+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.500+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=27 ms | success=false
2026-01-30T19:51:22.509+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:51:22.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:51:22.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:51:22.510+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:51:22.519+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.5191371","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.5191371","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:51:22.534+01:00 ERROR 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: could not prepare statement [Table \"ORDERS\" not found (this database is empty); SQL statement:\ninsert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default) [42104-232]] [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]; SQL [insert into orders (created_at,customer_email,customer_name,shipping_address,status,total_amount,updated_at,version,id) values (?,?,?,?,?,?,?,?,default)]","timestamp":"2026-01-30T19:51:22.5191371","path":"/api/orders/prepare"}"
2026-01-30T19:51:22.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:51:22.534+01:00  INFO 3676 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=26 ms | success=false
2026-01-30T19:51:26.531+01:00  INFO 3676 --- [Api Gateway] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-30T19:51:26.595+01:00  INFO 3676 --- [Api Gateway] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-30T19:51:26.736+01:00  INFO 3676 --- [Api Gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-30T19:51:26.767+01:00  WARN 3676 --- [Api Gateway] [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2026-01-30T19:51:26.767+01:00  INFO 3676 --- [Api Gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-30T19:51:26.783+01:00  INFO 3676 --- [Api Gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-30T19:51:52.987+01:00  INFO 13824 --- [Api Gateway] [restartedMain] h.f.e.gateway.ApiGatewayApplication      : Starting ApiGatewayApplication using Java 21.0.8 with PID 13824 (C:\DiplProj\ecommerce-microservices-project\gateway\target\classes started by K76 in C:\DiplProj\ecommerce-microservices-project\gateway)
2026-01-30T19:51:52.987+01:00  INFO 13824 --- [Api Gateway] [restartedMain] h.f.e.gateway.ApiGatewayApplication      : No active profile set, falling back to 1 default profile: "default"
2026-01-30T19:51:53.103+01:00  INFO 13824 --- [Api Gateway] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-30T19:51:53.103+01:00  INFO 13824 --- [Api Gateway] [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-30T19:51:55.548+01:00  INFO 13824 --- [Api Gateway] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-30T19:51:55.595+01:00  INFO 13824 --- [Api Gateway] [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 0 JPA repository interfaces.
2026-01-30T19:51:57.809+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-30T19:51:57.855+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-30T19:51:57.871+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2026-01-30T19:51:58.073+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-30T19:51:58.077+01:00  INFO 13824 --- [Api Gateway] [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4974 ms
2026-01-30T19:51:59.578+01:00  INFO 13824 --- [Api Gateway] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-30T19:52:01.142+01:00  INFO 13824 --- [Api Gateway] [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:metricsdb user=SA
2026-01-30T19:52:01.146+01:00  INFO 13824 --- [Api Gateway] [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-30T19:52:01.353+01:00  INFO 13824 --- [Api Gateway] [restartedMain] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:metricsdb (H2 2.3)
2026-01-30T19:52:01.477+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2026-01-30T19:52:01.499+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 1 migration (execution time 00:00.054s)
2026-01-30T19:52:01.531+01:00  INFO 13824 --- [Api Gateway] [restartedMain] org.flywaydb.core.Flyway                 : All configured schemas are empty; baseline operation skipped. A baseline or migration script with a lower version than the baseline version may execute if available. Check the Schemas parameter if this is not intended.
2026-01-30T19:52:01.545+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2026-01-30T19:52:01.666+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2026-01-30T19:52:01.685+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create metrics tables"
2026-01-30T19:52:01.754+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.f.core.internal.command.DbMigrate      : Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.032s)
2026-01-30T19:52:01.972+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-30T19:52:02.145+01:00  INFO 13824 --- [Api Gateway] [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2026-01-30T19:52:02.255+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-30T19:52:03.168+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-30T19:52:03.490+01:00  INFO 13824 --- [Api Gateway] [restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-30T19:52:04.467+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-30T19:52:04.483+01:00  INFO 13824 --- [Api Gateway] [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-30T19:52:05.010+01:00  WARN 13824 --- [Api Gateway] [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-30T19:52:05.841+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:metricsdb'
2026-01-30T19:52:06.224+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2026-01-30T19:52:06.450+01:00  INFO 13824 --- [Api Gateway] [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-30T19:52:06.457+01:00  INFO 13824 --- [Api Gateway] [restartedMain] h.f.e.gateway.ApiGatewayApplication      : Started ApiGatewayApplication in 15.451 seconds (process running for 17.166)
2026-01-30T19:52:40.558+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-30T19:52:40.558+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-30T19:52:40.573+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 15 ms
2026-01-30T19:52:40.897+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:40.897+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:40.913+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:42.080+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 6
2026-01-30T19:52:42.080+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 6
2026-01-30T19:52:42.095+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:42.597+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 6
2026-01-30T19:52:42.597+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 6 and transaction ID: TXN-c9236bc9-0c0d-4076-8988-077f404ce727
2026-01-30T19:52:42.597+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:43.259+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 6
2026-01-30T19:52:43.259+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 6
2026-01-30T19:52:43.259+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 6
2026-01-30T19:52:43.259+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=2352 ms | success=true
2026-01-30T19:52:43.294+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:43.295+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:43.296+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:43.443+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 7
2026-01-30T19:52:43.443+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 7
2026-01-30T19:52:43.443+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:43.474+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 7
2026-01-30T19:52:43.474+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 7 and transaction ID: TXN-0bad9da4-e18c-472f-bdbb-907eb40b53e4
2026-01-30T19:52:43.474+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:43.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 7
2026-01-30T19:52:43.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 7
2026-01-30T19:52:43.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 7
2026-01-30T19:52:43.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=218 ms | success=true
2026-01-30T19:52:43.525+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:43.525+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:43.525+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:43.657+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 8
2026-01-30T19:52:43.657+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 8
2026-01-30T19:52:43.657+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:43.689+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 8
2026-01-30T19:52:43.689+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 8 and transaction ID: TXN-6ffc4404-a761-439a-9545-76925e74e240
2026-01-30T19:52:43.689+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:43.720+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 8
2026-01-30T19:52:43.720+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 8
2026-01-30T19:52:43.720+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 8
2026-01-30T19:52:43.720+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=200 ms | success=true
2026-01-30T19:52:43.739+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:43.740+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:43.740+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:43.864+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 9
2026-01-30T19:52:43.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 9
2026-01-30T19:52:43.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:43.884+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 9
2026-01-30T19:52:43.884+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 9 and transaction ID: TXN-791a9293-7b0b-42c4-b38b-d89d8a8b80fc
2026-01-30T19:52:43.884+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:43.915+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 9
2026-01-30T19:52:43.915+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 9
2026-01-30T19:52:43.915+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 9
2026-01-30T19:52:43.915+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=182 ms | success=true
2026-01-30T19:52:43.931+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:43.931+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:43.934+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:44.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 10
2026-01-30T19:52:44.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 10
2026-01-30T19:52:44.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:44.230+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 10
2026-01-30T19:52:44.230+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 10 and transaction ID: TXN-5173a545-aaa1-4bc0-95c1-4aa7d125cd8e
2026-01-30T19:52:44.230+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:44.324+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 10
2026-01-30T19:52:44.324+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 10
2026-01-30T19:52:44.324+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 10
2026-01-30T19:52:44.324+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=394 ms | success=true
2026-01-30T19:52:44.324+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:44.339+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:44.341+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:44.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 11
2026-01-30T19:52:44.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 11
2026-01-30T19:52:44.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:44.551+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 11
2026-01-30T19:52:44.551+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 11 and transaction ID: TXN-3ee1e6a9-3116-48cb-900e-3d8d955b8538
2026-01-30T19:52:44.551+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:44.594+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 11
2026-01-30T19:52:44.594+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 11
2026-01-30T19:52:44.594+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 11
2026-01-30T19:52:44.594+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=262 ms | success=true
2026-01-30T19:52:44.610+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:44.617+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:44.617+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:44.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 12
2026-01-30T19:52:44.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 12
2026-01-30T19:52:44.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:44.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 12
2026-01-30T19:52:44.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 12 and transaction ID: TXN-61eaed7d-7e4c-46ee-839a-2255a12e54a8
2026-01-30T19:52:44.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:44.809+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 12
2026-01-30T19:52:44.809+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 12
2026-01-30T19:52:44.809+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 12
2026-01-30T19:52:44.809+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=205 ms | success=true
2026-01-30T19:52:44.835+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:44.841+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:44.843+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:44.989+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 13
2026-01-30T19:52:44.989+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 13
2026-01-30T19:52:44.989+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:45.028+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 13
2026-01-30T19:52:45.028+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 13 and transaction ID: TXN-3a1d9aff-3028-4dcd-ab31-96a6769adcce
2026-01-30T19:52:45.028+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 13
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 13
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 13
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=229 ms | success=true
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:45.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:45.207+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 14
2026-01-30T19:52:45.207+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 14
2026-01-30T19:52:45.207+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:45.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 14
2026-01-30T19:52:45.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 14 and transaction ID: TXN-6aa58dad-66cd-4d4d-bc46-2e7c0b9b67b0
2026-01-30T19:52:45.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:45.285+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 14
2026-01-30T19:52:45.300+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 14
2026-01-30T19:52:45.300+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 14
2026-01-30T19:52:45.300+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=225 ms | success=true
2026-01-30T19:52:45.300+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:45.300+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:45.300+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:45.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 15
2026-01-30T19:52:45.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 15
2026-01-30T19:52:45.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:45.576+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 15
2026-01-30T19:52:45.576+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 15 and transaction ID: TXN-ad2efd5c-d488-4344-a2bd-60d479202f3a
2026-01-30T19:52:45.576+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:45.668+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 15
2026-01-30T19:52:45.668+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 15
2026-01-30T19:52:45.668+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 15
2026-01-30T19:52:45.668+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=364 ms | success=true
2026-01-30T19:52:45.683+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:45.683+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:45.683+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:45.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 16
2026-01-30T19:52:45.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 16
2026-01-30T19:52:45.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:45.849+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 16
2026-01-30T19:52:45.849+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 16 and transaction ID: TXN-699fadcd-277d-44c0-9316-fd86b6ac92e2
2026-01-30T19:52:45.849+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:45.881+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 16
2026-01-30T19:52:45.881+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 16
2026-01-30T19:52:45.881+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 16
2026-01-30T19:52:45.881+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=199 ms | success=true
2026-01-30T19:52:45.896+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:45.896+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:45.896+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:46.034+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 17
2026-01-30T19:52:46.035+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 17
2026-01-30T19:52:46.036+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:46.060+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 17
2026-01-30T19:52:46.060+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 17 and transaction ID: TXN-aeee1fc9-0016-4851-a7d9-ae33eeba0389
2026-01-30T19:52:46.060+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:46.091+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 17
2026-01-30T19:52:46.091+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 17
2026-01-30T19:52:46.091+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 17
2026-01-30T19:52:46.091+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=200 ms | success=true
2026-01-30T19:52:46.107+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:46.107+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:46.107+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:46.230+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 18
2026-01-30T19:52:46.230+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 18
2026-01-30T19:52:46.230+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:46.262+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 18
2026-01-30T19:52:46.262+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 18 and transaction ID: TXN-bc6a6e93-a7ca-4f39-9943-f7abc35a5539
2026-01-30T19:52:46.262+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:46.293+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 18
2026-01-30T19:52:46.293+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 18
2026-01-30T19:52:46.293+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 18
2026-01-30T19:52:46.293+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=185 ms | success=true
2026-01-30T19:52:46.309+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:46.309+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:46.309+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:46.424+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 19
2026-01-30T19:52:46.424+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 19
2026-01-30T19:52:46.440+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:46.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 19
2026-01-30T19:52:46.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 19 and transaction ID: TXN-3dba3480-3b80-4860-a850-9b5afbae3ea3
2026-01-30T19:52:46.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:46.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 19
2026-01-30T19:52:46.518+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 19
2026-01-30T19:52:46.518+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 19
2026-01-30T19:52:46.518+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=209 ms | success=true
2026-01-30T19:52:46.518+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:46.534+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:46.534+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:46.685+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 20
2026-01-30T19:52:46.685+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 20
2026-01-30T19:52:46.701+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:46.736+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 20
2026-01-30T19:52:46.736+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 20 and transaction ID: TXN-afb11352-50e3-4e0c-a466-9400ecea0790
2026-01-30T19:52:46.736+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:46.768+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 20
2026-01-30T19:52:46.768+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 20
2026-01-30T19:52:46.768+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 20
2026-01-30T19:52:46.768+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=247 ms | success=true
2026-01-30T19:52:46.799+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:46.799+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:46.799+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:46.985+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 21
2026-01-30T19:52:46.987+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 21
2026-01-30T19:52:46.988+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:47.040+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 21
2026-01-30T19:52:47.041+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 21 and transaction ID: TXN-3ba71a53-de01-4781-8bf1-b4c45477d18b
2026-01-30T19:52:47.042+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:47.079+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 21
2026-01-30T19:52:47.079+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 21
2026-01-30T19:52:47.079+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 21
2026-01-30T19:52:47.079+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=285 ms | success=true
2026-01-30T19:52:47.094+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:47.094+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:47.094+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:47.211+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 22
2026-01-30T19:52:47.211+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 22
2026-01-30T19:52:47.211+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:47.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 22
2026-01-30T19:52:47.254+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 22 and transaction ID: TXN-015c2b86-1724-4dcf-ac51-532e9770cf5d
2026-01-30T19:52:47.254+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:47.296+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 22
2026-01-30T19:52:47.299+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 22
2026-01-30T19:52:47.301+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 22
2026-01-30T19:52:47.301+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=200 ms | success=true
2026-01-30T19:52:47.313+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:47.313+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:47.314+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:47.422+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 23
2026-01-30T19:52:47.422+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 23
2026-01-30T19:52:47.422+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:47.454+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 23
2026-01-30T19:52:47.454+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 23 and transaction ID: TXN-c1feb214-acc9-415f-adb9-10adcdcbce5e
2026-01-30T19:52:47.454+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:47.477+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 23
2026-01-30T19:52:47.477+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 23
2026-01-30T19:52:47.477+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 23
2026-01-30T19:52:47.477+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=176 ms | success=true
2026-01-30T19:52:47.492+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:47.492+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:47.492+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:47.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 24
2026-01-30T19:52:47.640+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 24
2026-01-30T19:52:47.640+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:47.718+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 24
2026-01-30T19:52:47.718+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 24 and transaction ID: TXN-6fd1ad5b-1359-41be-b468-dddfbf0b9301
2026-01-30T19:52:47.718+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:47.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 24
2026-01-30T19:52:47.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 24
2026-01-30T19:52:47.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 24
2026-01-30T19:52:47.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=278 ms | success=true
2026-01-30T19:52:47.812+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:47.812+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:47.812+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:48.035+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 25
2026-01-30T19:52:48.035+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 25
2026-01-30T19:52:48.036+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:52:48.073+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 25
2026-01-30T19:52:48.073+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 25 and transaction ID: TXN-37f0b466-f181-469e-ab71-c459f177de86
2026-01-30T19:52:48.074+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:52:48.121+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 25
2026-01-30T19:52:48.121+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 25
2026-01-30T19:52:48.124+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 25
2026-01-30T19:52:48.124+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=308 ms | success=true
2026-01-30T19:52:48.139+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:48.139+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:48.139+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:48.139+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:48.307+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 26
2026-01-30T19:52:48.307+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=26, status=PREPARED, latency=168ms
2026-01-30T19:52:48.308+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:52:48.308+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:52:48.341+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 26
2026-01-30T19:52:48.341+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=26, status=PRE_AUTHORIZED, latency=33ms
2026-01-30T19:52:48.342+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:52:48.342+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:52:48.381+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 26
2026-01-30T19:52:48.381+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=26, status=RESERVED, latency=39ms
2026-01-30T19:52:48.393+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:52:48.394+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:52:48.394+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/26/commit
2026-01-30T19:52:48.490+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 26
2026-01-30T19:52:48.491+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=26, latency=97ms
2026-01-30T19:52:48.491+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:52:48.491+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/26/commit
2026-01-30T19:52:48.527+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 26
2026-01-30T19:52:48.527+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=26, latency=36ms
2026-01-30T19:52:48.528+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:52:48.528+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/26/commit
2026-01-30T19:52:48.547+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 26
2026-01-30T19:52:48.547+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=26, latency=19ms
2026-01-30T19:52:48.547+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:52:48.547+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=413 ms | success=true
2026-01-30T19:52:48.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:48.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:48.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:48.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:48.663+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 27
2026-01-30T19:52:48.663+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=27, status=PREPARED, latency=96ms
2026-01-30T19:52:48.663+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:52:48.663+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:52:48.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 27
2026-01-30T19:52:48.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=27, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:52:48.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:52:48.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:52:48.741+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:52:48.7100705","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:52:48.7100705","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:48.756+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:52:48.7100705","path":"/api/shipments/prepare"}"
2026-01-30T19:52:48.772+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/27/abort
2026-01-30T19:52:48.788+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 27
2026-01-30T19:52:48.788+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/27/abort
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 27
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 99 ms with 2 compensations
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=306 ms | success=false
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:48.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:49.028+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 28
2026-01-30T19:52:49.028+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=28, status=PREPARED, latency=157ms
2026-01-30T19:52:49.051+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:52:49.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:52:49.141+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 28
2026-01-30T19:52:49.154+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=28, status=PRE_AUTHORIZED, latency=103ms
2026-01-30T19:52:49.159+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:52:49.159+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:52:49.261+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 27
2026-01-30T19:52:49.263+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=27, status=RESERVED, latency=104ms
2026-01-30T19:52:49.265+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:52:49.265+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:52:49.265+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/28/commit
2026-01-30T19:52:49.279+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 28
2026-01-30T19:52:49.280+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=28, latency=15ms
2026-01-30T19:52:49.280+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:52:49.280+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/28/commit
2026-01-30T19:52:49.296+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 28
2026-01-30T19:52:49.296+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=28, latency=16ms
2026-01-30T19:52:49.296+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:52:49.296+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/27/commit
2026-01-30T19:52:49.311+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 27
2026-01-30T19:52:49.311+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=27, latency=15ms
2026-01-30T19:52:49.311+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:52:49.311+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=439 ms | success=true
2026-01-30T19:52:49.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:49.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:49.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:49.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:49.434+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 29
2026-01-30T19:52:49.434+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=29, status=PREPARED, latency=107ms
2026-01-30T19:52:49.434+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:52:49.434+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:52:49.466+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 29
2026-01-30T19:52:49.466+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=29, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T19:52:49.466+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:52:49.466+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:52:49.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 28
2026-01-30T19:52:49.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=28, status=RESERVED, latency=31ms
2026-01-30T19:52:49.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:52:49.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:52:49.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/29/commit
2026-01-30T19:52:49.512+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 29
2026-01-30T19:52:49.512+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=29, latency=15ms
2026-01-30T19:52:49.512+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:52:49.512+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/29/commit
2026-01-30T19:52:49.536+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 29
2026-01-30T19:52:49.536+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=29, latency=24ms
2026-01-30T19:52:49.536+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:52:49.536+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/28/commit
2026-01-30T19:52:49.552+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 28
2026-01-30T19:52:49.552+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=28, latency=16ms
2026-01-30T19:52:49.552+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:52:49.552+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=232 ms | success=true
2026-01-30T19:52:49.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:49.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:49.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:49.567+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:49.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 30
2026-01-30T19:52:49.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=30, status=PREPARED, latency=105ms
2026-01-30T19:52:49.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:52:49.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:52:49.704+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 30
2026-01-30T19:52:49.704+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=30, status=PRE_AUTHORIZED, latency=32ms
2026-01-30T19:52:49.705+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:52:49.705+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:52:49.738+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 29
2026-01-30T19:52:49.738+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=29, status=RESERVED, latency=33ms
2026-01-30T19:52:49.738+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:52:49.738+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:52:49.738+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/30/commit
2026-01-30T19:52:49.754+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 30
2026-01-30T19:52:49.754+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=30, latency=16ms
2026-01-30T19:52:49.754+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:52:49.754+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/30/commit
2026-01-30T19:52:49.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 30
2026-01-30T19:52:49.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=30, latency=15ms
2026-01-30T19:52:49.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:52:49.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/29/commit
2026-01-30T19:52:49.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 29
2026-01-30T19:52:49.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=29, latency=16ms
2026-01-30T19:52:49.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:52:49.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=228 ms | success=true
2026-01-30T19:52:49.801+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:49.801+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:49.801+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:49.801+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:49.904+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 31
2026-01-30T19:52:49.904+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=31, status=PREPARED, latency=103ms
2026-01-30T19:52:49.904+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:52:49.904+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:52:49.951+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 31
2026-01-30T19:52:49.951+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=31, status=PRE_AUTHORIZED, latency=47ms
2026-01-30T19:52:49.951+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:52:49.951+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:52:50.040+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 30
2026-01-30T19:52:50.040+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=30, status=RESERVED, latency=89ms
2026-01-30T19:52:50.044+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:52:50.044+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:52:50.044+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/31/commit
2026-01-30T19:52:50.121+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 31
2026-01-30T19:52:50.123+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=31, latency=79ms
2026-01-30T19:52:50.124+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:52:50.124+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/31/commit
2026-01-30T19:52:50.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 31
2026-01-30T19:52:50.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=31, latency=67ms
2026-01-30T19:52:50.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:52:50.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/30/commit
2026-01-30T19:52:50.231+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 30
2026-01-30T19:52:50.231+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=30, latency=40ms
2026-01-30T19:52:50.231+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:52:50.231+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=435 ms | success=true
2026-01-30T19:52:50.278+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.278+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.293+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.293+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.345+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.3302713\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.3302713","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.3302713\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.3302713","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.345+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.3302713\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.3302713","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.345+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.345+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=57 ms | success=false
2026-01-30T19:52:50.345+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.345+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.345+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.345+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.375+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.3615183\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.3615183","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.3615183\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.3615183","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.378+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.3615183\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.3615183","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.380+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.380+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=22 ms | success=false
2026-01-30T19:52:50.392+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.392+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.392+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.392+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.406+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4042604\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4063005","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4042604\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4063005","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.406+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4042604\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4063005","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.406+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.411+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=18 ms | success=false
2026-01-30T19:52:50.424+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.425+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.425+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.425+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.439+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4350896\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4370894","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4350896\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4370894","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.443+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4350896\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4370894","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.443+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.443+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=18 ms | success=false
2026-01-30T19:52:50.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.472+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4686653\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4706645","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4686653\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4706645","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.475+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4686653\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4706645","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.475+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.475+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=19 ms | success=false
2026-01-30T19:52:50.484+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.484+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.485+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.485+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.500+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4948614\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4978619","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4948614\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4978619","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.503+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.4948614\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.4978619","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.503+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.503+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=18 ms | success=false
2026-01-30T19:52:50.520+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.520+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.520+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.520+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.531+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5310598\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.5310598","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5310598\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.5310598","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.531+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5310598\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.5310598","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.531+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.531+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=21 ms | success=false
2026-01-30T19:52:50.553+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.553+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.553+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.554+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.573+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5677185\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.570721","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5677185\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.570721","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.576+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5677185\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.570721","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.577+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.577+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=23 ms | success=false
2026-01-30T19:52:50.586+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.586+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.587+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.587+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.602+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5982102\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6012132","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5982102\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6012132","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.604+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.5982102\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6012132","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.604+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.604+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=17 ms | success=false
2026-01-30T19:52:50.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.625+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.625+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.625+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.637+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.6344488\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6364489","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.6344488\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6364489","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.640+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.6344488\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6364489","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.640+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.640+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=16 ms | success=false
2026-01-30T19:52:50.658+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.658+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.658+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.658+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.672+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.6688308\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6708319","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.6688308\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6708319","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.672+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.6688308\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.6708319","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=17 ms | success=false
2026-01-30T19:52:50.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.694+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.695+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.712+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.7084983\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.7105001","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.7084983\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.7105001","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.715+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.7084983\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.7105001","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.716+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.716+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=21 ms | success=false
2026-01-30T19:52:50.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.735+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.764+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.7616596\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.7637385","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.7616596\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.7637385","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.766+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.7616596\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.7637385","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.768+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.768+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=33 ms | success=false
2026-01-30T19:52:50.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:50.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:50.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:50.778+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:50.805+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.8012539\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.8032544","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.8012539\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.8032544","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:50.805+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:50.8012539\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:50.8032544","path":"/api/orders/prepare"}"
2026-01-30T19:52:50.805+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:50.805+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=33 ms | success=false
2026-01-30T19:52:53.884+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:53.884+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:53.885+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:53.954+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9520706\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9542224","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9520706\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9542224","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:53.960+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9520706\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9542224","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9520706\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9542224","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9520706\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9542224","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:52:53.960+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=81 ms | success=false
2026-01-30T19:52:53.970+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:53.970+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:53.970+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:53.970+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:53.986+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9865537\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9865537","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9865537\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9865537","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:53.992+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:53.9865537\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:53.9865537","path":"/api/orders/prepare"}"
2026-01-30T19:52:53.993+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:53.993+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=18 ms | success=false
2026-01-30T19:52:56.055+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:52:56.064+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:52:56.077+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:52:56.224+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Error creating order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2040658\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2168465","path":"/api/orders"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2040658\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2168465","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:56.232+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2040658\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2168465","path":"/api/orders"}"

java.lang.RuntimeException: Failed to create order: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2040658\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2168465","path":"/api/orders"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:35) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createOrder(SagaService.java:165) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:41) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2040658\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2168465","path":"/api/orders"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createOrder(MicroserviceClient.java:30) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:52:56.241+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=178 ms | success=false
2026-01-30T19:52:56.248+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:52:56.248+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:52:56.248+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:52:56.248+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:52:56.267+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2574739\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2574739","path":"/api/orders/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2574739\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2574739","path":"/api/orders/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareOrder(MicroserviceClient.java:110) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:117) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:52:56.267+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare order: 500  on POST request for "http://localhost:8082/api/orders/prepare": "{"status":500,"message":"An unexpected error occurred: 500  on POST request for \"http://localhost:8081/api/products/stock/reserve\": \"{\"status\":500,\"message\":\"An unexpected error occurred: Insufficient stock for product 1. Requested: 2, Available: 0\",\"timestamp\":\"2026-01-30T19:52:56.2574739\",\"path\":\"/api/products/stock/reserve\"}\"","timestamp":"2026-01-30T19:52:56.2574739","path":"/api/orders/prepare"}"
2026-01-30T19:52:56.267+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 0 ms with 0 compensations
2026-01-30T19:52:56.267+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=17 ms | success=false
2026-01-30T19:53:28.430+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:28.430+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:28.431+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:28.569+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 32
2026-01-30T19:53:28.569+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 32
2026-01-30T19:53:28.569+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:28.604+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 32
2026-01-30T19:53:28.610+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 32 and transaction ID: TXN-58a86b30-4421-4812-b342-73ec2031495a
2026-01-30T19:53:28.610+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:28.636+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 31
2026-01-30T19:53:28.636+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Shipment created with ID: 31
2026-01-30T19:53:28.636+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 32
2026-01-30T19:53:28.643+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=213 ms | success=true
2026-01-30T19:53:28.652+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:28.652+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:28.652+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:28.758+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 33
2026-01-30T19:53:28.759+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 33
2026-01-30T19:53:28.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:28.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 33
2026-01-30T19:53:28.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 33 and transaction ID: TXN-a6abebb7-6700-4e67-b964-49d878462cd9
2026-01-30T19:53:28.785+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:28.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 32
2026-01-30T19:53:28.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 32
2026-01-30T19:53:28.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 33
2026-01-30T19:53:28.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=167 ms | success=true
2026-01-30T19:53:28.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:28.816+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:28.827+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:28.946+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 34
2026-01-30T19:53:28.946+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 34
2026-01-30T19:53:28.946+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:28.978+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 34
2026-01-30T19:53:28.980+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 34 and transaction ID: TXN-181ed763-d86d-4b71-b45a-2d3c3165f4cb
2026-01-30T19:53:28.980+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 33
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 33
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 34
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=201 ms | success=true
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:29.022+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:29.135+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 35
2026-01-30T19:53:29.135+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 35
2026-01-30T19:53:29.135+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:29.166+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 35
2026-01-30T19:53:29.166+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 35 and transaction ID: TXN-6de03967-4045-4a01-b5a5-ecb5e7bd491d
2026-01-30T19:53:29.166+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:29.261+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 34
2026-01-30T19:53:29.261+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Shipment created with ID: 34
2026-01-30T19:53:29.272+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 35
2026-01-30T19:53:29.272+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=236 ms | success=true
2026-01-30T19:53:29.304+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:29.304+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:29.304+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:29.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 36
2026-01-30T19:53:29.497+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 36
2026-01-30T19:53:29.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:29.560+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 36
2026-01-30T19:53:29.562+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 36 and transaction ID: TXN-92d67845-41ae-48ab-9bd8-c06fc8297f39
2026-01-30T19:53:29.564+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:29.591+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 35
2026-01-30T19:53:29.591+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Shipment created with ID: 35
2026-01-30T19:53:29.592+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 36
2026-01-30T19:53:29.592+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=287 ms | success=true
2026-01-30T19:53:29.593+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:29.593+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:29.593+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:29.690+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 37
2026-01-30T19:53:29.690+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 37
2026-01-30T19:53:29.690+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:29.721+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 37
2026-01-30T19:53:29.721+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Payment created with ID: 37 and transaction ID: TXN-4e40a138-0a90-4382-b71a-223cf81e5d3c
2026-01-30T19:53:29.721+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:29.737+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 36
2026-01-30T19:53:29.737+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Shipment created with ID: 36
2026-01-30T19:53:29.737+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 37
2026-01-30T19:53:29.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=153 ms | success=true
2026-01-30T19:53:29.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:29.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:29.752+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:29.886+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 38
2026-01-30T19:53:29.887+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 38
2026-01-30T19:53:29.889+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:29.939+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 38
2026-01-30T19:53:29.939+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 38 and transaction ID: TXN-7d0446db-aabe-42ca-b194-61df3ffb6990
2026-01-30T19:53:29.943+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:29.993+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 37
2026-01-30T19:53:29.994+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 37
2026-01-30T19:53:29.995+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 38
2026-01-30T19:53:29.995+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=233 ms | success=true
2026-01-30T19:53:30.011+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:30.011+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:30.011+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:30.152+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 39
2026-01-30T19:53:30.152+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 39
2026-01-30T19:53:30.152+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:30.185+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 39
2026-01-30T19:53:30.186+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 39 and transaction ID: TXN-8f73f3b3-1163-4320-a8e0-e358972223c7
2026-01-30T19:53:30.186+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:30.194+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 38
2026-01-30T19:53:30.194+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 38
2026-01-30T19:53:30.194+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 39
2026-01-30T19:53:30.194+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=197 ms | success=true
2026-01-30T19:53:30.210+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:30.210+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:30.210+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:30.369+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 40
2026-01-30T19:53:30.388+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 40
2026-01-30T19:53:30.400+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:30.509+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 40
2026-01-30T19:53:30.509+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 40 and transaction ID: TXN-401df97d-1f81-4bb6-b8a9-83ec077739c3
2026-01-30T19:53:30.509+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:30.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 39
2026-01-30T19:53:30.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 39
2026-01-30T19:53:30.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 40
2026-01-30T19:53:30.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=333 ms | success=true
2026-01-30T19:53:30.556+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:30.556+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:30.556+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:30.709+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 41
2026-01-30T19:53:30.709+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 41
2026-01-30T19:53:30.709+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:30.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 41
2026-01-30T19:53:30.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 41 and transaction ID: TXN-7cb4c587-9cd4-4e79-902b-920b94d98175
2026-01-30T19:53:30.735+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:30.751+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 40
2026-01-30T19:53:30.751+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 40
2026-01-30T19:53:30.751+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 41
2026-01-30T19:53:30.751+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=202 ms | success=true
2026-01-30T19:53:30.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:30.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:30.769+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:30.878+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 42
2026-01-30T19:53:30.878+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Order created with ID: 42
2026-01-30T19:53:30.878+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:30.909+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 42
2026-01-30T19:53:30.909+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Payment created with ID: 42 and transaction ID: TXN-c26818a8-c04a-4df6-af53-0ebd4020ae5d
2026-01-30T19:53:30.909+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:30.930+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:30.9283911","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:30.9283911","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:30.933+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:30.9283911","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:30.9283911","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:30.9283911","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:53:30.933+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 42
2026-01-30T19:53:30.949+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 42
2026-01-30T19:53:30.992+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=232 ms | success=false
2026-01-30T19:53:31.008+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:31.008+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:31.008+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:31.123+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 43
2026-01-30T19:53:31.123+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order created with ID: 43
2026-01-30T19:53:31.123+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:31.154+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 43
2026-01-30T19:53:31.154+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Payment created with ID: 43 and transaction ID: TXN-88a9a28d-fcd9-4cee-a299-edbf8032c999
2026-01-30T19:53:31.154+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 41
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Shipment created with ID: 41
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 43
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=167 ms | success=true
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:31.170+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:31.289+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 44
2026-01-30T19:53:31.289+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order created with ID: 44
2026-01-30T19:53:31.289+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:31.304+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 44
2026-01-30T19:53:31.304+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Payment created with ID: 44 and transaction ID: TXN-0dbbeb21-b11f-4702-bbea-9f3288b972f4
2026-01-30T19:53:31.304+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 42
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Shipment created with ID: 42
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 44
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=169 ms | success=true
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:31.351+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:31.542+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 45
2026-01-30T19:53:31.547+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Order created with ID: 45
2026-01-30T19:53:31.552+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:31.678+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 45
2026-01-30T19:53:31.678+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Payment created with ID: 45 and transaction ID: TXN-870fade9-29e0-44ac-b13f-3449ead973a2
2026-01-30T19:53:31.678+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:31.698+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.6980685","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.6980685","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:31.713+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.6980685","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.6980685","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.6980685","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:53:31.713+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 45
2026-01-30T19:53:31.744+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 45
2026-01-30T19:53:31.776+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=427 ms | success=false
2026-01-30T19:53:31.791+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:31.791+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:31.807+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:31.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 46
2026-01-30T19:53:31.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Order created with ID: 46
2026-01-30T19:53:31.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:31.946+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 46
2026-01-30T19:53:31.946+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Payment created with ID: 46 and transaction ID: TXN-ddaffd6d-8d5d-4223-be00-f8b581ef7193
2026-01-30T19:53:31.946+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:31.961+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Error creating shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.9460703","path":"/api/shipments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.9460703","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:31.961+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.9460703","path":"/api/shipments"}"

java.lang.RuntimeException: Failed to create shipment: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.9460703","path":"/api/shipments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:63) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createShipment(SagaService.java:188) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:55) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:31.9460703","path":"/api/shipments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createShipment(MicroserviceClient.java:58) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:53:31.961+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating payment: refunding payment ID 46
2026-01-30T19:53:31.998+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 46
2026-01-30T19:53:32.017+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=227 ms | success=false
2026-01-30T19:53:32.032+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:32.032+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:32.032+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:32.133+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 47
2026-01-30T19:53:32.133+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Order created with ID: 47
2026-01-30T19:53:32.133+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:32.149+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Error creating payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:32.1494173","path":"/api/payments"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:32.1494173","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:32.149+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.service.SagaService        : Error during order placement: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:32.1494173","path":"/api/payments"}"

java.lang.RuntimeException: Failed to create payment: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:32.1494173","path":"/api/payments"}"
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:49) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.createPayment(SagaService.java:178) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.SagaService.placeOrder(SagaService.java:48) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrder(GatewayController.java:35) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrder(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:32.1494173","path":"/api/payments"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.createPayment(MicroserviceClient.java:44) ~[classes/:na]
	... 64 common frames omitted

2026-01-30T19:53:32.165+01:00  WARN 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : Compensating order: cancelling order ID 47
2026-01-30T19:53:32.180+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=151 ms | success=false
2026-01-30T19:53:32.196+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:32.196+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:32.196+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:32.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 48
2026-01-30T19:53:32.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order created with ID: 48
2026-01-30T19:53:32.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:32.360+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 47
2026-01-30T19:53:32.360+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Payment created with ID: 47 and transaction ID: TXN-842f9ec2-3202-4ab1-81c8-1bf62e7b2809
2026-01-30T19:53:32.361+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 43
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Shipment created with ID: 43
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 48
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=180 ms | success=true
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:32.377+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:32.509+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 49
2026-01-30T19:53:32.509+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order created with ID: 49
2026-01-30T19:53:32.509+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:32.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 48
2026-01-30T19:53:32.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Payment created with ID: 48 and transaction ID: TXN-b0ba586b-ee8f-44d2-ae37-846c35b4752e
2026-01-30T19:53:32.540+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 44
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Shipment created with ID: 44
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 49
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=186 ms | success=true
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:32.571+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:32.684+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 50
2026-01-30T19:53:32.684+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order created with ID: 50
2026-01-30T19:53:32.684+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:32.814+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 49
2026-01-30T19:53:32.814+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Payment created with ID: 49 and transaction ID: TXN-e5334f0e-d435-4447-a141-90c2d43447fd
2026-01-30T19:53:32.814+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:32.927+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 45
2026-01-30T19:53:32.932+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Shipment created with ID: 45
2026-01-30T19:53:32.936+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 50
2026-01-30T19:53:32.936+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=352 ms | success=true
2026-01-30T19:53:32.974+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received place order request for customer: john.doe@example.com
2026-01-30T19:53:32.974+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Starting order placement for customer: john.doe@example.com
2026-01-30T19:53:32.974+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating order at: http://localhost:8082/api/orders
2026-01-30T19:53:33.076+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Order created successfully with ID: 51
2026-01-30T19:53:33.077+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order created with ID: 51
2026-01-30T19:53:33.078+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating payment at: http://localhost:8084/api/payments
2026-01-30T19:53:33.100+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Payment created successfully with ID: 50
2026-01-30T19:53:33.100+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Payment created with ID: 50 and transaction ID: TXN-6cadd221-ddb5-4ff8-a588-12820d212a58
2026-01-30T19:53:33.100+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Creating shipment at: http://localhost:8083/api/shipments
2026-01-30T19:53:33.161+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : Shipment created successfully with ID: 46
2026-01-30T19:53:33.162+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Shipment created with ID: 46
2026-01-30T19:53:33.162+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.service.SagaService        : Order placement completed successfully for order ID: 51
2026-01-30T19:53:33.162+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | SAGA | totalDuration=185 ms | success=true
2026-01-30T19:53:33.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:33.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:33.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:33.167+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:33.277+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 52
2026-01-30T19:53:33.277+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=52, status=PREPARED, latency=110ms
2026-01-30T19:53:33.278+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:33.278+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:33.298+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 51
2026-01-30T19:53:33.298+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=51, status=PRE_AUTHORIZED, latency=20ms
2026-01-30T19:53:33.298+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:33.317+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:33.347+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 47
2026-01-30T19:53:33.348+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=47, status=RESERVED, latency=50ms
2026-01-30T19:53:33.348+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:33.348+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:33.348+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/52/commit
2026-01-30T19:53:33.357+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 52
2026-01-30T19:53:33.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=52, latency=10ms
2026-01-30T19:53:33.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:33.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/51/commit
2026-01-30T19:53:33.379+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 51
2026-01-30T19:53:33.379+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=51, latency=21ms
2026-01-30T19:53:33.379+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:33.380+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/47/commit
2026-01-30T19:53:33.391+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 47
2026-01-30T19:53:33.391+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=47, latency=12ms
2026-01-30T19:53:33.392+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:33.392+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=220 ms | success=true
2026-01-30T19:53:33.399+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:33.399+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:33.399+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:33.400+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:33.516+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 53
2026-01-30T19:53:33.516+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=53, status=PREPARED, latency=117ms
2026-01-30T19:53:33.516+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:33.516+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:33.592+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 52
2026-01-30T19:53:33.592+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=52, status=PRE_AUTHORIZED, latency=76ms
2026-01-30T19:53:33.594+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:33.594+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:33.623+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 48
2026-01-30T19:53:33.623+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=48, status=RESERVED, latency=29ms
2026-01-30T19:53:33.623+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:33.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:33.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/53/commit
2026-01-30T19:53:33.639+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 53
2026-01-30T19:53:33.639+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=53, latency=15ms
2026-01-30T19:53:33.639+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:33.639+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/52/commit
2026-01-30T19:53:33.642+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 52
2026-01-30T19:53:33.642+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=52, latency=3ms
2026-01-30T19:53:33.642+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:33.642+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/48/commit
2026-01-30T19:53:33.665+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 48
2026-01-30T19:53:33.665+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=48, latency=23ms
2026-01-30T19:53:33.665+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:33.665+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=266 ms | success=true
2026-01-30T19:53:33.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:33.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:33.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:33.672+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:33.767+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 54
2026-01-30T19:53:33.767+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=54, status=PREPARED, latency=95ms
2026-01-30T19:53:33.767+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:33.767+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:33.832+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 53
2026-01-30T19:53:33.832+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=53, status=PRE_AUTHORIZED, latency=65ms
2026-01-30T19:53:33.832+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:33.832+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:33.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 49
2026-01-30T19:53:33.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=49, status=RESERVED, latency=33ms
2026-01-30T19:53:33.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:33.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:33.865+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/54/commit
2026-01-30T19:53:33.916+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 54
2026-01-30T19:53:33.916+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=54, latency=51ms
2026-01-30T19:53:33.916+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:33.916+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/53/commit
2026-01-30T19:53:34.028+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 53
2026-01-30T19:53:34.029+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=53, latency=113ms
2026-01-30T19:53:34.030+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:34.036+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/49/commit
2026-01-30T19:53:34.042+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 49
2026-01-30T19:53:34.042+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=49, latency=12ms
2026-01-30T19:53:34.042+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:34.042+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=378 ms | success=true
2026-01-30T19:53:34.058+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:34.058+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:34.058+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:34.058+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:34.203+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 55
2026-01-30T19:53:34.203+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=55, status=PREPARED, latency=145ms
2026-01-30T19:53:34.203+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:34.203+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:34.234+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 54
2026-01-30T19:53:34.234+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=54, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:34.234+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:34.234+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:34.250+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:34.2500946","path":"/api/shipments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:34.2500946","path":"/api/shipments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.prepareShipment(MicroserviceClient.java:190) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:139) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:34.250+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare shipment: 500  on POST request for "http://localhost:8083/api/shipments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated shipping service failure (5% failure)","timestamp":"2026-01-30T19:53:34.2500946","path":"/api/shipments/prepare"}"
2026-01-30T19:53:34.250+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting payment at: http://localhost:8084/api/payments/54/abort
2026-01-30T19:53:34.265+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment aborted - ID: 54
2026-01-30T19:53:34.265+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/55/abort
2026-01-30T19:53:34.297+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 55
2026-01-30T19:53:34.297+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 2 compensations
2026-01-30T19:53:34.297+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=245 ms | success=false
2026-01-30T19:53:34.312+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:34.312+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:34.312+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:34.312+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:34.421+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 56
2026-01-30T19:53:34.421+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=56, status=PREPARED, latency=109ms
2026-01-30T19:53:34.421+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:34.421+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:34.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 55
2026-01-30T19:53:34.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=55, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:34.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:34.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:34.468+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 50
2026-01-30T19:53:34.468+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=50, status=RESERVED, latency=16ms
2026-01-30T19:53:34.468+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:34.468+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:34.468+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/56/commit
2026-01-30T19:53:34.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 56
2026-01-30T19:53:34.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=56, latency=15ms
2026-01-30T19:53:34.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:34.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/55/commit
2026-01-30T19:53:34.499+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 55
2026-01-30T19:53:34.499+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=55, latency=16ms
2026-01-30T19:53:34.499+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:34.499+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/50/commit
2026-01-30T19:53:34.515+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 50
2026-01-30T19:53:34.515+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=50, latency=16ms
2026-01-30T19:53:34.515+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:34.515+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=204 ms | success=true
2026-01-30T19:53:34.515+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:34.515+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:34.530+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:34.530+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:34.653+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 57
2026-01-30T19:53:34.654+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=57, status=PREPARED, latency=124ms
2026-01-30T19:53:34.654+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:34.654+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:34.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 56
2026-01-30T19:53:34.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=56, status=PRE_AUTHORIZED, latency=80ms
2026-01-30T19:53:34.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:34.734+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:34.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 51
2026-01-30T19:53:34.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=51, status=RESERVED, latency=31ms
2026-01-30T19:53:34.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:34.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:34.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/57/commit
2026-01-30T19:53:34.781+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 57
2026-01-30T19:53:34.781+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=57, latency=16ms
2026-01-30T19:53:34.781+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:34.781+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/56/commit
2026-01-30T19:53:34.796+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 56
2026-01-30T19:53:34.796+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=56, latency=15ms
2026-01-30T19:53:34.796+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:34.796+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/51/commit
2026-01-30T19:53:34.812+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 51
2026-01-30T19:53:34.812+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=51, latency=16ms
2026-01-30T19:53:34.859+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:34.859+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=336 ms | success=true
2026-01-30T19:53:34.874+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:34.874+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:34.874+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:34.874+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:34.988+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 58
2026-01-30T19:53:34.988+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=58, status=PREPARED, latency=114ms
2026-01-30T19:53:34.988+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:34.988+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:35.014+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 57
2026-01-30T19:53:35.014+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=57, status=PRE_AUTHORIZED, latency=26ms
2026-01-30T19:53:35.014+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:35.014+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:35.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 52
2026-01-30T19:53:35.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=52, status=RESERVED, latency=38ms
2026-01-30T19:53:35.053+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:35.053+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:35.053+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/58/commit
2026-01-30T19:53:35.104+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 58
2026-01-30T19:53:35.104+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=58, latency=51ms
2026-01-30T19:53:35.104+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:35.104+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/57/commit
2026-01-30T19:53:35.151+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 57
2026-01-30T19:53:35.166+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=57, latency=62ms
2026-01-30T19:53:35.166+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:35.166+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/52/commit
2026-01-30T19:53:35.213+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 52
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=52, latency=57ms
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=349 ms | success=true
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:35.223+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:35.361+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 59
2026-01-30T19:53:35.361+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=59, status=PREPARED, latency=138ms
2026-01-30T19:53:35.361+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:35.361+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:35.408+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 58
2026-01-30T19:53:35.408+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=58, status=PRE_AUTHORIZED, latency=47ms
2026-01-30T19:53:35.408+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:35.408+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:35.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 53
2026-01-30T19:53:35.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=53, status=RESERVED, latency=47ms
2026-01-30T19:53:35.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:35.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:35.455+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/59/commit
2026-01-30T19:53:35.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 59
2026-01-30T19:53:35.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=59, latency=16ms
2026-01-30T19:53:35.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:35.471+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/58/commit
2026-01-30T19:53:35.486+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 58
2026-01-30T19:53:35.486+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=58, latency=15ms
2026-01-30T19:53:35.486+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:35.486+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/53/commit
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 53
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=53, latency=16ms
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=277 ms | success=true
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:35.502+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:35.518+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:35.630+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 60
2026-01-30T19:53:35.630+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=60, status=PREPARED, latency=128ms
2026-01-30T19:53:35.630+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:35.676+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:35.708+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 59
2026-01-30T19:53:35.714+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=59, status=PRE_AUTHORIZED, latency=84ms
2026-01-30T19:53:35.714+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:35.714+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:35.746+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 54
2026-01-30T19:53:35.746+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=54, status=RESERVED, latency=32ms
2026-01-30T19:53:35.746+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:35.746+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:35.746+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/60/commit
2026-01-30T19:53:35.761+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 60
2026-01-30T19:53:35.761+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=60, latency=15ms
2026-01-30T19:53:35.761+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:35.761+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/59/commit
2026-01-30T19:53:35.777+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 59
2026-01-30T19:53:35.777+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=59, latency=16ms
2026-01-30T19:53:35.777+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:35.777+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/54/commit
2026-01-30T19:53:35.793+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 54
2026-01-30T19:53:35.793+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=54, latency=16ms
2026-01-30T19:53:35.793+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:35.793+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=285 ms | success=true
2026-01-30T19:53:35.808+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:35.808+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:35.808+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:35.808+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:35.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 61
2026-01-30T19:53:35.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=61, status=PREPARED, latency=106ms
2026-01-30T19:53:35.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:35.914+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:35.945+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 60
2026-01-30T19:53:35.945+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=60, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:35.945+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:35.945+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:35.976+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 55
2026-01-30T19:53:35.976+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=55, status=RESERVED, latency=31ms
2026-01-30T19:53:35.976+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:35.976+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:35.976+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/61/commit
2026-01-30T19:53:35.992+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 61
2026-01-30T19:53:35.992+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=61, latency=16ms
2026-01-30T19:53:35.992+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:35.992+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/60/commit
2026-01-30T19:53:36.021+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 60
2026-01-30T19:53:36.021+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=60, latency=29ms
2026-01-30T19:53:36.021+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:36.021+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/55/commit
2026-01-30T19:53:36.037+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 55
2026-01-30T19:53:36.037+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=55, latency=16ms
2026-01-30T19:53:36.037+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:36.037+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=236 ms | success=true
2026-01-30T19:53:36.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:36.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:36.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:36.052+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:36.202+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 62
2026-01-30T19:53:36.202+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=62, status=PREPARED, latency=150ms
2026-01-30T19:53:36.202+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:36.202+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:36.233+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 61
2026-01-30T19:53:36.233+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=61, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:36.233+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:36.233+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:36.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 56
2026-01-30T19:53:36.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=56, status=RESERVED, latency=94ms
2026-01-30T19:53:36.342+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:36.342+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:36.342+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/62/commit
2026-01-30T19:53:36.405+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 62
2026-01-30T19:53:36.405+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=62, latency=63ms
2026-01-30T19:53:36.420+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:36.420+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/61/commit
2026-01-30T19:53:36.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 61
2026-01-30T19:53:36.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=61, latency=32ms
2026-01-30T19:53:36.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:36.452+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/56/commit
2026-01-30T19:53:36.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 56
2026-01-30T19:53:36.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=56, latency=31ms
2026-01-30T19:53:36.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:36.483+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-6] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=439 ms | success=true
2026-01-30T19:53:36.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:36.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:36.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:36.498+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:36.633+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 63
2026-01-30T19:53:36.633+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=63, status=PREPARED, latency=135ms
2026-01-30T19:53:36.633+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:36.633+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:36.648+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 62
2026-01-30T19:53:36.648+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=62, status=PRE_AUTHORIZED, latency=15ms
2026-01-30T19:53:36.648+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:36.648+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:36.680+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 57
2026-01-30T19:53:36.680+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=57, status=RESERVED, latency=32ms
2026-01-30T19:53:36.680+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:36.680+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:36.680+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/63/commit
2026-01-30T19:53:36.695+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 63
2026-01-30T19:53:36.695+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=63, latency=15ms
2026-01-30T19:53:36.695+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:36.695+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/62/commit
2026-01-30T19:53:36.711+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 62
2026-01-30T19:53:36.711+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=62, latency=16ms
2026-01-30T19:53:36.711+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:36.711+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/57/commit
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 57
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=57, latency=15ms
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-7] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=234 ms | success=true
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:36.726+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:36.877+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 64
2026-01-30T19:53:36.877+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=64, status=PREPARED, latency=151ms
2026-01-30T19:53:36.877+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:36.877+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:36.908+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 63
2026-01-30T19:53:36.908+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=63, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:36.908+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:36.908+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:36.940+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 58
2026-01-30T19:53:36.940+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=58, status=RESERVED, latency=32ms
2026-01-30T19:53:36.940+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:36.940+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:36.940+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/64/commit
2026-01-30T19:53:36.955+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 64
2026-01-30T19:53:36.955+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=64, latency=15ms
2026-01-30T19:53:36.955+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:36.955+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/63/commit
2026-01-30T19:53:36.971+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 63
2026-01-30T19:53:36.971+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=63, latency=16ms
2026-01-30T19:53:36.971+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:36.971+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/58/commit
2026-01-30T19:53:37.013+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 58
2026-01-30T19:53:37.014+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=58, latency=43ms
2026-01-30T19:53:37.015+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:37.015+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-8] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=274 ms | success=true
2026-01-30T19:53:37.017+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:37.017+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:37.017+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:37.017+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:37.137+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 65
2026-01-30T19:53:37.137+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=65, status=PREPARED, latency=120ms
2026-01-30T19:53:37.137+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:37.137+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:37.152+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:37.1528192","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:37.1528192","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:37.152+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:37.1528192","path":"/api/payments/prepare"}"
2026-01-30T19:53:37.152+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/65/abort
2026-01-30T19:53:37.184+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 65
2026-01-30T19:53:37.184+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 32 ms with 1 compensations
2026-01-30T19:53:37.184+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-9] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=172 ms | success=false
2026-01-30T19:53:37.199+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:37.199+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:37.199+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:37.199+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:37.308+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 66
2026-01-30T19:53:37.308+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=66, status=PREPARED, latency=109ms
2026-01-30T19:53:37.308+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:37.308+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:37.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 64
2026-01-30T19:53:37.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=64, status=PRE_AUTHORIZED, latency=19ms
2026-01-30T19:53:37.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:37.327+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:37.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 59
2026-01-30T19:53:37.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=59, status=RESERVED, latency=31ms
2026-01-30T19:53:37.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:37.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:37.358+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/66/commit
2026-01-30T19:53:37.373+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 66
2026-01-30T19:53:37.373+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=66, latency=15ms
2026-01-30T19:53:37.373+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:37.373+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/64/commit
2026-01-30T19:53:37.389+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 64
2026-01-30T19:53:37.389+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=64, latency=16ms
2026-01-30T19:53:37.389+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:37.389+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/59/commit
2026-01-30T19:53:37.404+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 59
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=59, latency=24ms
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-10] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=210 ms | success=true
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:37.413+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:37.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 67
2026-01-30T19:53:37.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=67, status=PREPARED, latency=211ms
2026-01-30T19:53:37.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:37.624+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:37.656+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:37.6405331","path":"/api/payments/prepare"}"

org.springframework.web.client.HttpServerErrorException$InternalServerError: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:37.6405331","path":"/api/payments/prepare"}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:102) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:189) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:518) ~[spring-web-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.client.MicroserviceClient.preparePayment(MicroserviceClient.java:150) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.preparePhase(TwoPhaseCommitService.java:128) ~[classes/:na]
	at hr.fer.ecommerce.gateway.service.TwoPhaseCommitService.placeOrderWith2PC(TwoPhaseCommitService.java:39) ~[classes/:na]
	at hr.fer.ecommerce.gateway.controller.GatewayController.placeOrderWith2PC(GatewayController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:172) ~[spring-context-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.12.jar:6.2.12]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.12.jar:6.2.12]
	at hr.fer.ecommerce.gateway.controller.GatewayController$$SpringCGLIB$$0.placeOrderWith2PC(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2026-01-30T19:53:37.718+01:00 ERROR 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase failed: Failed to prepare payment: 500  on POST request for "http://localhost:8084/api/payments/prepare": "{"status":500,"message":"An unexpected error occurred: Simulated payment service failure (5% failure)","timestamp":"2026-01-30T19:53:37.6405331","path":"/api/payments/prepare"}"
2026-01-30T19:53:37.718+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Aborting order at: http://localhost:8082/api/orders/67/abort
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order aborted - ID: 67
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.service.TwoPhaseCommitService    : Abort phase completed in 47 ms with 1 compensations
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-1] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=349 ms | success=false
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:37.765+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:37.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 68
2026-01-30T19:53:37.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=68, status=PREPARED, latency=106ms
2026-01-30T19:53:37.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:37.871+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:37.887+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 65
2026-01-30T19:53:37.887+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=65, status=PRE_AUTHORIZED, latency=16ms
2026-01-30T19:53:37.887+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:37.887+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:37.918+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 60
2026-01-30T19:53:37.918+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=60, status=RESERVED, latency=31ms
2026-01-30T19:53:37.918+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:37.918+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:37.918+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/68/commit
2026-01-30T19:53:37.934+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 68
2026-01-30T19:53:37.934+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=68, latency=16ms
2026-01-30T19:53:37.934+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:37.934+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/65/commit
2026-01-30T19:53:37.949+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 65
2026-01-30T19:53:37.949+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=65, latency=15ms
2026-01-30T19:53:37.949+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:37.949+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/60/commit
2026-01-30T19:53:37.965+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 60
2026-01-30T19:53:37.965+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=60, latency=16ms
2026-01-30T19:53:37.965+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:37.965+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-2] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=196 ms | success=true
2026-01-30T19:53:37.965+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:37.981+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:37.981+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:37.981+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:38.095+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 69
2026-01-30T19:53:38.095+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=69, status=PREPARED, latency=114ms
2026-01-30T19:53:38.095+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:38.095+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:38.126+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 66
2026-01-30T19:53:38.126+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=66, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:38.126+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:38.126+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:38.187+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 61
2026-01-30T19:53:38.187+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=61, status=RESERVED, latency=61ms
2026-01-30T19:53:38.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:38.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:38.191+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/69/commit
2026-01-30T19:53:38.211+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 69
2026-01-30T19:53:38.211+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=69, latency=20ms
2026-01-30T19:53:38.211+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:38.212+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/66/commit
2026-01-30T19:53:38.237+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 66
2026-01-30T19:53:38.237+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=66, latency=26ms
2026-01-30T19:53:38.238+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:38.238+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/61/commit
2026-01-30T19:53:38.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 61
2026-01-30T19:53:38.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=61, latency=15ms
2026-01-30T19:53:38.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:38.253+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-3] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=272 ms | success=true
2026-01-30T19:53:38.257+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:38.257+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:38.257+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:38.257+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:38.378+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 70
2026-01-30T19:53:38.378+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=70, status=PREPARED, latency=121ms
2026-01-30T19:53:38.378+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:38.378+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:38.409+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 67
2026-01-30T19:53:38.409+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=67, status=PRE_AUTHORIZED, latency=31ms
2026-01-30T19:53:38.409+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:38.409+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:38.441+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 62
2026-01-30T19:53:38.441+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=62, status=RESERVED, latency=32ms
2026-01-30T19:53:38.441+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:38.441+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:38.441+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/70/commit
2026-01-30T19:53:38.456+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 70
2026-01-30T19:53:38.456+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=70, latency=15ms
2026-01-30T19:53:38.456+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:38.456+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/67/commit
2026-01-30T19:53:38.472+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 67
2026-01-30T19:53:38.472+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=67, latency=16ms
2026-01-30T19:53:38.472+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:38.472+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/62/commit
2026-01-30T19:53:38.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 62
2026-01-30T19:53:38.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=62, latency=16ms
2026-01-30T19:53:38.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:38.488+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-4] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=237 ms | success=true
2026-01-30T19:53:38.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : Received 2PC place order request for customer: john.doe@example.com
2026-01-30T19:53:38.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Starting 2PC for customer: john.doe@example.com
2026-01-30T19:53:38.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Preparing order and reserving stock
2026-01-30T19:53:38.505+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing order at: http://localhost:8082/api/orders/prepare
2026-01-30T19:53:38.652+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order prepared with ID: 71
2026-01-30T19:53:38.654+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order prepared: ID=71, status=PREPARED, latency=149ms
2026-01-30T19:53:38.658+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Pre-authorizing payment
2026-01-30T19:53:38.658+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing payment at: http://localhost:8084/api/payments/prepare
2026-01-30T19:53:38.733+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment prepared with ID: 68
2026-01-30T19:53:38.733+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment prepared: ID=68, status=PRE_AUTHORIZED, latency=75ms
2026-01-30T19:53:38.733+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Reserving shipment capacity
2026-01-30T19:53:38.733+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Preparing shipment at: http://localhost:8083/api/shipments/prepare
2026-01-30T19:53:38.820+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment prepared with ID: 63
2026-01-30T19:53:38.820+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment prepared: ID=63, status=RESERVED, latency=87ms
2026-01-30T19:53:38.820+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Prepare phase completed - all resources reserved
2026-01-30T19:53:38.820+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing order
2026-01-30T19:53:38.820+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing order at: http://localhost:8082/api/orders/71/commit
2026-01-30T19:53:38.852+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Order committed - ID: 71
2026-01-30T19:53:38.852+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Order committed: ID=71, latency=32ms
2026-01-30T19:53:38.852+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing payment
2026-01-30T19:53:38.852+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing payment at: http://localhost:8084/api/payments/68/commit
2026-01-30T19:53:38.867+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Payment committed - ID: 68
2026-01-30T19:53:38.867+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Payment committed: ID=68, latency=15ms
2026-01-30T19:53:38.867+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Committing shipment
2026-01-30T19:53:38.867+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Committing shipment at: http://localhost:8083/api/shipments/63/commit
2026-01-30T19:53:38.883+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.gateway.client.MicroserviceClient  : 2PC: Shipment committed - ID: 63
2026-01-30T19:53:38.883+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Shipment committed: ID=63, latency=16ms
2026-01-30T19:53:38.883+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.service.TwoPhaseCommitService    : Commit phase completed
2026-01-30T19:53:38.883+01:00  INFO 13824 --- [Api Gateway] [http-nio-8080-exec-5] h.f.e.g.controller.GatewayController     : GATEWAY | 2PC | totalDuration=383 ms | success=true
2026-01-30T20:32:49.350+01:00  INFO 13824 --- [Api Gateway] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-30T20:32:49.530+01:00  INFO 13824 --- [Api Gateway] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-30T20:32:50.042+01:00  INFO 13824 --- [Api Gateway] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-30T20:32:50.169+01:00  WARN 13824 --- [Api Gateway] [SpringApplicationShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-232]
2026-01-30T20:32:50.169+01:00  INFO 13824 --- [Api Gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-30T20:32:50.184+01:00  INFO 13824 --- [Api Gateway] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
